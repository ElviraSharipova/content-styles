{"ast":null,"code":"import _slicedToArray from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Grid,CircularProgress,Tabs,Tab,Fade,TextField as Input}from\"@material-ui/core\";import{withRouter}from\"react-router-dom\";import classnames from\"classnames\";// styles\nimport useStyles from\"./styles\";// logo\nimport logo from\"./logo.svg\";import google from\"../../images/google.svg\";// context\nimport{useUserDispatch,loginUser,registerUser,confirmUser,sendPasswordResetEmail}from\"../../context/UserContext\";import{receiveToken,doInit}from\"../../context/UserContext\";//components\nimport{Button,Typography}from\"../../components/Wrappers\";import Widget from\"../../components/Widget\";import config from\"../../config\";var getGreeting=function getGreeting(){return\"Подтвердите регистрацию в Eqvium\";};function Confirm(props){var classes=useStyles();// global\nvar userDispatch=useUserDispatch();useEffect(function(){var params=new URLSearchParams(props.location.search);var token=params.get(\"token\");if(token){receiveToken(token,userDispatch);doInit()(userDispatch);}},[]);// eslint-disable-line\n// local\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),activeTabId=_useState6[0],setActiveTabId=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),nameValue=_useState8[0],setNameValue=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),loginValue=_useState10[0],setLoginValue=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),passwordValue=_useState12[0],setPasswordValue=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),keyValue=_useState14[0],setKeyValue=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),forgotEmail=_useState16[0],setForgotEmail=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isForgot=_useState18[0],setIsForgot=_useState18[1];return/*#__PURE__*/React.createElement(Grid,{container:true,className:classes.container},/*#__PURE__*/React.createElement(\"div\",{className:!isForgot?classes.formContainer:classes.customFormContainer},/*#__PURE__*/React.createElement(\"div\",{className:classes.form},/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(React.Fragment,null,config.isBackend?/*#__PURE__*/React.createElement(Widget,{disableWidgetMenu:true,inheritHeight:true,style:{marginTop:32}},/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",block:true,style:{textAlign:\"center\"}},\"This is a real app with Node.js backend - use\",/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",weight:\"bold\"},\"\\\"admin@flatlogic.com / password\\\"\"),\" \",\"to login!\")):null,/*#__PURE__*/React.createElement(Typography,{variant:\"h2\",className:classes.greeting},getGreeting()),/*#__PURE__*/React.createElement(Fade,{in:error,style:!error?{display:\"none\"}:{display:\"inline-block\"}},/*#__PURE__*/React.createElement(Typography,{color:\"secondary\",className:classes.errorMessage},\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0438\\u043B\\u0438 \\u043B\\u043E\\u0433\\u0438\\u043D \\u043D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B :(\")),/*#__PURE__*/React.createElement(Input,{id:\"email\",InputProps:{classes:{underline:classes.InputUnderline,input:classes.Input}},value:loginValue,onChange:function onChange(e){return setLoginValue(e.target.value);},margin:\"normal\",placeholder:\"Email\",type:\"email\",fullWidth:true}),/*#__PURE__*/React.createElement(Input,{id:\"password\",InputProps:{classes:{underline:classes.InputUnderline,input:classes.Input}},value:passwordValue,onChange:function onChange(e){return setPasswordValue(e.target.value);},margin:\"normal\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",type:\"password\",fullWidth:true}),/*#__PURE__*/React.createElement(Input,{id:\"key\",InputProps:{classes:{underline:classes.InputUnderline,input:classes.Input}},value:keyValue,onChange:function onChange(e){return setKeyValue(e.target.value);},margin:\"normal\",placeholder:\"\\u041A\\u043E\\u0434\",type:\"password\",fullWidth:true}),/*#__PURE__*/React.createElement(\"div\",{className:classes.formButtons},/*#__PURE__*/React.createElement(Button,{disabled:loginValue.length===0||passwordValue.length===0||keyValue.length===0,onClick:function onClick(){confirmUser(userDispatch,loginValue,passwordValue,keyValue,props.history,setIsLoading,setError)();},variant:\"contained\",color:\"primary\",size:\"large\"},\"\\u0412\\u043E\\u0439\\u0442\\u0438\")))))));}export default withRouter(Confirm);","map":{"version":3,"sources":["/home/dekor/eqvium/react_material_test/admin-full/src/pages/confirm/Confirm.js"],"names":["React","useState","useEffect","Grid","CircularProgress","Tabs","Tab","Fade","TextField","Input","withRouter","classnames","useStyles","useUserDispatch","loginUser","registerUser","confirmUser","sendPasswordResetEmail","receiveToken","doInit","Button","Typography","Widget","config","getGreeting","Confirm","props","classes","userDispatch","params","URLSearchParams","location","search","token","get","isLoading","setIsLoading","error","setError","activeTabId","setActiveTabId","nameValue","setNameValue","loginValue","setLoginValue","passwordValue","setPasswordValue","keyValue","setKeyValue","forgotEmail","setForgotEmail","isForgot","setIsForgot","container","formContainer","customFormContainer","form","isBackend","marginTop","textAlign","greeting","display","errorMessage","underline","InputUnderline","input","e","target","value","formButtons","length","history"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Grid,\n  CircularProgress,\n  Tabs,\n  Tab,\n  Fade,\n  TextField as Input\n} from \"@material-ui/core\";\nimport { withRouter } from \"react-router-dom\";\nimport classnames from \"classnames\";\n\n// styles\nimport useStyles from \"./styles\";\n\n// logo\nimport logo from \"./logo.svg\";\nimport google from \"../../images/google.svg\";\n\n// context\nimport { useUserDispatch, loginUser, registerUser, confirmUser, sendPasswordResetEmail } from \"../../context/UserContext\";\nimport { receiveToken, doInit } from \"../../context/UserContext\";\n\n//components\nimport { Button, Typography } from \"../../components/Wrappers\";\nimport Widget from \"../../components/Widget\";\nimport config from \"../../config\";\n\nconst getGreeting = () => {\n    return \"Подтвердите регистрацию в Eqvium\";\n};\n\nfunction Confirm(props) {\n  var classes = useStyles();\n\n  // global\n  var userDispatch = useUserDispatch();\n\n  useEffect(() => {\n    const params = new URLSearchParams(props.location.search);\n    const token = params.get(\"token\");\n    if (token) {\n      receiveToken(token, userDispatch);\n      doInit()(userDispatch);\n    }\n  }, []); // eslint-disable-line\n  \n\n  // local\n  var [isLoading, setIsLoading] = useState(false);\n  var [error, setError] = useState(null);\n  var [activeTabId, setActiveTabId] = useState(0);\n  var [nameValue, setNameValue] = useState(\"\");\n  var [loginValue, setLoginValue] = useState(\"\");\n  var [passwordValue, setPasswordValue] = useState(\"\");\n  var [keyValue, setKeyValue] = useState(\"\");\n  var [forgotEmail, setForgotEmail] = useState(\"\");\n  var [isForgot, setIsForgot] = useState(false);\n\n  return (\n    <Grid container className={classes.container}>\n      <div className={!isForgot ? classes.formContainer : classes.customFormContainer}>\n        <div className={classes.form}>\n            <>\n            <React.Fragment>\n              {config.isBackend ? (\n                <Widget\n                  disableWidgetMenu\n                  inheritHeight\n                  style={{ marginTop: 32 }}\n                >\n                  <Typography\n                    variant={\"body2\"}\n                    block\n                    style={{ textAlign: \"center\" }}\n                  >\n                    This is a real app with Node.js backend - use\n                    <Typography variant={\"body2\"} weight={\"bold\"}>\n                      \"admin@flatlogic.com / password\"\n                    </Typography>{\" \"}\n                    to login!\n                  </Typography>\n                </Widget>\n              ) : null}\n              <Typography variant=\"h2\" className={classes.greeting}>\n                {getGreeting()}\n              </Typography>\n              <Fade\n                in={error}\n                style={\n                  !error ? { display: \"none\" } : { display: \"inline-block\" }\n                }\n              >\n                <Typography color=\"secondary\" className={classes.errorMessage}>\n                  Пароль или логин неверны :(\n                </Typography>\n              </Fade>\n              <Input\n                id=\"email\"\n                InputProps={{\n                  classes: {\n                    underline: classes.InputUnderline,\n                    input: classes.Input\n                  }\n                }}\n                value={loginValue}\n                onChange={e => setLoginValue(e.target.value)}\n                margin=\"normal\"\n                placeholder=\"Email\"\n                type=\"email\"\n                fullWidth\n              />\n              <Input\n                id=\"password\"\n                InputProps={{\n                  classes: {\n                    underline: classes.InputUnderline,\n                    input: classes.Input\n                  }\n                }}\n                value={passwordValue}\n                onChange={e => setPasswordValue(e.target.value)}\n                margin=\"normal\"\n                placeholder=\"Пароль\"\n                type=\"password\"\n                fullWidth\n              />\n              <Input\n                id=\"key\"\n                InputProps={{\n                  classes: {\n                    underline: classes.InputUnderline,\n                    input: classes.Input\n                  }\n                }}\n                value={keyValue}\n                onChange={e => setKeyValue(e.target.value)}\n                margin=\"normal\"\n                placeholder=\"Код\"\n                type=\"password\"\n                fullWidth\n              />\n              <div className={classes.formButtons}>\n                  <Button\n                    disabled={\n                      loginValue.length === 0 || passwordValue.length === 0 || keyValue.length === 0\n                    }\n\n                    onClick={() => {\n                      confirmUser(\n                        userDispatch,\n                        loginValue,\n                        passwordValue,\n                        keyValue,\n                        props.history,\n                        setIsLoading,\n                        setError\n                      )()\n                      }\n                    }\n                    variant=\"contained\"\n                    color=\"primary\"\n                    size=\"large\"\n                  >\n                    Войти\n                  </Button>\n              </div>\n            </React.Fragment>\n          </>\n        </div>\n      </div>\n    </Grid>\n  );\n}\n\nexport default withRouter(Confirm);\n"]},"metadata":{},"sourceType":"module"}