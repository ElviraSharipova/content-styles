{"ast":null,"code":"import _defineProperty from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from'react';import{Grid,Box,TextField}from'@material-ui/core';import Tabs from'@material-ui/core/Tabs';import Tab from'@material-ui/core/Tab';import{useParams}from'react-router';import Checkbox from'@material-ui/core/Checkbox';import Switch from'@material-ui/core/Switch';import{useLocation,useHistory}from'react-router-dom';import useStyles from'./styles';import{PersonOutline as PersonOutlineIcon,Lock as LockIcon,Settings as SettingsIcon}from'@material-ui/icons';import uuid from'uuid/v4';import Widget from'../../components/Widget';import{Typography,Button}from'../../components/Wrappers';import Select from'@material-ui/core/Select';import MenuItem from'@material-ui/core/MenuItem';import FormControlLabel from'@material-ui/core/FormControlLabel';import FormControl from'@material-ui/core/FormControl';import{toast}from'react-toastify';import Notification from'../../components/Notification';import{useManagementDispatch,useManagementState}from'../../context/ManagementContext';import config from'../../config';import Axios from'axios';import{actions}from'../../context/ManagementContext';var EditUser=function EditUser(){var _React$createElement;var classes=useStyles();var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),tab=_React$useState2[0],setTab=_React$useState2[1];var _React$useState3=React.useState({newPassword:'',confirmPassword:'',currentPassword:''}),_React$useState4=_slicedToArray(_React$useState3,2),password=_React$useState4[0],setPassword=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),data=_React$useState6[0],setData=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),editable=_React$useState8[0],setEditable=_React$useState8[1];var _useParams=useParams(),id=_useParams.id;var fileInput=React.useRef(null);var handleChangeTab=function handleChangeTab(event,newValue){setTab(newValue);};var location=useLocation();var managementDispatch=useManagementDispatch();var managementValue=useManagementState();function extractExtensionFrom(filename){if(!filename){return null;}var regex=/(?:\\.([^.]+))?$/;return regex.exec(filename)[1];}var uploadToServer=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(file,path,filename){var formData,uri,privateUrl;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formData=new FormData();formData.append('file',file);formData.append('filename',filename);uri=\"\".concat(config.baseURLApi,\"/file/upload/\").concat(path);_context.next=6;return Axios.post(uri,formData,{headers:{'Content-Type':'multipart/form-data'}});case 6:privateUrl=\"\".concat(path,\"/\").concat(filename);return _context.abrupt(\"return\",\"\".concat(config.baseURLApi,\"/file/download?privateUrl=\").concat(privateUrl));case 8:case\"end\":return _context.stop();}}},_callee);}));return function uploadToServer(_x,_x2,_x3){return _ref.apply(this,arguments);};}();var handleFile=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var file,extension,id,filename,privateUrl,publicUrl,avatarObj;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:file=event.target.files[0];extension=extractExtensionFrom(file.name);id=uuid();filename=\"\".concat(id,\".\").concat(extension);privateUrl=\"users/avatar/\".concat(filename);_context2.next=7;return uploadToServer(file,'users/avatar',filename);case 7:publicUrl=_context2.sent;avatarObj={id:id,name:file.name,sizeInBytes:file.size,privateUrl:privateUrl,publicUrl:publicUrl,new:true};setData(_objectSpread(_objectSpread({},data),{},{avatar:[].concat(_toConsumableArray(data.avatar),[avatarObj])}));return _context2.abrupt(\"return\",null);case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function handleFile(_x4){return _ref2.apply(this,arguments);};}();var history=useHistory();function sendNotification(){var componentProps={type:\"feedback\",message:\"User edited!\",variant:\"contained\",color:\"success\"};var options={type:\"info\",position:toast.POSITION.TOP_RIGHT,progressClassName:classes.progress,className:classes.notification,timeOut:1000};return toast(/*#__PURE__*/React.createElement(Notification,Object.assign({},componentProps,{className:classes.notificationComponent})),options);}useEffect(function(){if(id!=='edit'){actions.doFind(id)(managementDispatch);}else{actions.doFind(sessionStorage.getItem('user_id'))(managementDispatch);}},[]);useEffect(function(){if(location.pathname.includes('edit')){setEditable(true);}},[location.pathname]);useEffect(function(){setData(managementValue.currentUser);},[managementDispatch,managementValue,id]);var deleteOneImage=function deleteOneImage(id){setData(_objectSpread(_objectSpread({},data),{},{avatar:data.avatar.filter(function(avatar){return avatar.id!==id;})}));};function handleSubmit(){if(id==='edit'){actions.doUpdate(sessionStorage.getItem('user_id'),data,history)(managementDispatch);}else{actions.doUpdate(id,data,history)(managementDispatch);}sendNotification();}function handleUpdatePassword(){actions.doChangePassword(password)(managementDispatch);}function handleChangePassword(e){setPassword(_objectSpread(_objectSpread({},password),{},_defineProperty({},e.target.name,e.target.value)));}function handleChange(e){setData(_objectSpread(_objectSpread({},data),{},_defineProperty({},e.target.name,e.target.value)));}return/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Widget,null,/*#__PURE__*/React.createElement(Box,{display:'flex',justifyContent:'center'},/*#__PURE__*/React.createElement(Tabs,{indicatorColor:\"primary\",textColor:\"primary\",value:tab,onChange:handleChangeTab,\"aria-label\":\"full width tabs example\"},/*#__PURE__*/React.createElement(Tab,{label:\"ACCOUNT\",icon:/*#__PURE__*/React.createElement(PersonOutlineIcon,null),classes:{wrapper:classes.icon}}),/*#__PURE__*/React.createElement(Tab,{label:\"PROFILE\",icon:/*#__PURE__*/React.createElement(PersonOutlineIcon,null),classes:{wrapper:classes.icon}}),/*#__PURE__*/React.createElement(Tab,{label:\"CHANGE PASSWORD\",icon:/*#__PURE__*/React.createElement(LockIcon,null),classes:{wrapper:classes.icon}}),/*#__PURE__*/React.createElement(Tab,{label:\"SETTINGS\",icon:/*#__PURE__*/React.createElement(SettingsIcon,null),classes:{wrapper:classes.icon}}))))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Widget,null,/*#__PURE__*/React.createElement(Grid,{item:true,justify:'center',container:true},/*#__PURE__*/React.createElement(Box,{display:'flex',flexDirection:'column',width:600},tab===0?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Typography,{variant:'h5',weight:'medium',style:{marginBottom:30}},\"Account\"),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",value:data&&data.firstName,onChange:handleChange,name:\"firstName\",variant:\"outlined\",style:{marginBottom:35}}),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",value:data&&data.email,name:\"email\",onChange:handleChange,variant:\"outlined\",style:{marginBottom:35}}),/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",style:{marginBottom:35}},/*#__PURE__*/React.createElement(Select,{labelId:\"demo-simple-select-outlined-label\",id:\"demo-simple-select-outlined\",defaultValue:\"user\",value:data&&data.role,name:\"email\",onChange:handleChange},/*#__PURE__*/React.createElement(MenuItem,{value:\"admin\"},\"Admin\"),/*#__PURE__*/React.createElement(MenuItem,{value:\"user\"},\"User\")))):tab===1?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Typography,{variant:'h5',weight:'medium',style:{marginBottom:35}},\"Personal Information\"),/*#__PURE__*/React.createElement(Typography,{weight:'medium'},\"Photo:\"),/*#__PURE__*/React.createElement(\"div\",{class:classes.galleryWrap},data&&data.avatar&&data.avatar.length!==0?data.avatar.map(function(avatar,idx){return/*#__PURE__*/React.createElement(\"div\",{className:classes.imgWrap},/*#__PURE__*/React.createElement(\"span\",{className:classes.deleteImageX,onClick:function onClick(){return deleteOneImage(avatar.id);}},\"\\xD7\"),/*#__PURE__*/React.createElement(\"img\",{src:avatar.publicUrl,alt:\"photo\",height:'100%'}));}):null),/*#__PURE__*/React.createElement(\"label\",{className:classes.uploadLabel,style:{cursor:'pointer'}},'Upload an image',/*#__PURE__*/React.createElement(\"input\",{style:{display:'none'},accept:\"image/*\",type:\"file\",ref:fileInput,onChange:handleFile})),/*#__PURE__*/React.createElement(Typography,{size:'sm',style:{marginBottom:35}},\".PNG, .JPG, .JPEG\"),/*#__PURE__*/React.createElement(TextField,(_React$createElement={id:\"outlined-basic\",defaultValue:'Robbert',variant:\"outlined\"},_defineProperty(_React$createElement,\"defaultValue\",\"Name\"),_defineProperty(_React$createElement,\"value\",data&&data.firstName),_defineProperty(_React$createElement,\"name\",\"firstName\"),_defineProperty(_React$createElement,\"onChange\",handleChange),_defineProperty(_React$createElement,\"style\",{marginBottom:35}),_React$createElement)),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",defaultValue:'Last Name',value:data&&data.lastName,name:\"lastName\",onChange:handleChange,style:{marginBottom:35}}),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},defaultValue:'1-555-666-7070',value:data&&data.phone,name:\"phone\",onChange:handleChange}),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},type:'email',defaultValue:'Jane@gmail.com',value:data&&data.email,name:\"email\",onChange:handleChange}),/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",style:{marginBottom:35}},/*#__PURE__*/React.createElement(Select,{labelId:\"demo-simple-select-outlined-label-2\",id:\"demo-simple-select-outlined-2\",value:10},/*#__PURE__*/React.createElement(MenuItem,{value:10},\"United States\"),/*#__PURE__*/React.createElement(MenuItem,{value:20},\"Admin\"),/*#__PURE__*/React.createElement(MenuItem,{value:30},\"Super Admin\"))),/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",style:{marginBottom:35}},/*#__PURE__*/React.createElement(Select,{labelId:\"demo-simple-select-outlined-label\",id:\"demo-simple-select-outlined\",value:10},/*#__PURE__*/React.createElement(MenuItem,{value:10},\"California\"),/*#__PURE__*/React.createElement(MenuItem,{value:20},\"Admin\"),/*#__PURE__*/React.createElement(MenuItem,{value:30},\"Super Admin\"))),/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",style:{marginBottom:35}},/*#__PURE__*/React.createElement(Select,{labelId:\"demo-simple-select-outlined-label\",id:\"demo-simple-select-outlined\",value:10},/*#__PURE__*/React.createElement(MenuItem,{value:10},\"Polo Alto\"),/*#__PURE__*/React.createElement(MenuItem,{value:20},\"Admin\"),/*#__PURE__*/React.createElement(MenuItem,{value:30},\"Super Admin\"))),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},defaultValue:'1258 Riverside Drive Redding'}),/*#__PURE__*/React.createElement(Typography,{variant:'h5',weight:'medium',style:{marginBottom:35}},\"Company Information\"),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},defaultValue:'Company'}),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},defaultValue:'AD1234567891'}),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},defaultValue:'Company@gmail.com'}),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},defaultValue:'1-353-969-7070'}),/*#__PURE__*/React.createElement(Typography,{variant:'h5',weight:'medium',style:{marginBottom:35}},\"Social\"),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},defaultValue:'https://www.facebook.com/janejonson'}),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},defaultValue:'https://twitter/janejonson'}),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},defaultValue:'https://www.instagram.com/janejonson'}),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},defaultValue:'https://github.com/janejonson'}),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},defaultValue:'https://codepen.io/janejonson'}),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},defaultValue:'@janejonson'})):tab===2?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Typography,{variant:'h5',weight:'medium',style:{marginBottom:35}},\"Password\"),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},defaultValue:'Current Password',value:password.currentPassword||'',name:\"currentPassword\",onChange:handleChangePassword,helperText:'Forgot Password?'}),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},defaultValue:'New Password',value:password.newPassword||'',name:\"newPassword\",onChange:handleChangePassword}),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-basic\",variant:\"outlined\",style:{marginBottom:35},defaultValue:'Verify Password',value:password.confirmPassword||'',name:\"confirmPassword\",onChange:handleChangePassword})):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Typography,{variant:'h5',weight:'medium',style:{marginBottom:35}},\"Settings\"),/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",style:{marginBottom:35}},/*#__PURE__*/React.createElement(Select,{labelId:\"demo-simple-select-outlined-label\",id:\"demo-simple-select-outlined\",value:10},/*#__PURE__*/React.createElement(MenuItem,{value:10},\"English\"),/*#__PURE__*/React.createElement(MenuItem,{value:20},\"Admin\"),/*#__PURE__*/React.createElement(MenuItem,{value:30},\"Super Admin\"))),/*#__PURE__*/React.createElement(Typography,{weight:'bold'},\"Communication:\"),/*#__PURE__*/React.createElement(Box,{display:'flex'},/*#__PURE__*/React.createElement(FormControlLabel,{control:/*#__PURE__*/React.createElement(Checkbox,{checked:true,name:\"checkedB\",color:\"secondary\"}),label:\"Email\"}),/*#__PURE__*/React.createElement(FormControlLabel,{control:/*#__PURE__*/React.createElement(Checkbox,{name:\"checkedB\",color:\"secondary\"}),label:\"Messages\"}),/*#__PURE__*/React.createElement(FormControlLabel,{control:/*#__PURE__*/React.createElement(Checkbox,{name:\"checkedB\",color:\"secondary\"}),label:\"Phone\"})),/*#__PURE__*/React.createElement(Box,{display:\"flex\",mt:2,alignItems:\"center\"},/*#__PURE__*/React.createElement(Typography,{weight:\"medium\"},\"Email notification\"),/*#__PURE__*/React.createElement(Switch,{color:\"primary\",checked:true})),/*#__PURE__*/React.createElement(Box,{display:\"flex\",mt:2,mb:2,alignItems:\"center\"},/*#__PURE__*/React.createElement(Typography,{weight:\"medium\"},\"Send copy to personal email\"),/*#__PURE__*/React.createElement(Switch,{color:\"primary\"}))),editable&&/*#__PURE__*/React.createElement(Box,{display:'flex',justifyContent:'space-between'},tab!==2?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{variant:'outlined',color:'primary'},\"Reset\"),/*#__PURE__*/React.createElement(Button,{variant:'contained',color:'success',onClick:handleSubmit},\"Save\")):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{variant:'outlined',color:'primary'},\"Reset\"),/*#__PURE__*/React.createElement(Button,{variant:'contained',color:'success',onClick:handleUpdatePassword},\"Save Password\"))))))));};export default EditUser;","map":{"version":3,"sources":["/home/dekor/eqvium/react_material_test/admin-full/src/pages/user/EditUser.js"],"names":["React","useEffect","Grid","Box","TextField","Tabs","Tab","useParams","Checkbox","Switch","useLocation","useHistory","useStyles","PersonOutline","PersonOutlineIcon","Lock","LockIcon","Settings","SettingsIcon","uuid","Widget","Typography","Button","Select","MenuItem","FormControlLabel","FormControl","toast","Notification","useManagementDispatch","useManagementState","config","Axios","actions","EditUser","classes","useState","tab","setTab","newPassword","confirmPassword","currentPassword","password","setPassword","data","setData","editable","setEditable","id","fileInput","useRef","handleChangeTab","event","newValue","location","managementDispatch","managementValue","extractExtensionFrom","filename","regex","exec","uploadToServer","file","path","formData","FormData","append","uri","baseURLApi","post","headers","privateUrl","handleFile","target","files","extension","name","publicUrl","avatarObj","sizeInBytes","size","new","avatar","history","sendNotification","componentProps","type","message","variant","color","options","position","POSITION","TOP_RIGHT","progressClassName","progress","className","notification","timeOut","notificationComponent","doFind","sessionStorage","getItem","pathname","includes","currentUser","deleteOneImage","filter","handleSubmit","doUpdate","handleUpdatePassword","doChangePassword","handleChangePassword","e","value","handleChange","wrapper","icon","marginBottom","firstName","email","role","galleryWrap","length","map","idx","imgWrap","deleteImageX","uploadLabel","cursor","display","lastName","phone"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport { Grid, Box, TextField } from '@material-ui/core'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport { useParams } from 'react-router'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport Switch from '@material-ui/core/Switch'\nimport { useLocation, useHistory } from 'react-router-dom';\nimport useStyles from './styles'\n\nimport {\n    PersonOutline as PersonOutlineIcon,\n    Lock as LockIcon,\n    Settings as SettingsIcon,\n} from '@material-ui/icons'\nimport uuid from 'uuid/v4'\n\nimport Widget from '../../components/Widget'\nimport { Typography, Button } from '../../components/Wrappers'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport FormControl from '@material-ui/core/FormControl'\nimport { toast } from 'react-toastify'\n\nimport Notification from '../../components/Notification'\nimport {\n  useManagementDispatch,\n  useManagementState,\n} from '../../context/ManagementContext'\nimport config from '../../config'\nimport Axios from 'axios'\n\nimport { actions } from '../../context/ManagementContext'\n\nconst EditUser = () => {\n    const classes = useStyles()\n    const [tab, setTab] = React.useState(0)\n    const [password, setPassword] = React.useState({\n      newPassword: '',\n      confirmPassword: '',\n      currentPassword: '',\n    });\n    const [data, setData] = React.useState(null)\n    const [editable, setEditable] = React.useState(false)\n    let { id } = useParams();\n    const fileInput = React.useRef(null);\n    const handleChangeTab = (event, newValue) => {\n        setTab(newValue)\n    }\n    const location = useLocation();\n    const managementDispatch = useManagementDispatch()\n    const managementValue = useManagementState()\n\n    function extractExtensionFrom(filename) {\n      if (!filename) {\n        return null;\n      }\n    \n      const regex = /(?:\\.([^.]+))?$/;\n      return regex.exec(filename)[1];\n    }\n\n    const uploadToServer = async (file, path, filename) => {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('filename', filename);\n      const uri = `${config.baseURLApi}/file/upload/${path}`;\n      await Axios.post(uri, formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        },\n      );\n  \n      const privateUrl = `${path}/${filename}`;\n  \n      return `${config.baseURLApi}/file/download?privateUrl=${privateUrl}`;\n    }\n\n    const handleFile = async (event) => {\n      const file = event.target.files[0];\n  \n      const extension = extractExtensionFrom(file.name);\n      const id = uuid();\n      const filename = `${id}.${extension}`;\n      const privateUrl = `users/avatar/${filename}`;\n  \n      const publicUrl = await uploadToServer(\n        file,\n        'users/avatar',\n        filename,\n      );\n      let avatarObj = {\n        id: id,\n        name: file.name,\n        sizeInBytes: file.size,\n        privateUrl,\n        publicUrl,\n        new: true\n      }\n\n      setData({\n        ...data,\n        avatar: [...data.avatar, avatarObj]\n      })\n\n      return null;\n    }\n    const history = useHistory();\n    function sendNotification() {\n      const componentProps = {\n        type: \"feedback\",\n        message: \"User edited!\",\n        variant: \"contained\",\n        color: \"success\"\n      };\n      const options = {\n        type: \"info\",\n        position: toast.POSITION.TOP_RIGHT,\n        progressClassName: classes.progress,\n        className: classes.notification,\n        timeOut: 1000\n      };\n      return toast(\n        <Notification\n          {...componentProps}\n          className={classes.notificationComponent}\n        />,\n        options\n      );\n    }\n    useEffect(() => {\n      if (id !== 'edit') {\n        actions.doFind(id)(managementDispatch)\n      } else {\n        actions.doFind(sessionStorage.getItem('user_id'))(managementDispatch)\n      }\n    }, []);\n\n    useEffect(() => {\n      \n      if (location.pathname.includes('edit')) {\n        setEditable(true);\n      }\n    }, [location.pathname]);\n\n\n    useEffect(() => {\n        setData(managementValue.currentUser)\n    }, [managementDispatch, managementValue, id])\n\n    const deleteOneImage = (id) => {\n      setData({\n        ...data,\n        avatar: data.avatar.filter(avatar => avatar.id !== id)\n      })\n    }\n\n    function handleSubmit() {\n      if (id === 'edit') {\n        actions.doUpdate(sessionStorage.getItem('user_id'), data, history)(managementDispatch)\n      } else {\n        actions.doUpdate(id, data, history)(managementDispatch)        \n      }\n      sendNotification()\n    }\n\n    function handleUpdatePassword() {\n      actions.doChangePassword(password)(managementDispatch)\n    }\n\n    function handleChangePassword(e) {\n      setPassword({\n        ...password,\n        [e.target.name]: e.target.value,\n      })\n    }\n\n    function handleChange(e) {\n      setData({\n        ...data,\n        [e.target.name]: e.target.value,\n      });\n    }\n\n    return (\n        <Grid container spacing={3}>\n            <Grid item xs={12}>\n                <Widget>\n                    <Box display={'flex'} justifyContent={'center'}>\n                        <Tabs\n                            indicatorColor=\"primary\"\n                            textColor=\"primary\"\n                            value={tab}\n                            onChange={handleChangeTab}\n                            aria-label=\"full width tabs example\"\n                        >\n                            <Tab\n                                label=\"ACCOUNT\"\n                                icon={<PersonOutlineIcon />}\n                                classes={{ wrapper: classes.icon }}\n                            />\n                            <Tab\n                                label=\"PROFILE\"\n                                icon={<PersonOutlineIcon />}\n                                classes={{ wrapper: classes.icon }}\n                            />\n                            <Tab\n                                label=\"CHANGE PASSWORD\"\n                                icon={<LockIcon />}\n                                classes={{ wrapper: classes.icon }}\n                            />\n                            <Tab\n                                label=\"SETTINGS\"\n                                icon={<SettingsIcon />}\n                                classes={{ wrapper: classes.icon }}\n                            />\n                        </Tabs>\n                    </Box>\n                </Widget>\n            </Grid>\n            <Grid item xs={12}>\n                <Widget>\n                    <Grid item justify={'center'} container>\n                        <Box\n                            display={'flex'}\n                            flexDirection={'column'}\n                            width={600}\n                        >\n                            {tab === 0 ? (\n                                <>\n                                    <Typography\n                                        variant={'h5'}\n                                        weight={'medium'}\n                                        style={{ marginBottom: 30 }}\n                                    >\n                                        Account\n                                    </Typography>\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        value={data && data.firstName}\n                                        onChange={handleChange}\n                                        name=\"firstName\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                    />\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        value={data && data.email}\n                                        name=\"email\"\n                                        onChange={handleChange}\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                    />\n                                    <FormControl\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                    >\n                                        <Select\n                                            labelId=\"demo-simple-select-outlined-label\"\n                                            id=\"demo-simple-select-outlined\"\n                                            defaultValue=\"user\"\n                                            value={data && data.role}\n                                            name=\"email\"\n                                            onChange={handleChange}\n                                        >\n                                            <MenuItem value={\"admin\"}>\n                                                Admin\n                                            </MenuItem>\n                                            <MenuItem value={\"user\"}>\n                                                User\n                                            </MenuItem>\n                                        </Select>\n                                    </FormControl>\n                                </>\n                            ) : tab === 1 ? (\n                                <>\n                                    <Typography\n                                        variant={'h5'}\n                                        weight={'medium'}\n                                        style={{ marginBottom: 35 }}\n                                    >\n                                        Personal Information\n                                    </Typography>\n                                    <Typography weight={'medium'}>\n                                        Photo:\n                                    </Typography>\n                                    <div class={classes.galleryWrap}>\n                                    {data && data.avatar && data.avatar.length !== 0 ? (\n                                      data.avatar.map((avatar, idx) => (\n                                        <div className={classes.imgWrap}>\n                                          <span className={classes.deleteImageX} onClick={() => deleteOneImage(avatar.id)}>×</span>\n                                          <img\n                                              src={avatar.publicUrl}\n                                              alt=\"photo\"\n                                              height={'100%'}\n                                          />                                          \n                                        </div>\n                                      ))\n                                    ): null}\n                                    </div>\n                                    <label\n                                      className={classes.uploadLabel}\n                                      style={{ cursor: 'pointer' }}\n                                    >\n                                      {'Upload an image'}\n                                        <input style={{ display: 'none' }} accept=\"image/*\" type=\"file\" ref={fileInput} onChange={handleFile} />\n                                    </label>\n\n                                    <Typography\n                                        size={'sm'}\n                                        style={{ marginBottom: 35 }}\n                                    >\n                                        .PNG, .JPG, .JPEG\n                                    </Typography>\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        defaultValue={'Robbert'}\n                                        variant=\"outlined\"\n                                        defaultValue=\"Name\"\n                                        value={data && data.firstName}\n                                        name=\"firstName\"\n                                        onChange={handleChange}\n                                        style={{ marginBottom: 35 }}\n                                    />\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        defaultValue={'Last Name'}\n                                        value={data && data.lastName}\n                                        name=\"lastName\"\n                                        onChange={handleChange}\n                                        style={{ marginBottom: 35 }}\n                                    />\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        defaultValue={'1-555-666-7070'}\n                                        value={data && data.phone}\n                                        name=\"phone\"\n                                        onChange={handleChange}\n                                    />\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        type={'email'}\n                                        defaultValue={'Jane@gmail.com'}\n                                        value={data && data.email}\n                                        name=\"email\"\n                                        onChange={handleChange}\n                                    />\n                                    <FormControl\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                    >\n                                        <Select\n                                            labelId=\"demo-simple-select-outlined-label-2\"\n                                            id=\"demo-simple-select-outlined-2\"\n                                            value={10}\n                                        >\n                                            <MenuItem value={10}>\n                                                United States\n                                            </MenuItem>\n                                            <MenuItem value={20}>\n                                                Admin\n                                            </MenuItem>\n                                            <MenuItem value={30}>\n                                                Super Admin\n                                            </MenuItem>\n                                        </Select>\n                                    </FormControl>\n                                    <FormControl\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                    >\n                                        <Select\n                                            labelId=\"demo-simple-select-outlined-label\"\n                                            id=\"demo-simple-select-outlined\"\n                                            value={10}\n                                        >\n                                            <MenuItem value={10}>\n                                                California\n                                            </MenuItem>\n                                            <MenuItem value={20}>\n                                                Admin\n                                            </MenuItem>\n                                            <MenuItem value={30}>\n                                                Super Admin\n                                            </MenuItem>\n                                        </Select>\n                                    </FormControl>\n                                    <FormControl\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                    >\n                                        <Select\n                                            labelId=\"demo-simple-select-outlined-label\"\n                                            id=\"demo-simple-select-outlined\"\n                                            value={10}\n                                        >\n                                            <MenuItem value={10}>\n                                                Polo Alto\n                                            </MenuItem>\n                                            <MenuItem value={20}>\n                                                Admin\n                                            </MenuItem>\n                                            <MenuItem value={30}>\n                                                Super Admin\n                                            </MenuItem>\n                                        </Select>\n                                    </FormControl>\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        defaultValue={\n                                            '1258 Riverside Drive Redding'\n                                        }\n                                    />\n                                    <Typography\n                                        variant={'h5'}\n                                        weight={'medium'}\n                                        style={{ marginBottom: 35 }}\n                                    >\n                                        Company Information\n                                    </Typography>\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        defaultValue={'Company'}\n                                    />\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        defaultValue={'AD1234567891'}\n                                    />\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        defaultValue={'Company@gmail.com'}\n                                    />\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        defaultValue={'1-353-969-7070'}\n                                    />\n                                    <Typography\n                                        variant={'h5'}\n                                        weight={'medium'}\n                                        style={{ marginBottom: 35 }}\n                                    >\n                                        Social\n                                    </Typography>\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        defaultValue={\n                                            'https://www.facebook.com/janejonson'\n                                        }\n                                    />\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        defaultValue={\n                                            'https://twitter/janejonson'\n                                        }\n                                    />\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        defaultValue={\n                                            'https://www.instagram.com/janejonson'\n                                        }\n                                    />\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        defaultValue={\n                                            'https://github.com/janejonson'\n                                        }\n                                    />\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        defaultValue={\n                                            'https://codepen.io/janejonson'\n                                        }\n                                    />\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        defaultValue={'@janejonson'}\n                                    />\n                                </>\n                            ) : tab === 2 ? (\n                                <>\n                                    <Typography\n                                        variant={'h5'}\n                                        weight={'medium'}\n                                        style={{ marginBottom: 35 }}\n                                    >\n                                        Password\n                                    </Typography>\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        defaultValue={'Current Password'}\n                                        value={password.currentPassword || ''}\n                                        name=\"currentPassword\"\n                                        onChange={handleChangePassword}\n                                        helperText={'Forgot Password?'}\n                                    />\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        defaultValue={'New Password'}\n                                        value={password.newPassword || ''}\n                                        name=\"newPassword\"\n                                        onChange={handleChangePassword}\n                                    />\n                                    <TextField\n                                        id=\"outlined-basic\"\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                        defaultValue={'Verify Password'}\n                                        value={password.confirmPassword || ''}\n                                        name=\"confirmPassword\"\n                                        onChange={handleChangePassword}\n                                    />\n                                </>\n                            ) : (\n                                <>\n                                    <Typography\n                                        variant={'h5'}\n                                        weight={'medium'}\n                                        style={{ marginBottom: 35 }}\n                                    >\n                                        Settings\n                                    </Typography>\n                                    <FormControl\n                                        variant=\"outlined\"\n                                        style={{ marginBottom: 35 }}\n                                    >\n                                        <Select\n                                            labelId=\"demo-simple-select-outlined-label\"\n                                            id=\"demo-simple-select-outlined\"\n                                            value={10}\n                                        >\n                                            <MenuItem value={10}>\n                                                English\n                                            </MenuItem>\n                                            <MenuItem value={20}>\n                                                Admin\n                                            </MenuItem>\n                                            <MenuItem value={30}>\n                                                Super Admin\n                                            </MenuItem>\n                                        </Select>\n                                    </FormControl>\n                                    <Typography weight={'bold'}>\n                                        Communication:\n                                    </Typography>\n                                    <Box display={'flex'}>\n                                        <FormControlLabel\n                                            control={\n                                                <Checkbox\n                                                    checked\n                                                    name=\"checkedB\"\n                                                    color=\"secondary\"\n                                                />\n                                            }\n                                            label=\"Email\"\n                                        />\n                                        <FormControlLabel\n                                            control={\n                                                <Checkbox\n                                                    name=\"checkedB\"\n                                                    color=\"secondary\"\n                                                />\n                                            }\n                                            label=\"Messages\"\n                                        />\n                                        <FormControlLabel\n                                            control={\n                                                <Checkbox\n                                                    name=\"checkedB\"\n                                                    color=\"secondary\"\n                                                />\n                                            }\n                                            label=\"Phone\"\n                                        />\n                                    </Box>\n                                    <Box display={\"flex\"} mt={2} alignItems={\"center\"}>\n                                        <Typography weight={\"medium\"}>\n                                            Email notification\n                                        </Typography>\n                                        <Switch color={\"primary\"} checked />\n                                    </Box>\n                                    <Box display={\"flex\"} mt={2} mb={2} alignItems={\"center\"}>\n                                        <Typography weight={\"medium\"}>\n                                            Send copy to personal email\n                                        </Typography>\n                                        <Switch color={\"primary\"} />\n                                    </Box>\n                                </>\n                            )}\n                            {editable && \n                              <Box\n                                  display={'flex'}\n                                  justifyContent={'space-between'}\n                              >\n                                {tab !== 2 ? (\n                                  <>\n                                  <Button variant={'outlined'} color={'primary'}>\n                                      Reset\n                                  </Button>\n                                  <Button variant={'contained'} color={'success'} onClick={handleSubmit}>\n                                      Save\n                                  </Button>\n                                  </>                                \n                                ) : (\n                                  <>\n                                  <Button variant={'outlined'} color={'primary'}>\n                                      Reset\n                                  </Button>\n                                  <Button variant={'contained'} color={'success'} onClick={handleUpdatePassword}>\n                                      Save Password\n                                  </Button>\n                                  </> \n                                )}\n\n                              </Box>                              \n                             \n                            }\n                        </Box>\n                    </Grid>\n                </Widget>\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default EditUser\n"]},"metadata":{},"sourceType":"module"}