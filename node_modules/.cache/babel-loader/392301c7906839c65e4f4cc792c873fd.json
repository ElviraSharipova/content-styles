{"ast":null,"code":"var _jsxFileName = \"/home/dekor/eqvium/react_material_test/admin-full-v2/src/pages/modules/components/PlotPopper.js\";\nimport React from \"react\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { Popper, Divider, RadioGroup, Box, Radio, Grid, Switch as SwitchMode } from \"@material-ui/core\"; //import ReactApexChart from \"react-apexcharts\";\n\nimport ApexLineChart from \"./ApexLineChart\";\nimport useStyles from \"../styles\"; // components\n\nimport Widget from \"../../../components/Widget\";\nimport { Typography, Button } from \"../../../components/Wrappers\";\nimport Themes from \"../../../themes\";\nimport { useThemeDispatch } from \"../../../context/ThemeContext\";\n\nfunction PlotPopper({\n  open,\n  id,\n  anchorEl\n}) {\n  const [stream, setStream] = useState(false);\n  const [changed, setChanged] = useState(false); //var zero_array = new Array(300).fill([0,0]);\n\n  var zero_array = new Array(125).fill([0, 0]);\n  const [data1, updateData1] = useState(zero_array);\n  const ws = useRef(null); //  ws.current = new WebSocket(\"ws://79.143.25.41:8080/gear\");\n  //  ws.current.binaryType = 'arraybuffer';\n\n  useEffect(() => {\n    ws.current = new WebSocket(\"ws://79.143.25.41:8080/gear\");\n    ws.current.binaryType = 'arraybuffer';\n\n    ws.current.onopen = () => {\n      console.log(\"ws opened\"); //        ws.current.send(\"{'id':14,'type':'car','dev_sn':'20A-0004','owner':4,'allowed_users':[4]}\");\n\n      var str = \"[{\\\"id\\\":14,\\\"type\\\":\\\"car\\\",\\\"dev_sn\\\":\\\"20A-0004\\\",\\\"owner\\\":4,\\\"allowed_users\\\":[4]}]\"; //console.log(JSON.stringify(str));\n\n      ws.current.send(str); //axios.defaults.headers.common[\"Authorization\"] = \"\";\n    }; //if (localStorage.getItem(\"stream\") === \"on\") { console.log(\"stream on\")};\n    //        if (stream) { console.log(\"hi\"); ws.current.send(\"hi\");}\n\n\n    ws.current.onclose = () => console.log(\"ws closed\"); //devs - offline\n\n\n    return () => {\n      ws.current.close();\n    };\n  }, []);\n  useEffect(() => {\n    if (!ws.current) return;\n\n    if (changed) {\n      if (stream) {\n        console.log(\"start stream send\");\n        var payload = \"{\\\"slot\\\": \\\"data stream\\\", \\\"data\\\" : {\\\"is on\\\" : true, \\\"sensor\\\":\\\"head\\\", \\\"period\\\":200}}\\n\";\n        var decoded_str = btoa(payload);\n        var str = \"[{\\\"dev_sn\\\":\\\"20A-0004\\\", \\\"payload\\\": \\\"\" + decoded_str + \"\\\"}]\";\n        console.log(str);\n        ws.current.send(str);\n      }\n\n      if (!stream) {\n        console.log(\"stop stream send\");\n        var payload = \"{\\\"slot\\\": \\\"data stream\\\", \\\"data\\\" : {\\\"is on\\\" : false, \\\"sensor\\\":\\\"head\\\", \\\"period\\\":200}}\\n\";\n        var decoded_str = btoa(payload);\n        var str = \"[{\\\"dev_sn\\\":\\\"20A-0004\\\", \\\"payload\\\": \\\"\" + decoded_str + \"\\\"}]\";\n        console.log(str);\n        ws.current.send(str);\n      }\n\n      setChanged(false);\n    } //if (!stream) { \n    //  console.log(\"stop stream\");\n    //  ws.current.send(\"stop start\");\n    // }\n    //const message = ;\n    // console.log( message);\n\n  }, [[stream], [changed]]);\n  useEffect(() => {\n    if (!ws.current) return;\n\n    ws.current.onmessage = e => {\n      //            console.log(JSON.parse(e.data));\n      const message = JSON.parse(e.data);\n\n      if (message.hasOwnProperty('data')) {\n        //console.log(JSON.parse(e.data));\n        let array1;\n\n        if (message[\"data\"][\"data\"] != null) {\n          if (message[\"data\"][\"sensor\"] == \"head\") {\n            var len = message[\"data\"][\"data\"].length; //console.log(\"-----\");\n\n            for (var i = 0; i < len; i++) {\n              //console.log(\"-----\");\n              //console.log(message[\"data\"][\"data\"][i]);\n              array1 = [...data1, [message[\"data\"][\"data\"][i][0], message[\"data\"][\"data\"][i][1]]]; //                 array1 = [...data1, [ message[\"data\"][\"data\"][len-1][0], message[\"data\"][\"data\"][len-1][1]]];\n\n              array1.shift(); //updateData1(array1);\n            } //if (message[\"data\"][\"data\"][0][0] < 10 || message[\"data\"][\"data\"][0][0] > 290) {\n            //  array1 = zero_array;\n            //}\n\n\n            updateData1(array1);\n          }\n        }\n      }\n    };\n  }, [[data1]]); //  const data1 = [0,0,0,0,0,0,0,0,0];\n\n  const classes = useStyles();\n  var themeDispatch = useThemeDispatch();\n\n  const handleChangeTheme = e => {\n    localStorage.setItem(\"theme\", e.target.value);\n    themeDispatch(Themes[e.target.value]);\n  };\n\n  return /*#__PURE__*/React.createElement(Popper, {\n    id: id,\n    open: open,\n    anchorEl: anchorEl,\n    placement: \"left-start\",\n    style: {\n      zIndex: 100,\n      width: \"40%\"\n    },\n    elevation: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Widget, {\n    disableWidgetMenu: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(Widget, {\n    title: \"Данные с УЗ датчика\",\n    noBodyPadding: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ApexLineChart, {\n    data: data1,\n    type: \"line\",\n    width: \"700\",\n    height: \"350\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  }))))), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Box, {\n    my: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    className: classes.marginRight,\n    onClick: () => {\n      setStream(!stream);\n      setChanged(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }, stream ? \"Остановить передачу\" : \"Начать передачу\"))))));\n}\n\nexport default React.memo(PlotPopper, (prevProps, nextProps) => {\n  return prevProps.anchorEl === nextProps.anchorEl;\n});","map":{"version":3,"sources":["/home/dekor/eqvium/react_material_test/admin-full-v2/src/pages/modules/components/PlotPopper.js"],"names":["React","useState","useEffect","useRef","Popper","Divider","RadioGroup","Box","Radio","Grid","Switch","SwitchMode","ApexLineChart","useStyles","Widget","Typography","Button","Themes","useThemeDispatch","PlotPopper","open","id","anchorEl","stream","setStream","changed","setChanged","zero_array","Array","fill","data1","updateData1","ws","current","WebSocket","binaryType","onopen","console","log","str","send","onclose","close","payload","decoded_str","btoa","onmessage","e","message","JSON","parse","data","hasOwnProperty","array1","len","length","i","shift","classes","themeDispatch","handleChangeTheme","localStorage","setItem","target","value","zIndex","width","marginRight","memo","prevProps","nextProps"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,MAA9B,QAA4C,OAA5C;AAEA,SACEC,MADF,EAEEC,OAFF,EAGEC,UAHF,EAIEC,GAJF,EAKEC,KALF,EAMEC,IANF,EAOEC,MAAM,IAAIC,UAPZ,QAQO,mBARP,C,CAUA;;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AAEA,OAAOC,SAAP,MAAsB,WAAtB,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,SAASC,UAAT,EAAqBC,MAArB,QAAmC,8BAAnC;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,SAASC,gBAAT,QAAiC,+BAAjC;;AAEA,SAASC,UAAT,CAAoB;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,EAAR;AAAYC,EAAAA;AAAZ,CAApB,EAA4C;AAE1C,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBvB,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAACwB,OAAD,EAAUC,UAAV,IAAwBzB,QAAQ,CAAC,KAAD,CAAtC,CAH0C,CAI1C;;AACA,MAAI0B,UAAU,GAAG,IAAIC,KAAJ,CAAU,GAAV,EAAeC,IAAf,CAAoB,CAAC,CAAD,EAAG,CAAH,CAApB,CAAjB;AACA,QAAM,CAACC,KAAD,EAAQC,WAAR,IAAuB9B,QAAQ,CAAC0B,UAAD,CAArC;AAEA,QAAMK,EAAE,GAAG7B,MAAM,CAAC,IAAD,CAAjB,CAR0C,CAU5C;AACA;;AAEED,EAAAA,SAAS,CAAC,MAAM;AACV8B,IAAAA,EAAE,CAACC,OAAH,GAAa,IAAIC,SAAJ,CAAc,6BAAd,CAAb;AACAF,IAAAA,EAAE,CAACC,OAAH,CAAWE,UAAX,GAAwB,aAAxB;;AACAH,IAAAA,EAAE,CAACC,OAAH,CAAWG,MAAX,GAAoB,MAAM;AACxBC,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EADwB,CAElC;;AACU,UAAIC,GAAG,GAAG,0FAAV,CAHwB,CAIxB;;AACAP,MAAAA,EAAE,CAACC,OAAH,CAAWO,IAAX,CAAgBD,GAAhB,EALwB,CAMxB;AACF,KAPA,CAHU,CAWX;AACP;;;AAEQP,IAAAA,EAAE,CAACC,OAAH,CAAWQ,OAAX,GAAqB,MAAMJ,OAAO,CAACC,GAAR,CAAY,WAAZ,CAA3B,CAdU,CAc2C;;;AACrD,WAAO,MAAM;AACTN,MAAAA,EAAE,CAACC,OAAH,CAAWS,KAAX;AACH,KAFD;AAGH,GAlBM,EAkBJ,EAlBI,CAAT;AAqBAxC,EAAAA,SAAS,CAAC,MAAM;AACV,QAAI,CAAC8B,EAAE,CAACC,OAAR,EAAiB;;AACjB,QAAGR,OAAH,EAAY;AACV,UAAIF,MAAJ,EAAY;AACVc,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA,YAAIK,OAAO,GAAG,mGAAd;AACA,YAAIC,WAAW,GAAGC,IAAI,CAACF,OAAD,CAAtB;AACA,YAAIJ,GAAG,GAAG,+CAA6CK,WAA7C,GAAyD,MAAnE;AACAP,QAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACAP,QAAAA,EAAE,CAACC,OAAH,CAAWO,IAAX,CAAgBD,GAAhB;AACF;;AACD,UAAG,CAAChB,MAAJ,EAAY;AACTc,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA,YAAIK,OAAO,GAAG,oGAAd;AACA,YAAIC,WAAW,GAAGC,IAAI,CAACF,OAAD,CAAtB;AACA,YAAIJ,GAAG,GAAG,+CAA6CK,WAA7C,GAAyD,MAAnE;AACAP,QAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACAP,QAAAA,EAAE,CAACC,OAAH,CAAWO,IAAX,CAAgBD,GAAhB;AACH;;AACDb,MAAAA,UAAU,CAAC,KAAD,CAAV;AAEP,KArBiB,CAwBV;AACA;AACA;AACA;AACI;AACD;;AAEN,GA/BM,EA+BJ,CAAC,CAACH,MAAD,CAAD,EAAW,CAACE,OAAD,CAAX,CA/BI,CAAT;AAiCEvB,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI,CAAC8B,EAAE,CAACC,OAAR,EAAiB;;AACbD,IAAAA,EAAE,CAACC,OAAH,CAAWa,SAAX,GAAuBC,CAAC,IAAI;AACxC;AACY,YAAMC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWH,CAAC,CAACI,IAAb,CAAhB;;AAEF,UAAIH,OAAO,CAACI,cAAR,CAAuB,MAAvB,CAAJ,EAAoC;AAClC;AACA,YAAIC,MAAJ;;AACA,YAAIL,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,KAA2B,IAA/B,EAAqC;AACnC,cAAIA,OAAO,CAAC,MAAD,CAAP,CAAgB,QAAhB,KAA6B,MAAjC,EAAyC;AACvC,gBAAIM,GAAG,GAAGN,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwBO,MAAlC,CADuC,CAEvC;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,GAApB,EAAyBE,CAAC,EAA1B,EAA8B;AAC9B;AACE;AACAH,cAAAA,MAAM,GAAG,CAAC,GAAGvB,KAAJ,EAAW,CAAEkB,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwBQ,CAAxB,EAA2B,CAA3B,CAAF,EAAiCR,OAAO,CAAC,MAAD,CAAP,CAAgB,MAAhB,EAAwBQ,CAAxB,EAA2B,CAA3B,CAAjC,CAAX,CAAT,CAH4B,CAI7C;;AACiBH,cAAAA,MAAM,CAACI,KAAP,GAL4B,CAM5B;AACD,aAVsC,CAWvC;AACA;AACA;;;AACD1B,YAAAA,WAAW,CAACsB,MAAD,CAAX;AACA;AACF;AACF;AACF,KA1BG;AA2BP,GA7BQ,EA6BN,CAAC,CAACvB,KAAD,CAAD,CA7BM,CAAT,CAnEwC,CAoG5C;;AAEE,QAAM4B,OAAO,GAAG7C,SAAS,EAAzB;AACA,MAAI8C,aAAa,GAAGzC,gBAAgB,EAApC;;AACA,QAAM0C,iBAAiB,GAAGb,CAAC,IAAI;AAC7Bc,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8Bf,CAAC,CAACgB,MAAF,CAASC,KAAvC;AACAL,IAAAA,aAAa,CAAC1C,MAAM,CAAC8B,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAP,CAAb;AACD,GAHD;;AAKA,sBACE,oBAAC,MAAD;AACE,IAAA,EAAE,EAAE3C,EADN;AAEE,IAAA,IAAI,EAAED,IAFR;AAGE,IAAA,QAAQ,EAAEE,QAHZ;AAIE,IAAA,SAAS,EAAE,YAJb;AAKE,IAAA,KAAK,EAAE;AAAE2C,MAAAA,MAAM,EAAE,GAAV;AAAeC,MAAAA,KAAK,EAAE;AAAtB,KALT;AAME,IAAA,SAAS,EAAE,CANb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQE,oBAAC,MAAD;AAAQ,IAAA,iBAAiB,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AACE,IAAA,OAAO,EAAC,MADV;AAEE,IAAA,aAAa,EAAC,QAFhB;AAGE,IAAA,cAAc,EAAC,eAHjB;AAIE,IAAA,UAAU,EAAC,QAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAME,uDACJ,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,OAAO,EAAE,EAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACL,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACS,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAE,qBAAf;AAAsC,IAAA,aAAa,MAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,aAAD;AACI,IAAA,IAAI,EAAEpC,KADV;AAEI,IAAA,IAAI,EAAC,MAFT;AAGI,IAAA,KAAK,EAAC,KAHV;AAII,IAAA,MAAM,EAAC,KAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,CADT,CADK,CADI,CANF,eAoBE,uDACE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,MAAD;AACQ,IAAA,KAAK,EAAE,SADf;AAEQ,IAAA,OAAO,EAAE,WAFjB;AAGQ,IAAA,SAAS,EAAE4B,OAAO,CAACS,WAH3B;AAIQ,IAAA,OAAO,EAAE,MAAM;AAAC3C,MAAAA,SAAS,CAAC,CAACD,MAAF,CAAT;AAAoBG,MAAAA,UAAU,CAAC,IAAD,CAAV;AAAkB,KAJ9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMQH,MAAM,GAAG,qBAAH,GAA2B,iBANzC,CADA,CADF,CApBF,CADF,CARF,CADF;AA8CD;;AAED,eAAevB,KAAK,CAACoE,IAAN,CAAWjD,UAAX,EAAuB,CAACkD,SAAD,EAAYC,SAAZ,KAA0B;AAC9D,SAAOD,SAAS,CAAC/C,QAAV,KAAuBgD,SAAS,CAAChD,QAAxC;AACD,CAFc,CAAf","sourcesContent":["import React from \"react\";\nimport { useState, useEffect, useRef } from \"react\";\n\nimport {\n  Popper,\n  Divider,\n  RadioGroup,\n  Box,\n  Radio,\n  Grid,\n  Switch as SwitchMode\n} from \"@material-ui/core\";\n\n//import ReactApexChart from \"react-apexcharts\";\nimport ApexLineChart from \"./ApexLineChart\";\n\nimport useStyles from \"../styles\";\n\n// components\nimport Widget from \"../../../components/Widget\";\nimport { Typography, Button } from \"../../../components/Wrappers\";\nimport Themes from \"../../../themes\";\nimport { useThemeDispatch } from \"../../../context/ThemeContext\";\n\nfunction PlotPopper({ open, id, anchorEl }) {\n\n  const [stream, setStream] = useState(false);\n  const [changed, setChanged] = useState(false);\n  //var zero_array = new Array(300).fill([0,0]);\n  var zero_array = new Array(125).fill([0,0]);\n  const [data1, updateData1] = useState(zero_array);\n\n  const ws = useRef(null);\n\n//  ws.current = new WebSocket(\"ws://79.143.25.41:8080/gear\");\n//  ws.current.binaryType = 'arraybuffer';\n\n  useEffect(() => {\n        ws.current = new WebSocket(\"ws://79.143.25.41:8080/gear\");\n        ws.current.binaryType = 'arraybuffer';\n        ws.current.onopen = () => {\n          console.log(\"ws opened\");\n//        ws.current.send(\"{'id':14,'type':'car','dev_sn':'20A-0004','owner':4,'allowed_users':[4]}\");\n          var str = \"[{\\\"id\\\":14,\\\"type\\\":\\\"car\\\",\\\"dev_sn\\\":\\\"20A-0004\\\",\\\"owner\\\":4,\\\"allowed_users\\\":[4]}]\";\n          //console.log(JSON.stringify(str));\n          ws.current.send(str);\n          //axios.defaults.headers.common[\"Authorization\"] = \"\";\n       }\n       //if (localStorage.getItem(\"stream\") === \"on\") { console.log(\"stream on\")};\n//        if (stream) { console.log(\"hi\"); ws.current.send(\"hi\");}\n      \n        ws.current.onclose = () => console.log(\"ws closed\"); //devs - offline\n        return () => {\n            ws.current.close();\n        };\n    }, []);\n\n\n  useEffect(() => {\n        if (!ws.current) return;\n        if(changed) {\n          if (stream) { \n            console.log(\"start stream send\");\n            var payload = \"{\\\"slot\\\": \\\"data stream\\\", \\\"data\\\" : {\\\"is on\\\" : true, \\\"sensor\\\":\\\"head\\\", \\\"period\\\":200}}\\n\";\n            var decoded_str = btoa(payload);\n            var str = \"[{\\\"dev_sn\\\":\\\"20A-0004\\\", \\\"payload\\\": \\\"\"+decoded_str+\"\\\"}]\";\n            console.log(str);\n            ws.current.send(str);\n         }\n         if(!stream) {\n            console.log(\"stop stream send\");\n            var payload = \"{\\\"slot\\\": \\\"data stream\\\", \\\"data\\\" : {\\\"is on\\\" : false, \\\"sensor\\\":\\\"head\\\", \\\"period\\\":200}}\\n\";\n            var decoded_str = btoa(payload);\n            var str = \"[{\\\"dev_sn\\\":\\\"20A-0004\\\", \\\"payload\\\": \\\"\"+decoded_str+\"\\\"}]\";\n            console.log(str);\n            ws.current.send(str);\n        }\n        setChanged(false);\n\n}\n\n         \n        //if (!stream) { \n        //  console.log(\"stop stream\");\n        //  ws.current.send(\"stop start\");\n        // }\n            //const message = ;\n           // console.log( message);\n        \n    }, [[stream], [changed]]);\n\n    useEffect(() => {\n        if (!ws.current) return;\n            ws.current.onmessage = e => {\n//            console.log(JSON.parse(e.data));\n            const message = JSON.parse(e.data);\n\n          if( message.hasOwnProperty('data')) {\n            //console.log(JSON.parse(e.data));\n            let array1;\n            if (message[\"data\"][\"data\"] != null) {\n              if (message[\"data\"][\"sensor\"] == \"head\") {\n                var len = message[\"data\"][\"data\"].length;\n                //console.log(\"-----\");\n                for (var i = 0; i < len; i++) {\n                //console.log(\"-----\");\n                  //console.log(message[\"data\"][\"data\"][i]);\n                  array1 = [...data1, [ message[\"data\"][\"data\"][i][0], message[\"data\"][\"data\"][i][1]]];\n //                 array1 = [...data1, [ message[\"data\"][\"data\"][len-1][0], message[\"data\"][\"data\"][len-1][1]]];\n                  array1.shift();\n                  //updateData1(array1);\n                }\n                //if (message[\"data\"][\"data\"][0][0] < 10 || message[\"data\"][\"data\"][0][0] > 290) {\n                //  array1 = zero_array;\n                //}\n               updateData1(array1);\n              }\n            }\n          }\n        };\n    }, [[data1]]);\n\n\n\n//  const data1 = [0,0,0,0,0,0,0,0,0];\n\n  const classes = useStyles();\n  var themeDispatch = useThemeDispatch();\n  const handleChangeTheme = e => {\n    localStorage.setItem(\"theme\", e.target.value);\n    themeDispatch(Themes[e.target.value]);\n  };\n\n  return (\n    <Popper\n      id={id}\n      open={open}\n      anchorEl={anchorEl}\n      placement={\"left-start\"}\n      style={{ zIndex: 100, width: \"40%\" }}\n      elevation={4}\n    >\n      <Widget disableWidgetMenu>\n        <Box\n          display=\"flex\"\n          flexDirection=\"column\"\n          justifyContent=\"space-between\"\n          alignItems=\"center\"\n        >\n          <>\n      <Grid container spacing={12}>\n <Grid item xs={12}>\n          <Widget title={\"Данные с УЗ датчика\"} noBodyPadding>\n          <ApexLineChart\n              data={data1}\n              type=\"line\"\n              width=\"700\"\n              height=\"350\"\n            />\n          </Widget>\n        </Grid>\n        </Grid>\n</>\n          <>\n            <Box my={2}>\n            <Button\n                    color={\"primary\"}\n                    variant={\"contained\"}\n                    className={classes.marginRight}\n                    onClick={() => {setStream(!stream); setChanged(true);}}\n                  >\n                   {stream ? \"Остановить передачу\" : \"Начать передачу\"}\n                  </Button>\n             </Box>\n          </>\n        </Box>\n      </Widget>\n    </Popper>\n  );\n}\n\nexport default React.memo(PlotPopper, (prevProps, nextProps) => {\n  return prevProps.anchorEl === nextProps.anchorEl;\n});\n"]},"metadata":{},"sourceType":"module"}