{"ast":null,"code":"import _defineProperty from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from\"react\";import{Box,CircularProgress,Grid,MenuItem,Select,TextField as Input}from\"@material-ui/core\";import{useParams,useHistory}from\"react-router-dom\";import useStyles from\"./styles\";//context\nimport{getProductsRequest,useProductsState,updateProduct,createProduct,getProductsImages}from\"../../context/ProductContext\";//components\nimport Widget from\"../../components/Widget\";import{Typography,Button}from\"../../components/Wrappers\";import config from\"../../config\";import{toast,ToastContainer}from\"react-toastify\";import{Close as CloseIcon}from\"@material-ui/icons\";import Notification from\"../../components/Notification\";var CreateProduct=function CreateProduct(){var classes=useStyles();var _useParams=useParams(),id=_useParams.id;var context=useProductsState();var getId=function getId(id){return context.products.products.findIndex(function(c){return c.id==id;// eslint-disable-line\n});};var _React$useState=React.useState(context.products.products[getId(id)]),_React$useState2=_slicedToArray(_React$useState,2),localProducts=_React$useState2[0],setLocalProducts=_React$useState2[1];var _React$useState3=React.useState({img:\"https://flatlogic-node-backend.herokuapp.com/assets/products/img1.jpg\",title:null,subtitle:null,price:0.1,rating:5,description_1:null,description_2:null,code:null,hashtag:null,technology:[],discount:0}),_React$useState4=_slicedToArray(_React$useState3,2),newProduct=_React$useState4[0],setNewProduct=_React$useState4[1];function sendNotification(){var componentProps={type:\"feedback\",message:\"Product has been Updated!\",variant:\"contained\",color:\"success\"};var options={type:\"info\",position:toast.POSITION.TOP_RIGHT,progressClassName:classes.progress,className:classes.notification,timeOut:1000};return toast(/*#__PURE__*/React.createElement(Notification,Object.assign({},componentProps,{className:classes.notificationComponent})),options);}useEffect(function(){getProductsRequest(context.setProducts);getProductsImages(context.setProducts);},[]);// eslint-disable-line\nuseEffect(function(){setLocalProducts(context.products.products[getId(id)]);},[context]);// eslint-disable-line\nvar history=useHistory();var editProduct=function editProduct(e){setLocalProducts(_objectSpread(_objectSpread({},localProducts),{},_defineProperty({},e.target.id,e.currentTarget.value)));};var editNewProduct=function editNewProduct(e){setNewProduct(_objectSpread(_objectSpread({},newProduct),{},_defineProperty({},e.target.id,e.currentTarget.value)));};var getEditProduct=function getEditProduct(){updateProduct(localProducts,context.setProducts);sendNotification();};var createNewProduct=function createNewProduct(){createProduct(newProduct,context.setProducts);history.push(\"/app/ecommerce/management\");};var changeImgSrc=function changeImgSrc(e){if(isCreateProduct){setNewProduct(_objectSpread(_objectSpread({},localProducts),{},{img:e.target.value}));}else{setLocalProducts(_objectSpread(_objectSpread({},localProducts),{},{img:e.target.value}));}};var isCreateProduct=window.location.hash===\"#/app/ecommerce/management/create\";return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(ToastContainer,{className:classes.toastsContainer,closeButton:/*#__PURE__*/React.createElement(CloseButton,{className:classes.notificationCloseButton}),closeOnClick:false,progressClassName:classes.notificationProgress}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Widget,{title:isCreateProduct?\"New product\":\"Edit product\",disableWidgetMenu:true},config.isBackend&&!context.products.isLoaded?/*#__PURE__*/React.createElement(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},/*#__PURE__*/React.createElement(CircularProgress,{size:26})):/*#__PURE__*/React.createElement(Box,{display:\"flex\",flexDirection:\"column\"},/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Box,{width:300},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},\"Image\")),/*#__PURE__*/React.createElement(Box,{width:200},/*#__PURE__*/React.createElement(Select,{value:isCreateProduct?newProduct.img:localProducts.img,fullWidth:true,onChange:function onChange(e){return changeImgSrc(e);}},context.products.images.map(function(c,i){return/*#__PURE__*/React.createElement(MenuItem,{value:c,key:c},/*#__PURE__*/React.createElement(\"img\",{src:c,style:{height:100,width:200},alt:\"ecommerce product\"}));})))),/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Box,{width:300},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},\"Title\")),/*#__PURE__*/React.createElement(Box,{width:500},/*#__PURE__*/React.createElement(Input,{id:\"title\",margin:\"normal\",variant:\"outlined\",value:isCreateProduct?newProduct.title:localProducts.title,fullWidth:true,onChange:function onChange(e){return isCreateProduct?editNewProduct(e):editProduct(e);}}))),/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Box,{width:300},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},\"Subtitle\")),/*#__PURE__*/React.createElement(Box,{width:500},/*#__PURE__*/React.createElement(Input,{id:\"subtitle\",margin:\"normal\",variant:\"outlined\",value:isCreateProduct?newProduct.subtitle:localProducts.subtitle,fullWidth:true,onChange:function onChange(e){return isCreateProduct?editNewProduct(e):editProduct(e);}}))),/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Box,{width:300},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},\"Price\")),/*#__PURE__*/React.createElement(Box,{width:500},/*#__PURE__*/React.createElement(Input,{id:\"price\",margin:\"normal\",variant:\"outlined\",value:isCreateProduct?newProduct.price:localProducts.price,type:\"number\",fullWidth:true,onChange:function onChange(e){return isCreateProduct?editNewProduct(e):editProduct(e);}}))),/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Box,{width:300},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},\"Discount\")),/*#__PURE__*/React.createElement(Box,{width:500},/*#__PURE__*/React.createElement(Input,{id:\"discount\",margin:\"normal\",variant:\"outlined\",value:isCreateProduct?newProduct.discount:localProducts.discount,type:\"number\",fullWidth:true,onChange:function onChange(e){return isCreateProduct?editNewProduct(e):editProduct(e);}}))),/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Box,{width:300},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},\"Description 1\")),/*#__PURE__*/React.createElement(Box,{width:500},/*#__PURE__*/React.createElement(Input,{id:\"description_1\",margin:\"normal\",variant:\"outlined\",multiline:true,value:isCreateProduct?newProduct[\"description_1\"]:localProducts[\"description_1\"],fullWidth:true,onChange:function onChange(e){return isCreateProduct?editNewProduct(e):editProduct(e);}}))),/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Box,{width:300},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},\"Description 2\")),/*#__PURE__*/React.createElement(Box,{width:500},/*#__PURE__*/React.createElement(Input,{id:\"description_2\",margin:\"normal\",variant:\"outlined\",multiline:true,value:isCreateProduct?newProduct[\"description_2\"]:localProducts[\"description_2\"],fullWidth:true,onChange:function onChange(e){return isCreateProduct?editNewProduct(e):editProduct(e);}}))),/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Box,{width:300},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},\"Code\")),/*#__PURE__*/React.createElement(Box,{width:500},/*#__PURE__*/React.createElement(Input,{id:\"code\",margin:\"normal\",variant:\"outlined\",value:isCreateProduct?newProduct.code:localProducts.code,fullWidth:true,onChange:function onChange(e){return isCreateProduct?editNewProduct(e):editProduct(e);}}))),/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Box,{width:300},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},\"Hashtag\")),/*#__PURE__*/React.createElement(Box,{width:500},/*#__PURE__*/React.createElement(Input,{id:\"hashtag\",margin:\"normal\",variant:\"outlined\",value:isCreateProduct?newProduct.hashtag:localProducts.hashtag,fullWidth:true,onChange:function onChange(e){return isCreateProduct?editNewProduct(e):editProduct(e);}}))),/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Box,{width:300},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},\"Technology\")),/*#__PURE__*/React.createElement(Box,{width:500},/*#__PURE__*/React.createElement(Input,{id:\"technology\",margin:\"normal\",variant:\"outlined\",placeholder:\"Add Tag\",fullWidth:true,onChange:function onChange(e){return isCreateProduct?editNewProduct(e):editProduct(e);}}))),/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Box,{width:300},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},\"Rating\")),/*#__PURE__*/React.createElement(Box,{width:500},/*#__PURE__*/React.createElement(Input,{id:\"rating\",margin:\"normal\",variant:\"outlined\",type:\"number\",value:isCreateProduct?newProduct.rating:localProducts.rating,fullWidth:true,onChange:function onChange(e){return isCreateProduct?editNewProduct(e):editProduct(e);}}))),/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"success\",style:{marginRight:8},onClick:function onClick(){return isCreateProduct?createNewProduct():getEditProduct();}},isCreateProduct?\"Save\":\"Edit\"),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",onClick:function onClick(){return history.push(\"/app/ecommerce/management\");}},\"Back\")))))));};function CloseButton(_ref){var closeToast=_ref.closeToast,className=_ref.className;return/*#__PURE__*/React.createElement(CloseIcon,{className:className,onClick:closeToast});}export default CreateProduct;","map":{"version":3,"sources":["/home/dekor/eqvium/react_material_test/admin-full/src/pages/ecommerce/CreateProduct.js"],"names":["React","useEffect","Box","CircularProgress","Grid","MenuItem","Select","TextField","Input","useParams","useHistory","useStyles","getProductsRequest","useProductsState","updateProduct","createProduct","getProductsImages","Widget","Typography","Button","config","toast","ToastContainer","Close","CloseIcon","Notification","CreateProduct","classes","id","context","getId","products","findIndex","c","useState","localProducts","setLocalProducts","img","title","subtitle","price","rating","description_1","description_2","code","hashtag","technology","discount","newProduct","setNewProduct","sendNotification","componentProps","type","message","variant","color","options","position","POSITION","TOP_RIGHT","progressClassName","progress","className","notification","timeOut","notificationComponent","setProducts","history","editProduct","e","target","currentTarget","value","editNewProduct","getEditProduct","createNewProduct","push","changeImgSrc","isCreateProduct","window","location","hash","toastsContainer","notificationCloseButton","notificationProgress","isBackend","isLoaded","images","map","i","height","width","marginRight","CloseButton","closeToast"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport {\n  Box,\n  CircularProgress,\n  Grid,\n  MenuItem,\n  Select,\n  TextField as Input\n} from \"@material-ui/core\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport useStyles from \"./styles\";\n\n//context\nimport {\n  getProductsRequest,\n  useProductsState,\n  updateProduct,\n  createProduct,\n  getProductsImages\n} from \"../../context/ProductContext\";\n\n//components\nimport Widget from \"../../components/Widget\";\nimport { Typography, Button } from \"../../components/Wrappers\";\nimport config from \"../../config\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport { Close as CloseIcon } from \"@material-ui/icons\";\nimport Notification from \"../../components/Notification\";\n\nconst CreateProduct = () => {\n  const classes = useStyles();\n  const { id } = useParams();\n  const context = useProductsState();\n\n  const getId = id => {\n    return context.products.products.findIndex(c => {\n      return c.id == id; // eslint-disable-line\n    });\n  };\n\n  const [localProducts, setLocalProducts] = React.useState(\n    context.products.products[getId(id)]\n  );\n\n  const [newProduct, setNewProduct] = React.useState({\n    img:\n      \"https://flatlogic-node-backend.herokuapp.com/assets/products/img1.jpg\",\n    title: null,\n    subtitle: null,\n    price: 0.1,\n    rating: 5,\n    description_1: null,\n    description_2: null,\n    code: null,\n    hashtag: null,\n    technology: [],\n    discount: 0\n  });\n\n  function sendNotification() {\n    const componentProps = {\n      type: \"feedback\",\n      message: \"Product has been Updated!\",\n      variant: \"contained\",\n      color: \"success\"\n    };\n    const options = {\n      type: \"info\",\n      position: toast.POSITION.TOP_RIGHT,\n      progressClassName: classes.progress,\n      className: classes.notification,\n      timeOut: 1000\n    };\n    return toast(\n      <Notification\n        {...componentProps}\n        className={classes.notificationComponent}\n      />,\n      options\n    );\n  }\n\n  useEffect(() => {\n    getProductsRequest(context.setProducts);\n    getProductsImages(context.setProducts);\n  }, []); // eslint-disable-line\n\n  useEffect(() => {\n    setLocalProducts(context.products.products[getId(id)]);\n  }, [context]); // eslint-disable-line\n\n  const history = useHistory();\n\n  const editProduct = e => {\n    setLocalProducts({\n      ...localProducts,\n      [e.target.id]: e.currentTarget.value\n    });\n  };\n\n  const editNewProduct = e => {\n    setNewProduct({\n      ...newProduct,\n      [e.target.id]: e.currentTarget.value\n    });\n  };\n\n  const getEditProduct = () => {\n    updateProduct(localProducts, context.setProducts);\n    sendNotification();\n  };\n\n  const createNewProduct = () => {\n    createProduct(newProduct, context.setProducts);\n    history.push(\"/app/ecommerce/management\");\n  };\n\n  const changeImgSrc = e => {\n    if (isCreateProduct) {\n      setNewProduct({ ...localProducts, img: e.target.value });\n    } else {\n      setLocalProducts({ ...localProducts, img: e.target.value });\n    }\n  };\n\n\n  const isCreateProduct =\n    window.location.hash === \"#/app/ecommerce/management/create\";\n\n  return (\n    <>\n      <Grid container spacing={3}>\n        <ToastContainer\n          className={classes.toastsContainer}\n          closeButton={\n            <CloseButton className={classes.notificationCloseButton} />\n          }\n          closeOnClick={false}\n          progressClassName={classes.notificationProgress}\n        />\n        <Grid item xs={12}>\n          <Widget\n            title={isCreateProduct ? \"New product\" : \"Edit product\"}\n            disableWidgetMenu\n          >\n            {config.isBackend && !context.products.isLoaded ? (\n              <Box\n                display={\"flex\"}\n                justifyContent={\"center\"}\n                alignItems={\"center\"}\n              >\n                <CircularProgress size={26} />\n              </Box>\n            ) : (\n              <Box display={\"flex\"} flexDirection=\"column\">\n                <Box display={\"flex\"} alignItems={\"center\"}>\n                  <Box width={300}>\n                    <Typography variant={\"h6\"}>Image</Typography>\n                  </Box>\n                  <Box width={200}>\n                    <Select\n                      value={\n                        isCreateProduct ? newProduct.img : localProducts.img\n                      }\n                      fullWidth\n                      onChange={e => changeImgSrc(e)}\n                    >\n                      {context.products.images.map((c, i) => (\n                        <MenuItem value={c} key={c}>\n                          <img src={c} style={{ height: 100, width: 200 }} alt={\"ecommerce product\"}/>\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  </Box>\n                </Box>\n                <Box display={\"flex\"} alignItems={\"center\"}>\n                  <Box width={300}>\n                    <Typography variant={\"h6\"}>Title</Typography>\n                  </Box>\n                  <Box width={500}>\n                    <Input\n                      id=\"title\"\n                      margin=\"normal\"\n                      variant=\"outlined\"\n                      value={\n                        isCreateProduct ? newProduct.title : localProducts.title\n                      }\n                      fullWidth\n                      onChange={e =>\n                        isCreateProduct ? editNewProduct(e) : editProduct(e)\n                      }\n                    />\n                  </Box>\n                </Box>\n                <Box display={\"flex\"} alignItems={\"center\"}>\n                  <Box width={300}>\n                    <Typography variant={\"h6\"}>Subtitle</Typography>\n                  </Box>\n                  <Box width={500}>\n                    <Input\n                      id=\"subtitle\"\n                      margin=\"normal\"\n                      variant=\"outlined\"\n                      value={\n                        isCreateProduct\n                          ? newProduct.subtitle\n                          : localProducts.subtitle\n                      }\n                      fullWidth\n                      onChange={e =>\n                        isCreateProduct ? editNewProduct(e) : editProduct(e)\n                      }\n                    />\n                  </Box>\n                </Box>\n                <Box display={\"flex\"} alignItems={\"center\"}>\n                  <Box width={300}>\n                    <Typography variant={\"h6\"}>Price</Typography>\n                  </Box>\n                  <Box width={500}>\n                    <Input\n                      id=\"price\"\n                      margin=\"normal\"\n                      variant=\"outlined\"\n                      value={\n                        isCreateProduct ? newProduct.price : localProducts.price\n                      }\n                      type={\"number\"}\n                      fullWidth\n                      onChange={e =>\n                        isCreateProduct ? editNewProduct(e) : editProduct(e)\n                      }\n                    />\n                  </Box>\n                </Box>\n                <Box display={\"flex\"} alignItems={\"center\"}>\n                  <Box width={300}>\n                    <Typography variant={\"h6\"}>Discount</Typography>\n                  </Box>\n                  <Box width={500}>\n                    <Input\n                      id=\"discount\"\n                      margin=\"normal\"\n                      variant=\"outlined\"\n                      value={\n                        isCreateProduct\n                          ? newProduct.discount\n                          : localProducts.discount\n                      }\n                      type={\"number\"}\n                      fullWidth\n                      onChange={e =>\n                        isCreateProduct ? editNewProduct(e) : editProduct(e)\n                      }\n                    />\n                  </Box>\n                </Box>\n                <Box display={\"flex\"} alignItems={\"center\"}>\n                  <Box width={300}>\n                    <Typography variant={\"h6\"}>Description 1</Typography>\n                  </Box>\n                  <Box width={500}>\n                    <Input\n                      id=\"description_1\"\n                      margin=\"normal\"\n                      variant=\"outlined\"\n                      multiline\n                      value={\n                        isCreateProduct\n                          ? newProduct[\"description_1\"]\n                          : localProducts[\"description_1\"]\n                      }\n                      fullWidth\n                      onChange={e =>\n                        isCreateProduct ? editNewProduct(e) : editProduct(e)\n                      }\n                    />\n                  </Box>\n                </Box>\n                <Box display={\"flex\"} alignItems={\"center\"}>\n                  <Box width={300}>\n                    <Typography variant={\"h6\"}>Description 2</Typography>\n                  </Box>\n                  <Box width={500}>\n                    <Input\n                      id=\"description_2\"\n                      margin=\"normal\"\n                      variant=\"outlined\"\n                      multiline\n                      value={\n                        isCreateProduct\n                          ? newProduct[\"description_2\"]\n                          : localProducts[\"description_2\"]\n                      }\n                      fullWidth\n                      onChange={e =>\n                        isCreateProduct ? editNewProduct(e) : editProduct(e)\n                      }\n                    />\n                  </Box>\n                </Box>\n                <Box display={\"flex\"} alignItems={\"center\"}>\n                  <Box width={300}>\n                    <Typography variant={\"h6\"}>Code</Typography>\n                  </Box>\n                  <Box width={500}>\n                    <Input\n                      id=\"code\"\n                      margin=\"normal\"\n                      variant=\"outlined\"\n                      value={\n                        isCreateProduct ? newProduct.code : localProducts.code\n                      }\n                      fullWidth\n                      onChange={e =>\n                        isCreateProduct ? editNewProduct(e) : editProduct(e)\n                      }\n                    />\n                  </Box>\n                </Box>\n                <Box display={\"flex\"} alignItems={\"center\"}>\n                  <Box width={300}>\n                    <Typography variant={\"h6\"}>Hashtag</Typography>\n                  </Box>\n                  <Box width={500}>\n                    <Input\n                      id=\"hashtag\"\n                      margin=\"normal\"\n                      variant=\"outlined\"\n                      value={\n                        isCreateProduct\n                          ? newProduct.hashtag\n                          : localProducts.hashtag\n                      }\n                      fullWidth\n                      onChange={e =>\n                        isCreateProduct ? editNewProduct(e) : editProduct(e)\n                      }\n                    />\n                  </Box>\n                </Box>\n                <Box display={\"flex\"} alignItems={\"center\"}>\n                  <Box width={300}>\n                    <Typography variant={\"h6\"}>Technology</Typography>\n                  </Box>\n                  <Box width={500}>\n                    <Input\n                      id=\"technology\"\n                      margin=\"normal\"\n                      variant=\"outlined\"\n                      placeholder={\"Add Tag\"}\n                      fullWidth\n                      onChange={e =>\n                        isCreateProduct ? editNewProduct(e) : editProduct(e)\n                      }\n                    />\n                  </Box>\n                </Box>\n                <Box display={\"flex\"} alignItems={\"center\"}>\n                  <Box width={300}>\n                    <Typography variant={\"h6\"}>Rating</Typography>\n                  </Box>\n                  <Box width={500}>\n                    <Input\n                      id=\"rating\"\n                      margin=\"normal\"\n                      variant=\"outlined\"\n                      type={\"number\"}\n                      value={\n                        isCreateProduct\n                          ? newProduct.rating\n                          : localProducts.rating\n                      }\n                      fullWidth\n                      onChange={e =>\n                        isCreateProduct ? editNewProduct(e) : editProduct(e)\n                      }\n                    />\n                  </Box>\n                </Box>\n                <Box display={\"flex\"} alignItems={\"center\"}>\n                  <Button\n                    variant={\"contained\"}\n                    color={\"success\"}\n                    style={{ marginRight: 8 }}\n                    onClick={() =>\n                      isCreateProduct ? createNewProduct() : getEditProduct()\n                    }\n                  >\n                    {isCreateProduct ? \"Save\" : \"Edit\"}\n                  </Button>\n                  <Button\n                    variant={\"contained\"}\n                    onClick={() => history.push(\"/app/ecommerce/management\")}\n                  >\n                    Back\n                  </Button>\n                </Box>\n              </Box>\n            )}\n          </Widget>\n        </Grid>\n      </Grid>\n    </>\n  );\n};\n\nfunction CloseButton({ closeToast, className }) {\n  return <CloseIcon className={className} onClick={closeToast} />;\n}\n\nexport default CreateProduct;\n"]},"metadata":{},"sourceType":"module"}