{"ast":null,"code":"import _slicedToArray from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useEffect}from\"react\";import{Grid,Table,TableBody,TableCell,TablePagination,TableRow,TableHead,IconButton,Checkbox,TableSortLabel,Tooltip,Toolbar,CircularProgress,Box,InputAdornment,TextField as Input}from\"@material-ui/core\";import{Link as RouterLink,withRouter,useHistory}from\"react-router-dom\";import{toast}from\"react-toastify\";//config\nimport config from\"../../config\";// Material UI icons\nimport{Star as StarIcon,Delete as DeleteIcon,FilterList as FilterListIcon,Close as CloseIcon,Search as SearchIcon}from\"@material-ui/icons\";import{yellow}from\"@material-ui/core/colors\";import{lighten,makeStyles}from\"@material-ui/core/styles\";import useStyles from\"./styles\";import cn from\"classnames\";//context\nimport{ProductsProvider,useProductsState,getProductsRequest,deleteProductRequest}from\"../../context/ProductContext\";// components\nimport Widget from\"../../components/Widget\";import{Typography,Button,Link}from\"../../components/Wrappers\";import Notification from\"../../components/Notification\";function desc(a,b,orderBy){if(b[orderBy]<a[orderBy]){return-1;}if(b[orderBy]>a[orderBy]){return 1;}return 0;}function stableSort(array,cmp){var stabilizedThis=array.map(function(el,index){return[el,index];});stabilizedThis.sort(function(a,b){var order=cmp(a[0],b[0]);if(order!==0)return order;return a[1]-b[1];});return stabilizedThis.map(function(el){return el[0];});}function getSorting(order,orderBy){return order===\"desc\"?function(a,b){return desc(a,b,orderBy);}:function(a,b){return-desc(a,b,orderBy);};}var headCells=[{id:\"id\",numeric:true,disablePadding:true,label:\"ID\"},{id:\"image\",numeric:true,disablePadding:false,label:\"Image\"},{id:\"title\",numeric:true,disablePadding:false,label:\"Title\"},{id:\"subtitle\",numeric:true,disablePadding:false,label:\"Subtitle\"},{id:\"price\",numeric:true,disablePadding:false,label:\"Price\"},{id:\"rating\",numeric:true,disablePadding:false,label:\"Rating\"},{id:\"actions\",numeric:true,disablePadding:false,label:\"Actions\"}];function EnhancedTableHead(props){var classes=props.classes,onSelectAllClick=props.onSelectAllClick,order=props.order,orderBy=props.orderBy,numSelected=props.numSelected,rowCount=props.rowCount,onRequestSort=props.onRequestSort;var createSortHandler=function createSortHandler(property){return function(event){onRequestSort(event,property);};};return/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{padding:\"checkbox\"},/*#__PURE__*/React.createElement(Checkbox,{indeterminate:numSelected>0&&numSelected<rowCount,checked:numSelected===rowCount,onChange:onSelectAllClick,inputProps:{\"aria-label\":\"select all rows\"}})),headCells.map(function(headCell){return/*#__PURE__*/React.createElement(TableCell,{key:headCell.id,align:headCell.numeric?\"left\":\"right\",padding:headCell.disablePadding?\"none\":\"default\",sortDirection:orderBy===headCell.id?order:false},/*#__PURE__*/React.createElement(TableSortLabel,{active:orderBy===headCell.id,direction:order,onClick:createSortHandler(headCell.id)},headCell.label,orderBy===headCell.id?/*#__PURE__*/React.createElement(\"span\",{className:classes.visuallyHidden},order===\"desc\"?\"sorted descending\":\"sorted ascending\"):null));})));}var useToolbarStyles=makeStyles(function(theme){return{root:{paddingLeft:theme.spacing(2),paddingRight:theme.spacing(1)},highlight:theme.palette.type===\"light\"?{color:theme.palette.secondary.main,backgroundColor:lighten(theme.palette.secondary.light,0.85)}:{color:theme.palette.text.primary,backgroundColor:theme.palette.secondary.dark},title:{flex:\"1 1 100%\"}};});var EnhancedTableToolbar=function EnhancedTableToolbar(_ref){var numSelected=_ref.numSelected,selected=_ref.selected,deleteProducts=_ref.deleteProducts;var history=useHistory();var classes=useToolbarStyles();return/*#__PURE__*/React.createElement(Toolbar,{className:cn(classes.root,_defineProperty({},classes.highlight,numSelected>0)),style:{marginTop:8}},numSelected>0?/*#__PURE__*/React.createElement(Typography,{className:classes.title,color:\"inherit\",variant:\"subtitle1\"},numSelected,\" selected\"):/*#__PURE__*/React.createElement(Typography,{className:classes.title,variant:\"h6\",id:\"tableTitle\"},\"Products\"),numSelected>0?/*#__PURE__*/React.createElement(Tooltip,{title:\"Delete\"},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"delete\"},/*#__PURE__*/React.createElement(DeleteIcon,{onClick:function onClick(e){return deleteProducts(selected,history,e);}}))):/*#__PURE__*/React.createElement(Tooltip,{title:\"Filter list\"},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"filter list\"},/*#__PURE__*/React.createElement(FilterListIcon,null))));};function EcommercePage(_ref2){var history=_ref2.history;var classes=useStyles();var context=useProductsState();var _React$useState=React.useState(\"asc\"),_React$useState2=_slicedToArray(_React$useState,2),order=_React$useState2[0],setOrder=_React$useState2[1];var _React$useState3=React.useState(\"price\"),_React$useState4=_slicedToArray(_React$useState3,2),orderBy=_React$useState4[0],setOrderBy=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),selected=_React$useState6[0],setSelected=_React$useState6[1];var _React$useState7=React.useState(0),_React$useState8=_slicedToArray(_React$useState7,2),page=_React$useState8[0],setPage=_React$useState8[1];var _React$useState9=React.useState(5),_React$useState10=_slicedToArray(_React$useState9,2),rowsPerPage=_React$useState10[0],setRowsPerPage=_React$useState10[1];var _React$useState11=React.useState(context.products.products),_React$useState12=_slicedToArray(_React$useState11,2),backProducts=_React$useState12[0],setBackProducts=_React$useState12[1];useEffect(function(){sendNotification();getProductsRequest(context.setProducts);},[]);// eslint-disable-line\nuseEffect(function(){setBackProducts(context.products.products);},[context]);var handleRequestSort=function handleRequestSort(event,property){var isDesc=orderBy===property&&order===\"desc\";setOrder(isDesc?\"asc\":\"desc\");setOrderBy(property);};var searchProducts=function searchProducts(e){var products=[];context.products.products.forEach(function(c){if(c.title.includes(e.currentTarget.value)){products.push(c);}return;});setBackProducts(products);};var openProduct=function openProduct(id,event){history.push(\"/app/ecommerce/product/\"+id);event.stopPropagation();};var handleSelectAllClick=function handleSelectAllClick(event){if(event.target.checked){var newSelecteds=backProducts.map(function(n){return n.id;});setSelected(newSelecteds);return;}setSelected([]);};var handleClick=function handleClick(event,name){var selectedIndex=selected.indexOf(name);var newSelected=[];if(selectedIndex===-1){newSelected=newSelected.concat(selected,name);}else if(selectedIndex===0){newSelected=newSelected.concat(selected.slice(1));}else if(selectedIndex===selected.length-1){newSelected=newSelected.concat(selected.slice(0,-1));}else if(selectedIndex>0){newSelected=newSelected.concat(selected.slice(0,selectedIndex),selected.slice(selectedIndex+1));}setSelected(newSelected);};var handleChangePage=function handleChangePage(event,newPage){setPage(newPage);};var handleChangeRowsPerPage=function handleChangeRowsPerPage(event){setRowsPerPage(parseInt(event.target.value,10));setPage(0);};var isSelected=function isSelected(name){return selected.indexOf(name)!==-1;};var emptyRows=rowsPerPage-Math.min(rowsPerPage,backProducts.length-page*rowsPerPage);function sendNotification(){var componentProps={type:\"feedback\",message:\"This page is only available in React Material Admin Full with Node.js integration!\",variant:\"contained\",color:\"success\"};var options={type:\"info\",position:toast.POSITION.TOP_RIGHT,progressClassName:classes.progress,className:classes.notification,timeOut:1000};return toast(/*#__PURE__*/React.createElement(Notification,Object.assign({},componentProps,{className:classes.notificationComponent})),options);}var deleteProduct=function deleteProduct(id,history,event){deleteProductRequest({id:id,history:history,dispatch:context.setProducts});event.stopPropagation();};var openProductEdit=function openProductEdit(event,id){history.push(\"/app/ecommerce/management/edit/\"+id);event.stopPropagation();};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Widget,{disableWidgetMenu:true,header:/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",width:\"100%\"},/*#__PURE__*/React.createElement(Box,{display:\"flex\",style:{width:\"calc(100% - 20px)\"}},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\",color:\"text\",colorBrightness:\"secondary\",noWrap:true},\"Products\"),/*#__PURE__*/React.createElement(Box,{alignSelf:\"flex-end\",ml:1},/*#__PURE__*/React.createElement(Typography,{color:\"text\",colorBrightness:\"hint\",variant:\"caption\"},backProducts.length,\" total\"))),/*#__PURE__*/React.createElement(Input,{id:\"search-field\",className:classes.textField,label:\"Search\",margin:\"dense\",variant:\"outlined\",InputProps:{startAdornment:/*#__PURE__*/React.createElement(InputAdornment,{position:\"start\"},/*#__PURE__*/React.createElement(SearchIcon,{className:classes.searchIcon}))},onChange:function onChange(e){return searchProducts(e);}}))},config.isBackend?/*#__PURE__*/React.createElement(Button,{variant:\"contained\",component:RouterLink,to:\"/app/ecommerce/management/create\",color:\"success\"},\"Create Product\"):/*#__PURE__*/React.createElement(Button,{variant:\"contained\",component:RouterLink,to:\"#\",color:\"success\"},\"Create Product\"),/*#__PURE__*/React.createElement(EnhancedTableToolbar,{numSelected:selected.length,selected:selected,deleteProducts:deleteProduct}),config.isBackend&&!context.products.isLoaded?/*#__PURE__*/React.createElement(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},/*#__PURE__*/React.createElement(CircularProgress,{size:26})):/*#__PURE__*/React.createElement(\"div\",{className:classes.tableWrapper},/*#__PURE__*/React.createElement(Table,{className:classes.table,\"aria-labelledby\":\"tableTitle\",\"aria-label\":\"enhanced table\"},/*#__PURE__*/React.createElement(EnhancedTableHead,{classes:classes,numSelected:selected.length,order:order,orderBy:orderBy,onSelectAllClick:handleSelectAllClick,onRequestSort:handleRequestSort,rowCount:backProducts.length}),/*#__PURE__*/React.createElement(ProductsProvider,null,/*#__PURE__*/React.createElement(TableBody,null,stableSort(backProducts,getSorting(order,orderBy)).slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage).map(function(row,index){var isItemSelected=isSelected(row.id);var labelId=\"enhanced-table-checkbox-\".concat(index);return/*#__PURE__*/React.createElement(TableRow,{hover:true,onClick:function onClick(event){return handleClick(event,row.id);},role:\"checkbox\",\"aria-checked\":isItemSelected,selected:isItemSelected,key:row.id},/*#__PURE__*/React.createElement(TableCell,{padding:\"checkbox\"},/*#__PURE__*/React.createElement(Checkbox,{checked:isItemSelected,inputProps:{\"aria-labelledby\":labelId}})),/*#__PURE__*/React.createElement(TableCell,{component:\"th\",id:labelId,scope:\"row\",padding:\"none\"},row.id),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(\"img\",{src:row.img,alt:row.title,style:{width:100}})),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(Link,{component:\"button\",variant:\"body2\",onClick:function onClick(e){return openProduct(row.id,e);},color:\"primary\"},row.title?row.title.split(\"\").map(function(c,n){return n===0?c.toUpperCase():c;}):null)),/*#__PURE__*/React.createElement(TableCell,null,row.subtitle),/*#__PURE__*/React.createElement(TableCell,null,\"$\",row.price),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Typography,{style:{color:yellow[700]},display:\"inline\"},row.rating),\" \",/*#__PURE__*/React.createElement(StarIcon,{style:{color:yellow[700],marginTop:-5}}))),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},config.isBackend?/*#__PURE__*/React.createElement(Button,{color:\"success\",size:\"small\",style:{marginRight:8},variant:\"contained\",onClick:function onClick(e){return openProductEdit(e,row.id);}},\"Edit\"):/*#__PURE__*/React.createElement(Button,{color:\"success\",size:\"small\",style:{marginRight:8},variant:\"contained\",onClick:function onClick(e){return e.stopPropagation();}},\"Edit\"),/*#__PURE__*/React.createElement(Button,{color:\"secondary\",size:\"small\",variant:\"contained\",onClick:function onClick(e){return deleteProduct(row.id,history,e);}},\"Delete\"))));}),emptyRows>0&&/*#__PURE__*/React.createElement(TableRow,{style:{height:53*emptyRows}},/*#__PURE__*/React.createElement(TableCell,{colSpan:6})))))),/*#__PURE__*/React.createElement(TablePagination,{rowsPerPageOptions:[5,10,25],component:\"div\",count:backProducts.length,rowsPerPage:rowsPerPage,page:page,backIconButtonProps:{\"aria-label\":\"previous page\"},nextIconButtonProps:{\"aria-label\":\"next page\"},onChangePage:handleChangePage,onChangeRowsPerPage:handleChangeRowsPerPage})))));}function CloseButton(_ref3){var closeToast=_ref3.closeToast,className=_ref3.className;return/*#__PURE__*/React.createElement(CloseIcon,{className:className,onClick:closeToast});}export default withRouter(EcommercePage);","map":{"version":3,"sources":["/home/dekor/eqvium/react_material_test/admin-full/src/pages/ecommerce/Ecommerce.js"],"names":["React","useEffect","Grid","Table","TableBody","TableCell","TablePagination","TableRow","TableHead","IconButton","Checkbox","TableSortLabel","Tooltip","Toolbar","CircularProgress","Box","InputAdornment","TextField","Input","Link","RouterLink","withRouter","useHistory","toast","config","Star","StarIcon","Delete","DeleteIcon","FilterList","FilterListIcon","Close","CloseIcon","Search","SearchIcon","yellow","lighten","makeStyles","useStyles","cn","ProductsProvider","useProductsState","getProductsRequest","deleteProductRequest","Widget","Typography","Button","Notification","desc","a","b","orderBy","stableSort","array","cmp","stabilizedThis","map","el","index","sort","order","getSorting","headCells","id","numeric","disablePadding","label","EnhancedTableHead","props","classes","onSelectAllClick","numSelected","rowCount","onRequestSort","createSortHandler","property","event","headCell","visuallyHidden","useToolbarStyles","theme","root","paddingLeft","spacing","paddingRight","highlight","palette","type","color","secondary","main","backgroundColor","light","text","primary","dark","title","flex","EnhancedTableToolbar","selected","deleteProducts","history","marginTop","e","EcommercePage","context","useState","setOrder","setOrderBy","setSelected","page","setPage","rowsPerPage","setRowsPerPage","products","backProducts","setBackProducts","sendNotification","setProducts","handleRequestSort","isDesc","searchProducts","forEach","c","includes","currentTarget","value","push","openProduct","stopPropagation","handleSelectAllClick","target","checked","newSelecteds","n","handleClick","name","selectedIndex","indexOf","newSelected","concat","slice","length","handleChangePage","newPage","handleChangeRowsPerPage","parseInt","isSelected","emptyRows","Math","min","componentProps","message","variant","options","position","POSITION","TOP_RIGHT","progressClassName","progress","className","notification","timeOut","notificationComponent","deleteProduct","dispatch","openProductEdit","width","textField","startAdornment","searchIcon","isBackend","isLoaded","tableWrapper","table","row","isItemSelected","labelId","img","split","toUpperCase","subtitle","price","rating","marginRight","height","CloseButton","closeToast"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport {\n  Grid,\n  Table,\n  TableBody,\n  TableCell,\n  TablePagination,\n  TableRow,\n  TableHead,\n  IconButton,\n  Checkbox,\n  TableSortLabel,\n  Tooltip,\n  Toolbar,\n  CircularProgress,\n  Box,\n  InputAdornment,\n  TextField as Input\n} from \"@material-ui/core\";\nimport { Link as RouterLink, withRouter, useHistory } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\n\n//config\nimport config from \"../../config\";\n\n// Material UI icons\nimport {\n  Star as StarIcon,\n  Delete as DeleteIcon,\n  FilterList as FilterListIcon,\n  Close as CloseIcon,\n  Search as SearchIcon\n} from \"@material-ui/icons\";\nimport { yellow } from \"@material-ui/core/colors\";\nimport { lighten, makeStyles } from \"@material-ui/core/styles\";\nimport PropTypes from \"prop-types\";\nimport useStyles from \"./styles\";\nimport cn from \"classnames\";\n\n//context\nimport {\n  ProductsProvider,\n  useProductsState,\n  getProductsRequest,\n  deleteProductRequest\n} from \"../../context/ProductContext\";\n\n// components\nimport Widget from \"../../components/Widget\";\nimport { Typography, Button, Link } from \"../../components/Wrappers\";\nimport Notification from \"../../components/Notification\";\n\nfunction desc(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n}\n\nfunction stableSort(array, cmp) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = cmp(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map(el => el[0]);\n}\n\nfunction getSorting(order, orderBy) {\n  return order === \"desc\"\n    ? (a, b) => desc(a, b, orderBy)\n    : (a, b) => -desc(a, b, orderBy);\n}\n\nconst headCells = [\n  {\n    id: \"id\",\n    numeric: true,\n    disablePadding: true,\n    label: \"ID\"\n  },\n  { id: \"image\", numeric: true, disablePadding: false, label: \"Image\" },\n  { id: \"title\", numeric: true, disablePadding: false, label: \"Title\" },\n  { id: \"subtitle\", numeric: true, disablePadding: false, label: \"Subtitle\" },\n  { id: \"price\", numeric: true, disablePadding: false, label: \"Price\" },\n  { id: \"rating\", numeric: true, disablePadding: false, label: \"Rating\" },\n  { id: \"actions\", numeric: true, disablePadding: false, label: \"Actions\" }\n];\n\nfunction EnhancedTableHead(props) {\n  const {\n    classes,\n    onSelectAllClick,\n    order,\n    orderBy,\n    numSelected,\n    rowCount,\n    onRequestSort\n  } = props;\n  const createSortHandler = property => event => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        <TableCell padding=\"checkbox\">\n          <Checkbox\n            indeterminate={numSelected > 0 && numSelected < rowCount}\n            checked={numSelected === rowCount}\n            onChange={onSelectAllClick}\n            inputProps={{ \"aria-label\": \"select all rows\" }}\n          />\n        </TableCell>\n        {headCells.map(headCell => (\n          <TableCell\n            key={headCell.id}\n            align={headCell.numeric ? \"left\" : \"right\"}\n            padding={headCell.disablePadding ? \"none\" : \"default\"}\n            sortDirection={orderBy === headCell.id ? order : false}\n          >\n            <TableSortLabel\n              active={orderBy === headCell.id}\n              direction={order}\n              onClick={createSortHandler(headCell.id)}\n            >\n              {headCell.label}\n              {orderBy === headCell.id ? (\n                <span className={classes.visuallyHidden}>\n                  {order === \"desc\" ? \"sorted descending\" : \"sorted ascending\"}\n                </span>\n              ) : null}\n            </TableSortLabel>\n          </TableCell>\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nEnhancedTableHead.propTypes = {\n  classes: PropTypes.object.isRequired,\n  numSelected: PropTypes.number.isRequired,\n  onRequestSort: PropTypes.func.isRequired,\n  onSelectAllClick: PropTypes.func.isRequired,\n  order: PropTypes.oneOf([\"asc\", \"desc\"]).isRequired,\n  orderBy: PropTypes.string.isRequired,\n  rowCount: PropTypes.number.isRequired\n};\n\nconst useToolbarStyles = makeStyles(theme => ({\n  root: {\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(1)\n  },\n  highlight:\n    theme.palette.type === \"light\"\n      ? {\n          color: theme.palette.secondary.main,\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85)\n        }\n      : {\n          color: theme.palette.text.primary,\n          backgroundColor: theme.palette.secondary.dark\n        },\n  title: {\n    flex: \"1 1 100%\"\n  }\n}));\n\nconst EnhancedTableToolbar = ({ numSelected, selected, deleteProducts }) => {\n  const history = useHistory();\n  const classes = useToolbarStyles();\n\n  return (\n    <Toolbar\n      className={cn(classes.root, {\n        [classes.highlight]: numSelected > 0\n      })}\n      style={{ marginTop: 8 }}\n    >\n      {numSelected > 0 ? (\n        <Typography\n          className={classes.title}\n          color=\"inherit\"\n          variant=\"subtitle1\"\n        >\n          {numSelected} selected\n        </Typography>\n      ) : (\n        <Typography className={classes.title} variant=\"h6\" id=\"tableTitle\">\n          Products\n        </Typography>\n      )}\n\n      {numSelected > 0 ? (\n        <Tooltip title=\"Delete\">\n          <IconButton aria-label=\"delete\">\n            <DeleteIcon onClick={e => deleteProducts(selected, history, e)} />\n          </IconButton>\n        </Tooltip>\n      ) : (\n        <Tooltip title=\"Filter list\">\n          <IconButton aria-label=\"filter list\">\n            <FilterListIcon />\n          </IconButton>\n        </Tooltip>\n      )}\n    </Toolbar>\n  );\n};\n\nEnhancedTableToolbar.propTypes = {\n  numSelected: PropTypes.number.isRequired\n};\n\nfunction EcommercePage({ history }) {\n  const classes = useStyles();\n  const context = useProductsState();\n  const [order, setOrder] = React.useState(\"asc\");\n  const [orderBy, setOrderBy] = React.useState(\"price\");\n  const [selected, setSelected] = React.useState([]);\n  const [page, setPage] = React.useState(0);\n  const [rowsPerPage, setRowsPerPage] = React.useState(5);\n  const [backProducts, setBackProducts] = React.useState(\n    context.products.products\n  );\n\n  useEffect(() => {\n    sendNotification();\n    getProductsRequest(context.setProducts);\n  }, []); // eslint-disable-line\n\n  useEffect(() => {\n    setBackProducts(context.products.products);\n  }, [context]);\n\n  const handleRequestSort = (event, property) => {\n    const isDesc = orderBy === property && order === \"desc\";\n    setOrder(isDesc ? \"asc\" : \"desc\");\n    setOrderBy(property);\n  };\n\n  const searchProducts = e => {\n    let products = [];\n    context.products.products.forEach(c => {\n      if (c.title.includes(e.currentTarget.value)) {\n        products.push(c);\n      }\n      return;\n    });\n    setBackProducts(products);\n  };\n\n  const openProduct = (id, event) => {\n    history.push(\"/app/ecommerce/product/\" + id);\n    event.stopPropagation();\n  };\n\n  const handleSelectAllClick = event => {\n    if (event.target.checked) {\n      const newSelecteds = backProducts.map(n => n.id);\n      setSelected(newSelecteds);\n      return;\n    }\n    setSelected([]);\n  };\n\n  const handleClick = (event, name) => {\n    const selectedIndex = selected.indexOf(name);\n    let newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, name);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(\n        selected.slice(0, selectedIndex),\n        selected.slice(selectedIndex + 1)\n      );\n    }\n\n    setSelected(newSelected);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const isSelected = name => selected.indexOf(name) !== -1;\n\n  const emptyRows =\n    rowsPerPage -\n    Math.min(rowsPerPage, backProducts.length - page * rowsPerPage);\n\n  function sendNotification() {\n    const componentProps = {\n      type: \"feedback\",\n      message:\n        \"This page is only available in React Material Admin Full with Node.js integration!\",\n      variant: \"contained\",\n      color: \"success\"\n    };\n    const options = {\n      type: \"info\",\n      position: toast.POSITION.TOP_RIGHT,\n      progressClassName: classes.progress,\n      className: classes.notification,\n      timeOut: 1000\n    };\n    return toast(\n      <Notification\n        {...componentProps}\n        className={classes.notificationComponent}\n      />,\n      options\n    );\n  }\n\n  const deleteProduct = (id, history, event) => {\n    deleteProductRequest({ id, history, dispatch: context.setProducts });\n    event.stopPropagation();\n  };\n\n  const openProductEdit = (event, id) => {\n    history.push(\"/app/ecommerce/management/edit/\" + id);\n    event.stopPropagation();\n  };\n\n  return (\n    <>\n      <Grid container spacing={3}>\n        <Grid item xs={12}>\n          <Widget\n            disableWidgetMenu\n            header={\n              <Box\n                display={\"flex\"}\n                alignItems={\"center\"}\n                justifyContent={\"space-between\"}\n                width={\"100%\"}\n              >\n                <Box display={\"flex\"} style={{ width: \"calc(100% - 20px)\" }}>\n                  <Typography\n                    variant=\"h6\"\n                    color=\"text\"\n                    colorBrightness={\"secondary\"}\n                    noWrap\n                  >\n                    Products\n                  </Typography>\n                  <Box alignSelf=\"flex-end\" ml={1}>\n                    <Typography\n                      color=\"text\"\n                      colorBrightness={\"hint\"}\n                      variant={\"caption\"}\n                    >\n                      {backProducts.length} total\n                    </Typography>\n                  </Box>\n                </Box>\n                <Input\n                  id=\"search-field\"\n                  className={classes.textField}\n                  label=\"Search\"\n                  margin=\"dense\"\n                  variant=\"outlined\"\n                  InputProps={{\n                    startAdornment: (\n                      <InputAdornment position=\"start\">\n                        <SearchIcon className={classes.searchIcon} />\n                      </InputAdornment>\n                    )\n                  }}\n                  onChange={e => searchProducts(e)}\n                />\n              </Box>\n            }\n          >\n            { config.isBackend ? (\n              <Button\n                  variant={\"contained\"}\n                  component={RouterLink}\n                  to={\"/app/ecommerce/management/create\"}\n                  color={\"success\"}\n              >\n                Create Product\n              </Button>\n            ) : (\n                <Button\n                    variant={\"contained\"}\n                    component={RouterLink}\n                    to={\"#\"}\n                    color={\"success\"}\n                >\n                  Create Product\n                </Button>\n            )\n            }\n            <EnhancedTableToolbar\n              numSelected={selected.length}\n              selected={selected}\n              deleteProducts={deleteProduct}\n            />\n            {config.isBackend && !context.products.isLoaded ? (\n              <Box\n                display={\"flex\"}\n                justifyContent={\"center\"}\n                alignItems={\"center\"}\n              >\n                <CircularProgress size={26} />\n              </Box>\n            ) : (\n              <div className={classes.tableWrapper}>\n                <Table\n                  className={classes.table}\n                  aria-labelledby=\"tableTitle\"\n                  aria-label=\"enhanced table\"\n                >\n                  <EnhancedTableHead\n                    classes={classes}\n                    numSelected={selected.length}\n                    order={order}\n                    orderBy={orderBy}\n                    onSelectAllClick={handleSelectAllClick}\n                    onRequestSort={handleRequestSort}\n                    rowCount={backProducts.length}\n                  />\n                  <ProductsProvider>\n                    <TableBody>\n                      {stableSort(backProducts, getSorting(order, orderBy))\n                        .slice(\n                          page * rowsPerPage,\n                          page * rowsPerPage + rowsPerPage\n                        )\n                        .map((row, index) => {\n                          const isItemSelected = isSelected(row.id);\n                          const labelId = `enhanced-table-checkbox-${index}`;\n\n                          return (\n                            <TableRow\n                              hover\n                              onClick={event => handleClick(event, row.id)}\n                              role=\"checkbox\"\n                              aria-checked={isItemSelected}\n                              selected={isItemSelected}\n                              key={row.id}\n                            >\n                              <TableCell padding=\"checkbox\">\n                                <Checkbox\n                                  checked={isItemSelected}\n                                  inputProps={{ \"aria-labelledby\": labelId }}\n                                />\n                              </TableCell>\n                              <TableCell\n                                component=\"th\"\n                                id={labelId}\n                                scope=\"row\"\n                                padding=\"none\"\n                              >\n                                {row.id}\n                              </TableCell>\n                              <TableCell>\n                                <img\n                                  src={row.img}\n                                  alt={row.title}\n                                  style={{ width: 100 }}\n                                />\n                              </TableCell>\n                              <TableCell>\n                                <Link\n                                  component={\"button\"}\n                                  variant=\"body2\"\n                                  onClick={e => openProduct(row.id, e)}\n                                  color={\"primary\"}\n                                >\n                                  {row.title\n                                    ? row.title.split(\"\").map((c, n) => {\n                                        return n === 0 ? c.toUpperCase() : c;\n                                      })\n                                    : null}\n                                </Link>\n                              </TableCell>\n                              <TableCell>{row.subtitle}</TableCell>\n                              <TableCell>${row.price}</TableCell>\n                              <TableCell>\n                                <Box display={\"flex\"} alignItems={\"center\"}>\n                                  <Typography\n                                    style={{ color: yellow[700] }}\n                                    display={\"inline\"}\n                                  >\n                                    {row.rating}\n                                  </Typography>{\" \"}\n                                  <StarIcon\n                                    style={{\n                                      color: yellow[700],\n                                      marginTop: -5\n                                    }}\n                                  />\n                                </Box>\n                              </TableCell>\n                              {/*<TableCell>*/}\n                              {/*  <Box display={\"flex\"}>*/}\n                              {/*    <Box mr={1} alignSelf={\"center\"}>*/}\n                              {/*      <Dot color={row.color} size={\"medium\"} />*/}\n                              {/*    </Box>*/}\n                              {/*    <Box mr={1}>*/}\n                              {/*      <Typography variant={\"subtitle2\"}>*/}\n                              {/*        {row.status}*/}\n                              {/*      </Typography>*/}\n                              {/*      <LinearProgress*/}\n                              {/*        variant=\"determinate\"*/}\n                              {/*        value={+row.process.split(\"%\")[0]}*/}\n                              {/*      />*/}\n                              {/*    </Box>*/}\n                              {/*    <Box display={\"flex\"} alignSelf={\"flex-end\"}>*/}\n                              {/*      <Typography*/}\n                              {/*        color={\"text\"}*/}\n                              {/*        colorBrightness={\"hint\"}*/}\n                              {/*      >*/}\n                              {/*        {row.process}*/}\n                              {/*      </Typography>*/}\n                              {/*    </Box>*/}\n                              {/*  </Box>*/}\n                              {/*</TableCell>*/}\n                              <TableCell>\n                                <Box display={\"flex\"} alignItems={\"center\"}>\n                                  { config.isBackend ? (\n                                    <Button\n                                        color=\"success\"\n                                        size=\"small\"\n                                        style={{marginRight: 8}}\n                                        variant=\"contained\"\n                                        onClick={e => openProductEdit(e, row.id)}\n                                    >\n                                      Edit\n                                    </Button>\n                                  ) : (\n                                      <Button\n                                          color=\"success\"\n                                          size=\"small\"\n                                          style={{marginRight: 8}}\n                                          variant=\"contained\"\n                                          onClick={(e) => e.stopPropagation()}\n                                      >\n                                        Edit\n                                      </Button>\n                                  )\n                                  }\n                                  <Button\n                                    color=\"secondary\"\n                                    size=\"small\"\n                                    variant=\"contained\"\n                                    onClick={e =>\n                                      deleteProduct(row.id, history, e)\n                                    }\n                                  >\n                                    Delete\n                                  </Button>\n                                </Box>\n                              </TableCell>\n                            </TableRow>\n                          );\n                        })}\n                      {emptyRows > 0 && (\n                        <TableRow style={{ height: 53 * emptyRows }}>\n                          <TableCell colSpan={6} />\n                        </TableRow>\n                      )}\n                    </TableBody>\n                  </ProductsProvider>\n                </Table>\n              </div>\n            )}\n            <TablePagination\n              rowsPerPageOptions={[5, 10, 25]}\n              component=\"div\"\n              count={backProducts.length}\n              rowsPerPage={rowsPerPage}\n              page={page}\n              backIconButtonProps={{\n                \"aria-label\": \"previous page\"\n              }}\n              nextIconButtonProps={{\n                \"aria-label\": \"next page\"\n              }}\n              onChangePage={handleChangePage}\n              onChangeRowsPerPage={handleChangeRowsPerPage}\n            />\n          </Widget>\n        </Grid>\n      </Grid>\n    </>\n  );\n}\n\nfunction CloseButton({ closeToast, className }) {\n  return <CloseIcon className={className} onClick={closeToast} />;\n}\n\nexport default withRouter(EcommercePage);\n"]},"metadata":{},"sourceType":"module"}