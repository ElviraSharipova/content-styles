{"ast":null,"code":"import _slicedToArray from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Grid,CircularProgress,Tabs,Tab,Fade,TextField as Input}from\"@material-ui/core\";import{withRouter}from\"react-router-dom\";import classnames from\"classnames\";// styles\nimport useStyles from\"./styles\";// logo\nimport logo from\"./logo.svg\";import google from\"../../images/google.svg\";// context\nimport{useUserDispatch,loginUser,registerUser,sendPasswordResetEmail}from\"../../context/UserContext\";import{receiveToken,doInit}from\"../../context/UserContext\";//components\nimport{Button,Typography}from\"../../components/Wrappers\";import Widget from\"../../components/Widget\";import config from\"../../config\";var getGreeting=function getGreeting(){return\"Авторизация в Eqvium\";};function Login(props){var classes=useStyles();// global\nvar userDispatch=useUserDispatch();useEffect(function(){var params=new URLSearchParams(props.location.search);var token=params.get(\"token\");if(token){receiveToken(token,userDispatch);doInit()(userDispatch);}},[]);// eslint-disable-line\n// local\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),activeTabId=_useState6[0],setActiveTabId=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),nameValue=_useState8[0],setNameValue=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),loginValue=_useState10[0],setLoginValue=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),passwordValue=_useState12[0],setPasswordValue=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),forgotEmail=_useState14[0],setForgotEmail=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isForgot=_useState16[0],setIsForgot=_useState16[1];return/*#__PURE__*/React.createElement(Grid,{container:true,className:classes.container},/*#__PURE__*/React.createElement(\"div\",{className:!isForgot?classes.formContainer:classes.customFormContainer},/*#__PURE__*/React.createElement(\"div\",{className:classes.form},isForgot?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Input,{id:\"password\",InputProps:{classes:{underline:classes.InputUnderline,input:classes.Input}},value:forgotEmail,onChange:function onChange(e){return setForgotEmail(e.target.value);},margin:\"normal\",placeholder:\"Email\",type:\"Email\",fullWidth:true}),/*#__PURE__*/React.createElement(\"div\",{className:classes.formButtons},isLoading?/*#__PURE__*/React.createElement(CircularProgress,{size:26,className:classes.loginLoader}):/*#__PURE__*/React.createElement(Button,{disabled:forgotEmail.length===0,onClick:function onClick(){return sendPasswordResetEmail(forgotEmail)(userDispatch);},variant:\"contained\",color:\"primary\",size:\"large\"},\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"),/*#__PURE__*/React.createElement(Button,{color:\"primary\",size:\"large\",onClick:function onClick(){return setIsForgot(!isForgot);},className:classes.forgetButton},\"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043A\\u043E \\u0432\\u0445\\u043E\\u0434\\u0443\"))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Tabs,{value:activeTabId,onChange:function onChange(e,id){return setActiveTabId(id);},indicatorColor:\"primary\",textColor:\"primary\",centered:true},/*#__PURE__*/React.createElement(Tab,{label:\"\\u0412\\u0445\\u043E\\u0434\",classes:{root:classes.tab}}),/*#__PURE__*/React.createElement(Tab,{label:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\",classes:{root:classes.tab}})),activeTabId===0&&/*#__PURE__*/React.createElement(React.Fragment,null,config.isBackend?/*#__PURE__*/React.createElement(Widget,{disableWidgetMenu:true,inheritHeight:true,style:{marginTop:32}},/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",block:true,style:{textAlign:\"center\"}},\"This is a real app with Node.js backend - use\",/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",weight:\"bold\"},\"\\\"admin@flatlogic.com / password\\\"\"),\" \",\"to login!\")):null,/*#__PURE__*/React.createElement(Typography,{variant:\"h2\",className:classes.greeting},getGreeting()),/*#__PURE__*/React.createElement(Button,{size:\"large\",className:classes.googleButton,onClick:function onClick(){return loginUser(userDispatch,loginValue,passwordValue,props.history,setIsLoading,setError,\"google\");}},/*#__PURE__*/React.createElement(\"img\",{src:google,alt:\"google\",className:classes.googleIcon}),\"\\xA0\\u0412\\u043E\\u0439\\u0442\\u0438 \\u0441 Google\"),/*#__PURE__*/React.createElement(\"div\",{className:classes.formDividerContainer},/*#__PURE__*/React.createElement(\"div\",{className:classes.formDivider}),/*#__PURE__*/React.createElement(Typography,{className:classes.formDividerWord},\"\\u0438\\u043B\\u0438\"),/*#__PURE__*/React.createElement(\"div\",{className:classes.formDivider})),/*#__PURE__*/React.createElement(Fade,{in:error,style:!error?{display:\"none\"}:{display:\"inline-block\"}},/*#__PURE__*/React.createElement(Typography,{color:\"secondary\",className:classes.errorMessage},\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0438\\u043B\\u0438 \\u043B\\u043E\\u0433\\u0438\\u043D \\u043D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B :(\")),/*#__PURE__*/React.createElement(Input,{id:\"email\",InputProps:{classes:{underline:classes.InputUnderline,input:classes.Input}},value:loginValue,onChange:function onChange(e){return setLoginValue(e.target.value);},margin:\"normal\",placeholder:\"Email\",type:\"email\",fullWidth:true}),/*#__PURE__*/React.createElement(Input,{id:\"password\",InputProps:{classes:{underline:classes.InputUnderline,input:classes.Input}},value:passwordValue,onChange:function onChange(e){return setPasswordValue(e.target.value);},margin:\"normal\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",type:\"password\",fullWidth:true}),/*#__PURE__*/React.createElement(\"div\",{className:classes.formButtons},isLoading?/*#__PURE__*/React.createElement(CircularProgress,{size:26,className:classes.loginLoader}):/*#__PURE__*/React.createElement(Button,{disabled:loginValue.length===0||passwordValue.length===0,onClick:function onClick(){return loginUser(userDispatch,loginValue,passwordValue,props.history,setIsLoading,setError);},variant:\"contained\",color:\"primary\",size:\"large\"},\"\\u0412\\u043E\\u0439\\u0442\\u0438\"),/*#__PURE__*/React.createElement(Button,{color:\"primary\",size:\"large\",onClick:function onClick(){return setIsForgot(!isForgot);},className:classes.forgetButton},\"\\u0417\\u0430\\u0431\\u044B\\u043B\\u0438 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C?\"))),activeTabId===1&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Typography,{variant:\"h2\",className:classes.subGreeting},\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 e-mail \\u0434\\u043B\\u044F \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043A\\u0438 \\u043A\\u043E\\u0434\\u0430 \\u043F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F\"),/*#__PURE__*/React.createElement(Fade,{in:error},/*#__PURE__*/React.createElement(Typography,{color:\"secondary\",className:classes.errorMessage},\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0438\\u043B\\u0438 \\u043B\\u043E\\u0433\\u0438\\u043D \\u043D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B :(\")),/*#__PURE__*/React.createElement(Input,{id:\"email\",InputProps:{classes:{underline:classes.InputUnderline,input:classes.Input}},value:loginValue,onChange:function onChange(e){return setLoginValue(e.target.value);},margin:\"normal\",placeholder:\"Email\",type:\"email\",fullWidth:true}),/*#__PURE__*/React.createElement(\"div\",{className:classes.creatingButtonContainer},isLoading?/*#__PURE__*/React.createElement(CircularProgress,{size:26}):/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return registerUser(userDispatch,loginValue,props.history,setIsLoading,setError)();},disabled:loginValue.length===0,size:\"large\",variant:\"contained\",color:\"primary\",fullWidth:true,className:classes.createAccountButton},\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435\")))))));}export default withRouter(Login);","map":{"version":3,"sources":["/home/dekor/eqvium/react_material_test/admin-full/src/pages/login/Login.js"],"names":["React","useState","useEffect","Grid","CircularProgress","Tabs","Tab","Fade","TextField","Input","withRouter","classnames","useStyles","useUserDispatch","loginUser","registerUser","sendPasswordResetEmail","receiveToken","doInit","Button","Typography","Widget","config","getGreeting","Login","props","classes","userDispatch","params","URLSearchParams","location","search","token","get","isLoading","setIsLoading","error","setError","activeTabId","setActiveTabId","nameValue","setNameValue","loginValue","setLoginValue","passwordValue","setPasswordValue","forgotEmail","setForgotEmail","isForgot","setIsForgot","container","formContainer","customFormContainer","form","underline","InputUnderline","input","e","target","value","formButtons","loginLoader","length","forgetButton","id","root","tab","isBackend","marginTop","textAlign","greeting","googleButton","history","google","googleIcon","formDividerContainer","formDivider","formDividerWord","display","errorMessage","subGreeting","creatingButtonContainer","createAccountButton"],"mappings":"wKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OACEC,IADF,CAEEC,gBAFF,CAGEC,IAHF,CAIEC,GAJF,CAKEC,IALF,CAMEC,SAAS,GAAIC,CAAAA,KANf,KAOO,mBAPP,CAQA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CAEA;AACA,MAAOC,CAAAA,SAAP,KAAsB,UAAtB,CAEA;yEAIA;AACA,OAASC,eAAT,CAA0BC,SAA1B,CAAqCC,YAArC,CAAmDC,sBAAnD,KAAiF,2BAAjF,CACA,OAASC,YAAT,CAAuBC,MAAvB,KAAqC,2BAArC,CAEA;AACA,OAASC,MAAT,CAAiBC,UAAjB,KAAmC,2BAAnC,CACA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,MAAO,sBAAP,CACH,CAFD,CAIA,QAASC,CAAAA,KAAT,CAAeC,KAAf,CAAsB,CACpB,GAAIC,CAAAA,OAAO,CAAGd,SAAS,EAAvB,CAEA;AACA,GAAIe,CAAAA,YAAY,CAAGd,eAAe,EAAlC,CAEAX,SAAS,CAAC,UAAM,CACd,GAAM0B,CAAAA,MAAM,CAAG,GAAIC,CAAAA,eAAJ,CAAoBJ,KAAK,CAACK,QAAN,CAAeC,MAAnC,CAAf,CACA,GAAMC,CAAAA,KAAK,CAAGJ,MAAM,CAACK,GAAP,CAAW,OAAX,CAAd,CACA,GAAID,KAAJ,CAAW,CACTf,YAAY,CAACe,KAAD,CAAQL,YAAR,CAAZ,CACAT,MAAM,GAAGS,YAAH,CAAN,CACD,CACF,CAPQ,CAON,EAPM,CAAT,CAOQ;AAGR;AAhBoB,cAiBY1B,QAAQ,CAAC,KAAD,CAjBpB,wCAiBfiC,SAjBe,eAiBJC,YAjBI,8BAkBIlC,QAAQ,CAAC,IAAD,CAlBZ,yCAkBfmC,KAlBe,eAkBRC,QAlBQ,8BAmBgBpC,QAAQ,CAAC,CAAD,CAnBxB,yCAmBfqC,WAnBe,eAmBFC,cAnBE,8BAoBYtC,QAAQ,CAAC,EAAD,CApBpB,yCAoBfuC,SApBe,eAoBJC,YApBI,8BAqBcxC,QAAQ,CAAC,EAAD,CArBtB,0CAqBfyC,UArBe,gBAqBHC,aArBG,gCAsBoB1C,QAAQ,CAAC,EAAD,CAtB5B,2CAsBf2C,aAtBe,gBAsBAC,gBAtBA,gCAuBgB5C,QAAQ,CAAC,EAAD,CAvBxB,2CAuBf6C,WAvBe,gBAuBFC,cAvBE,gCAwBU9C,QAAQ,CAAC,KAAD,CAxBlB,2CAwBf+C,QAxBe,gBAwBLC,WAxBK,gBA0BpB,mBACE,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,SAAS,CAAEvB,OAAO,CAACwB,SAAnC,eACE,2BAAK,SAAS,CAAE,CAACF,QAAD,CAAYtB,OAAO,CAACyB,aAApB,CAAoCzB,OAAO,CAAC0B,mBAA5D,eACE,2BAAK,SAAS,CAAE1B,OAAO,CAAC2B,IAAxB,EACGL,QAAQ,cACP,4CACA,oBAAC,KAAD,EACI,EAAE,CAAC,UADP,CAEI,UAAU,CAAE,CACVtB,OAAO,CAAE,CACP4B,SAAS,CAAE5B,OAAO,CAAC6B,cADZ,CAEPC,KAAK,CAAE9B,OAAO,CAACjB,KAFR,CADC,CAFhB,CAQI,KAAK,CAAEqC,WARX,CASI,QAAQ,CAAE,kBAAAW,CAAC,QAAIV,CAAAA,cAAc,CAACU,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EATf,CAUI,MAAM,CAAC,QAVX,CAWI,WAAW,CAAC,OAXhB,CAYI,IAAI,CAAC,OAZT,CAaI,SAAS,KAbb,EADA,cAgBE,2BAAK,SAAS,CAAEjC,OAAO,CAACkC,WAAxB,EACG1B,SAAS,cACR,oBAAC,gBAAD,EAAkB,IAAI,CAAE,EAAxB,CAA4B,SAAS,CAAER,OAAO,CAACmC,WAA/C,EADQ,cAGR,oBAAC,MAAD,EACE,QAAQ,CACNf,WAAW,CAACgB,MAAZ,GAAuB,CAF3B,CAIE,OAAO,CAAE,yBACP9C,CAAAA,sBAAsB,CACpB8B,WADoB,CAAtB,CAEEnB,YAFF,CADO,EAJX,CASE,OAAO,CAAC,WATV,CAUE,KAAK,CAAC,SAVR,CAWE,IAAI,CAAC,OAXP,2DAJJ,cAoBE,oBAAC,MAAD,EACE,KAAK,CAAC,SADR,CAEE,IAAI,CAAC,OAFP,CAGE,OAAO,CAAE,yBAAMsB,CAAAA,WAAW,CAAC,CAACD,QAAF,CAAjB,EAHX,CAIE,SAAS,CAAEtB,OAAO,CAACqC,YAJrB,uGApBF,CAhBF,CADO,cAgDP,qDACF,oBAAC,IAAD,EACE,KAAK,CAAEzB,WADT,CAEE,QAAQ,CAAE,kBAACmB,CAAD,CAAIO,EAAJ,QAAWzB,CAAAA,cAAc,CAACyB,EAAD,CAAzB,EAFZ,CAGE,cAAc,CAAC,SAHjB,CAIE,SAAS,CAAC,SAJZ,CAKE,QAAQ,KALV,eAOE,oBAAC,GAAD,EAAK,KAAK,CAAC,0BAAX,CAAkB,OAAO,CAAE,CAAEC,IAAI,CAAEvC,OAAO,CAACwC,GAAhB,CAA3B,EAPF,cAQE,oBAAC,GAAD,EAAK,KAAK,CAAC,oEAAX,CAAyB,OAAO,CAAE,CAAED,IAAI,CAAEvC,OAAO,CAACwC,GAAhB,CAAlC,EARF,CADE,CAWD5B,WAAW,GAAK,CAAhB,eACC,oBAAC,KAAD,CAAO,QAAP,MACGhB,MAAM,CAAC6C,SAAP,cACC,oBAAC,MAAD,EACE,iBAAiB,KADnB,CAEE,aAAa,KAFf,CAGE,KAAK,CAAE,CAAEC,SAAS,CAAE,EAAb,CAHT,eAKE,oBAAC,UAAD,EACE,OAAO,CAAE,OADX,CAEE,KAAK,KAFP,CAGE,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAb,CAHT,+DAME,oBAAC,UAAD,EAAY,OAAO,CAAE,OAArB,CAA8B,MAAM,CAAE,MAAtC,uCANF,CAQgB,GARhB,aALF,CADD,CAkBG,IAnBN,cAoBE,oBAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,SAAS,CAAE3C,OAAO,CAAC4C,QAA5C,EACG/C,WAAW,EADd,CApBF,cAuBE,oBAAC,MAAD,EACE,IAAI,CAAC,OADP,CAEE,SAAS,CAAEG,OAAO,CAAC6C,YAFrB,CAGE,OAAO,CAAE,yBACPzD,CAAAA,SAAS,CACPa,YADO,CAEPe,UAFO,CAGPE,aAHO,CAIPnB,KAAK,CAAC+C,OAJC,CAKPrC,YALO,CAMPE,QANO,CAOP,QAPO,CADF,EAHX,eAeE,2BAAK,GAAG,CAAEoC,MAAV,CAAkB,GAAG,CAAC,QAAtB,CAA+B,SAAS,CAAE/C,OAAO,CAACgD,UAAlD,EAfF,oDAvBF,cAyCE,2BAAK,SAAS,CAAEhD,OAAO,CAACiD,oBAAxB,eACE,2BAAK,SAAS,CAAEjD,OAAO,CAACkD,WAAxB,EADF,cAEE,oBAAC,UAAD,EAAY,SAAS,CAAElD,OAAO,CAACmD,eAA/B,uBAFF,cAGE,2BAAK,SAAS,CAAEnD,OAAO,CAACkD,WAAxB,EAHF,CAzCF,cA8CE,oBAAC,IAAD,EACE,EAAE,CAAExC,KADN,CAEE,KAAK,CACH,CAACA,KAAD,CAAS,CAAE0C,OAAO,CAAE,MAAX,CAAT,CAA+B,CAAEA,OAAO,CAAE,cAAX,CAHnC,eAME,oBAAC,UAAD,EAAY,KAAK,CAAC,WAAlB,CAA8B,SAAS,CAAEpD,OAAO,CAACqD,YAAjD,yIANF,CA9CF,cAwDE,oBAAC,KAAD,EACE,EAAE,CAAC,OADL,CAEE,UAAU,CAAE,CACVrD,OAAO,CAAE,CACP4B,SAAS,CAAE5B,OAAO,CAAC6B,cADZ,CAEPC,KAAK,CAAE9B,OAAO,CAACjB,KAFR,CADC,CAFd,CAQE,KAAK,CAAEiC,UART,CASE,QAAQ,CAAE,kBAAAe,CAAC,QAAId,CAAAA,aAAa,CAACc,CAAC,CAACC,MAAF,CAASC,KAAV,CAAjB,EATb,CAUE,MAAM,CAAC,QAVT,CAWE,WAAW,CAAC,OAXd,CAYE,IAAI,CAAC,OAZP,CAaE,SAAS,KAbX,EAxDF,cAuEE,oBAAC,KAAD,EACE,EAAE,CAAC,UADL,CAEE,UAAU,CAAE,CACVjC,OAAO,CAAE,CACP4B,SAAS,CAAE5B,OAAO,CAAC6B,cADZ,CAEPC,KAAK,CAAE9B,OAAO,CAACjB,KAFR,CADC,CAFd,CAQE,KAAK,CAAEmC,aART,CASE,QAAQ,CAAE,kBAAAa,CAAC,QAAIZ,CAAAA,gBAAgB,CAACY,CAAC,CAACC,MAAF,CAASC,KAAV,CAApB,EATb,CAUE,MAAM,CAAC,QAVT,CAWE,WAAW,CAAC,sCAXd,CAYE,IAAI,CAAC,UAZP,CAaE,SAAS,KAbX,EAvEF,cAsFE,2BAAK,SAAS,CAAEjC,OAAO,CAACkC,WAAxB,EACG1B,SAAS,cACR,oBAAC,gBAAD,EAAkB,IAAI,CAAE,EAAxB,CAA4B,SAAS,CAAER,OAAO,CAACmC,WAA/C,EADQ,cAGR,oBAAC,MAAD,EACE,QAAQ,CACNnB,UAAU,CAACoB,MAAX,GAAsB,CAAtB,EAA2BlB,aAAa,CAACkB,MAAd,GAAyB,CAFxD,CAIE,OAAO,CAAE,yBACPhD,CAAAA,SAAS,CACPa,YADO,CAEPe,UAFO,CAGPE,aAHO,CAIPnB,KAAK,CAAC+C,OAJC,CAKPrC,YALO,CAMPE,QANO,CADF,EAJX,CAcE,OAAO,CAAC,WAdV,CAeE,KAAK,CAAC,SAfR,CAgBE,IAAI,CAAC,OAhBP,mCAJJ,cAyBE,oBAAC,MAAD,EACE,KAAK,CAAC,SADR,CAEE,IAAI,CAAC,OAFP,CAGE,OAAO,CAAE,yBAAMY,CAAAA,WAAW,CAAC,CAACD,QAAF,CAAjB,EAHX,CAIE,SAAS,CAAEtB,OAAO,CAACqC,YAJrB,+EAzBF,CAtFF,CAZA,CAsIDzB,WAAW,GAAK,CAAhB,eACC,oBAAC,KAAD,CAAO,QAAP,mBACE,oBAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,SAAS,CAAEZ,OAAO,CAACsD,WAA5C,kOADF,cAIE,oBAAC,IAAD,EAAM,EAAE,CAAE5C,KAAV,eACE,oBAAC,UAAD,EAAY,KAAK,CAAC,WAAlB,CAA8B,SAAS,CAAEV,OAAO,CAACqD,YAAjD,yIADF,CAJF,cASE,oBAAC,KAAD,EACE,EAAE,CAAC,OADL,CAEE,UAAU,CAAE,CACVrD,OAAO,CAAE,CACP4B,SAAS,CAAE5B,OAAO,CAAC6B,cADZ,CAEPC,KAAK,CAAE9B,OAAO,CAACjB,KAFR,CADC,CAFd,CAQE,KAAK,CAAEiC,UART,CASE,QAAQ,CAAE,kBAAAe,CAAC,QAAId,CAAAA,aAAa,CAACc,CAAC,CAACC,MAAF,CAASC,KAAV,CAAjB,EATb,CAUE,MAAM,CAAC,QAVT,CAWE,WAAW,CAAC,OAXd,CAYE,IAAI,CAAC,OAZP,CAaE,SAAS,KAbX,EATF,cAwBE,2BAAK,SAAS,CAAEjC,OAAO,CAACuD,uBAAxB,EACG/C,SAAS,cACR,oBAAC,gBAAD,EAAkB,IAAI,CAAE,EAAxB,EADQ,cAGR,oBAAC,MAAD,EACE,OAAO,CAAE,yBACPnB,CAAAA,YAAY,CACVY,YADU,CAEVe,UAFU,CAGVjB,KAAK,CAAC+C,OAHI,CAIVrC,YAJU,CAKVE,QALU,CAAZ,EADO,EADX,CAUE,QAAQ,CACNK,UAAU,CAACoB,MAAX,GAAsB,CAX1B,CAaE,IAAI,CAAC,OAbP,CAcE,OAAO,CAAC,WAdV,CAeE,KAAK,CAAC,SAfR,CAgBE,SAAS,KAhBX,CAiBE,SAAS,CAAEpC,OAAO,CAACwD,mBAjBrB,0IAJJ,CAxBF,CAvIA,CAjDJ,CADF,CADF,CADF,CAsPD,CAED,cAAexE,CAAAA,UAAU,CAACc,KAAD,CAAzB","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Grid,\n  CircularProgress,\n  Tabs,\n  Tab,\n  Fade,\n  TextField as Input\n} from \"@material-ui/core\";\nimport { withRouter } from \"react-router-dom\";\nimport classnames from \"classnames\";\n\n// styles\nimport useStyles from \"./styles\";\n\n// logo\nimport logo from \"./logo.svg\";\nimport google from \"../../images/google.svg\";\n\n// context\nimport { useUserDispatch, loginUser, registerUser, sendPasswordResetEmail } from \"../../context/UserContext\";\nimport { receiveToken, doInit } from \"../../context/UserContext\";\n\n//components\nimport { Button, Typography } from \"../../components/Wrappers\";\nimport Widget from \"../../components/Widget\";\nimport config from \"../../config\";\n\nconst getGreeting = () => {\n    return \"Авторизация в Eqvium\";\n};\n\nfunction Login(props) {\n  var classes = useStyles();\n\n  // global\n  var userDispatch = useUserDispatch();\n\n  useEffect(() => {\n    const params = new URLSearchParams(props.location.search);\n    const token = params.get(\"token\");\n    if (token) {\n      receiveToken(token, userDispatch);\n      doInit()(userDispatch);\n    }\n  }, []); // eslint-disable-line\n  \n\n  // local\n  var [isLoading, setIsLoading] = useState(false);\n  var [error, setError] = useState(null);\n  var [activeTabId, setActiveTabId] = useState(0);\n  var [nameValue, setNameValue] = useState(\"\");\n  var [loginValue, setLoginValue] = useState(\"\");\n  var [passwordValue, setPasswordValue] = useState(\"\");\n  var [forgotEmail, setForgotEmail] = useState(\"\");\n  var [isForgot, setIsForgot] = useState(false);\n\n  return (\n    <Grid container className={classes.container}>\n      <div className={!isForgot ? classes.formContainer : classes.customFormContainer}>\n        <div className={classes.form}>\n          {isForgot ? (\n            <div>\n            <Input\n                id=\"password\"\n                InputProps={{\n                  classes: {\n                    underline: classes.InputUnderline,\n                    input: classes.Input\n                  }\n                }}\n                value={forgotEmail}\n                onChange={e => setForgotEmail(e.target.value)}\n                margin=\"normal\"\n                placeholder=\"Email\"\n                type=\"Email\"\n                fullWidth\n              />\n              <div className={classes.formButtons}>\n                {isLoading ? (\n                  <CircularProgress size={26} className={classes.loginLoader} />\n                ) : (\n                  <Button\n                    disabled={\n                      forgotEmail.length === 0\n                    }\n                    onClick={() =>\n                      sendPasswordResetEmail(\n                        forgotEmail,\n                      )(userDispatch)\n                    }\n                    variant=\"contained\"\n                    color=\"primary\"\n                    size=\"large\"\n                  >\n                    Отправить\n                  </Button>\n                )}\n                <Button\n                  color=\"primary\"\n                  size=\"large\"\n                  onClick={() => setIsForgot(!isForgot)}\n                  className={classes.forgetButton}\n                >\n                  Вернуться ко входу\n                </Button>\n              </div>\n            </div>\n          ) : (\n            <>\n          <Tabs\n            value={activeTabId}\n            onChange={(e, id) => setActiveTabId(id)}\n            indicatorColor=\"primary\"\n            textColor=\"primary\"\n            centered\n          >\n            <Tab label=\"Вход\" classes={{ root: classes.tab }} />\n            <Tab label=\"Регистрация\" classes={{ root: classes.tab }} />\n          </Tabs>\n          {activeTabId === 0 && (\n            <React.Fragment>\n              {config.isBackend ? (\n                <Widget\n                  disableWidgetMenu\n                  inheritHeight\n                  style={{ marginTop: 32 }}\n                >\n                  <Typography\n                    variant={\"body2\"}\n                    block\n                    style={{ textAlign: \"center\" }}\n                  >\n                    This is a real app with Node.js backend - use\n                    <Typography variant={\"body2\"} weight={\"bold\"}>\n                      \"admin@flatlogic.com / password\"\n                    </Typography>{\" \"}\n                    to login!\n                  </Typography>\n                </Widget>\n              ) : null}\n              <Typography variant=\"h2\" className={classes.greeting}>\n                {getGreeting()}\n              </Typography>\n              <Button\n                size=\"large\"\n                className={classes.googleButton}\n                onClick={() =>\n                  loginUser(\n                    userDispatch,\n                    loginValue,\n                    passwordValue,\n                    props.history,\n                    setIsLoading,\n                    setError,\n                    \"google\"\n                  )\n                }\n              >\n                <img src={google} alt=\"google\" className={classes.googleIcon} />\n                &nbsp;Войти с Google\n              </Button>\n              <div className={classes.formDividerContainer}>\n                <div className={classes.formDivider} />\n                <Typography className={classes.formDividerWord}>или</Typography>\n                <div className={classes.formDivider} />\n              </div>\n              <Fade\n                in={error}\n                style={\n                  !error ? { display: \"none\" } : { display: \"inline-block\" }\n                }\n              >\n                <Typography color=\"secondary\" className={classes.errorMessage}>\n                  Пароль или логин неверны :(\n                </Typography>\n              </Fade>\n              <Input\n                id=\"email\"\n                InputProps={{\n                  classes: {\n                    underline: classes.InputUnderline,\n                    input: classes.Input\n                  }\n                }}\n                value={loginValue}\n                onChange={e => setLoginValue(e.target.value)}\n                margin=\"normal\"\n                placeholder=\"Email\"\n                type=\"email\"\n                fullWidth\n              />\n              <Input\n                id=\"password\"\n                InputProps={{\n                  classes: {\n                    underline: classes.InputUnderline,\n                    input: classes.Input\n                  }\n                }}\n                value={passwordValue}\n                onChange={e => setPasswordValue(e.target.value)}\n                margin=\"normal\"\n                placeholder=\"Пароль\"\n                type=\"password\"\n                fullWidth\n              />\n              <div className={classes.formButtons}>\n                {isLoading ? (\n                  <CircularProgress size={26} className={classes.loginLoader} />\n                ) : (\n                  <Button\n                    disabled={\n                      loginValue.length === 0 || passwordValue.length === 0\n                    }\n                    onClick={() =>\n                      loginUser(\n                        userDispatch,\n                        loginValue,\n                        passwordValue,\n                        props.history,\n                        setIsLoading,\n                        setError\n                      )\n                    }\n                    variant=\"contained\"\n                    color=\"primary\"\n                    size=\"large\"\n                  >\n                    Войти\n                  </Button>\n                )}\n                <Button\n                  color=\"primary\"\n                  size=\"large\"\n                  onClick={() => setIsForgot(!isForgot)}\n                  className={classes.forgetButton}\n                >\n                  Забыли пароль?\n                </Button>\n              </div>\n            </React.Fragment>\n          )}\n          {activeTabId === 1 && (\n            <React.Fragment>\n              <Typography variant=\"h2\" className={classes.subGreeting}>\n                Введите e-mail для отправки кода подтверждения\n              </Typography>\n              <Fade in={error}>\n                <Typography color=\"secondary\" className={classes.errorMessage}>\n                  Пароль или логин неверны :(\n                </Typography>\n              </Fade>\n              <Input\n                id=\"email\"\n                InputProps={{\n                  classes: {\n                    underline: classes.InputUnderline,\n                    input: classes.Input\n                  }\n                }}\n                value={loginValue}\n                onChange={e => setLoginValue(e.target.value)}\n                margin=\"normal\"\n                placeholder=\"Email\"\n                type=\"email\"\n                fullWidth\n              />\n              <div className={classes.creatingButtonContainer}>\n                {isLoading ? (\n                  <CircularProgress size={26} />\n                ) : (\n                  <Button\n                    onClick={() =>\n                      registerUser(\n                        userDispatch,\n                        loginValue,\n                        props.history,\n                        setIsLoading,\n                        setError\n                      )()\n                    }\n                    disabled={\n                      loginValue.length === 0\n                    }\n                    size=\"large\"\n                    variant=\"contained\"\n                    color=\"primary\"\n                    fullWidth\n                    className={classes.createAccountButton}\n                  >\n                    Отправить подтверждение\n                  </Button>\n                )}\n              </div>\n            </React.Fragment>\n          )}\n          </>\n        )}\n        </div>\n      </div>\n    </Grid>\n  );\n}\n\nexport default withRouter(Login);\n"]},"metadata":{},"sourceType":"module"}