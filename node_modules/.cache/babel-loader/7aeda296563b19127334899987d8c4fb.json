{"ast":null,"code":"import _slicedToArray from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";//import React from \"react\";\nimport React,{useState,useEffect,useRef}from\"react\";import{Grid,Box,FormControl,InputLabel,MenuItem,Select,Card,CardActions,CardContent,CardActionArea,CardMedia,Link}from\"@material-ui/core\";import{Star as StarIcon}from\"@material-ui/icons\";import{yellow}from\"@material-ui/core/colors/index\";import useStyles from\"./styles\";//components\nimport{Typography,Chip}from\"../../components/Wrappers\";import img from\"../../images/img1.jpg\";//products array\nimport{rows}from\"./mock\";import axios from\"axios\";var Hardware=function Hardware(props){var typeRef=React.useRef(null);var brandsRef=React.useRef(null);var sizeRef=React.useRef(null);var colourRef=React.useRef(null);var rangeRef=React.useRef(null);var sortRef=React.useRef(null);var ws=useRef(null);var rows=[{id:0,dev_sn:\"test\",stat:\"offline\"},{id:1,dev_sn:\"Событие\",stat:\"offline\"}];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rows2=_useState2[0],updateData2=_useState2[1];//  const rows2 = [];\nvar classes=useStyles();useEffect(function(){ws.current=new WebSocket(\"ws://79.143.25.41:8080/gear\");ws.current.binaryType='arraybuffer';ws.current.onopen=function(){console.log(\"ws opened\");//axios.defaults.headers.common[\"Authorization\"] = \"\";\n};ws.current.onclose=function(){return console.log(\"ws closed\");};//devs - offline\nreturn function(){ws.current.close();};},[]);useEffect(function(){if(!ws.current)return;ws.current.onmessage=function(e){//          console.log(e.data);\nif(e.data!=null){var obj=JSON.parse(e.data);console.log(obj.device,\"is online: \",obj.online);var len=rows2.length;var array3=rows2;// console.log(array3, \"pre change2\");\nfor(var i=0;i<len;i++){if(array3[i].dev_sn==obj.device){var isonline;if(obj.online===\"true\"){isonline=\"online\";}if(obj.online===\"false\"){isonline=\"offline\";}//       array3[i] = {\"dev_sn\":obj.device, \"stat\":isonline};\n//console.log(array3, \"pre change2\");\n}//               rows2[i]res.data[i].dev_sn] = \"offline\";\n}//console.log(array3, \"change2\");\n//updateData2(array2);\n//           if(obj.online === \"true\") { rows2[obj.device] = \"online\";}\n//           if(obj.online === \"false\") { rows2[obj.device] = \"offline\";}\n//         console.log(rows2);\n}};},[]);//ws.current.send(\"hi\");\nreturn/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Box,{display:\"flex\"})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Box,{display:\"flex\",flexWrap:\"wrap\"},/*#__PURE__*/React.createElement(Grid,{container:true,item:true,spacing:3},rows2.map(function(c){return/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:3,key:c.id},/*#__PURE__*/React.createElement(Card,{className:classes.card},/*#__PURE__*/React.createElement(CardActionArea,{component:Link,href:\"/#\"},/*#__PURE__*/React.createElement(CardMedia,{className:classes.media,image:img,title:c.dev_sn}),/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,variant:\"h5\",component:\"h2\"},c.dev_sn),/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",color:\"text\",colorBrightness:\"secondary\",component:\"p\"},c.stat))),/*#__PURE__*/React.createElement(CardActions,{style:{padding:16}},/*#__PURE__*/React.createElement(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",width:\"100%\"}))));}))))));};export default Hardware;","map":{"version":3,"sources":["/home/dekor/eqvium/react_material_test/admin-full/src/pages/hardware/Hardware.js"],"names":["React","useState","useEffect","useRef","Grid","Box","FormControl","InputLabel","MenuItem","Select","Card","CardActions","CardContent","CardActionArea","CardMedia","Link","Star","StarIcon","yellow","useStyles","Typography","Chip","img","rows","axios","Hardware","props","typeRef","brandsRef","sizeRef","colourRef","rangeRef","sortRef","ws","id","dev_sn","stat","rows2","updateData2","classes","current","WebSocket","binaryType","onopen","console","log","onclose","close","onmessage","e","data","obj","JSON","parse","device","online","len","length","array3","i","isonline","map","c","card","media","padding"],"mappings":"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","sourcesContent":["//import React from \"react\";\nimport React, { useState, useEffect, useRef } from \"react\";\n\nimport {\n  Grid,\n  Box,\n  FormControl,\n  InputLabel,\n  MenuItem,\n  Select,\n  Card,\n  CardActions,\n  CardContent,\n  CardActionArea,\n  CardMedia,\n  Link\n} from \"@material-ui/core\";\nimport { Star as StarIcon } from \"@material-ui/icons\";\nimport { yellow } from \"@material-ui/core/colors/index\";\nimport useStyles from \"./styles\";\n\n//components\nimport { Typography, Chip } from \"../../components/Wrappers\";\n\nimport img from \"../../images/img1.jpg\";\n\n\n//products array\nimport { rows } from \"./mock\";\nimport axios from \"axios\";\n\nconst Hardware = props => {\n  const typeRef = React.useRef(null);\n  const brandsRef = React.useRef(null);\n  const sizeRef = React.useRef(null);\n  const colourRef = React.useRef(null);\n  const rangeRef = React.useRef(null);\n  const sortRef = React.useRef(null);\n\n  const ws = useRef(null);\n \n  const rows = [\n  {\n    id: 0,\n    dev_sn: \"test\",\n    stat: \"offline\"\n  },\n  {\n    id: 1,\n    dev_sn: \"Событие\",\n    stat: \"offline\"\n  }\n];\n\n\n  const [rows2, updateData2] = useState([]);\n\n//  const rows2 = [];\n\n  const classes = useStyles();\n\n  \n  useEffect(() => {\n        ws.current = new WebSocket(\"ws://79.143.25.41:8080/gear\");\n        ws.current.binaryType = 'arraybuffer';\n        ws.current.onopen = () => {\n          console.log(\"ws opened\");\n          //axios.defaults.headers.common[\"Authorization\"] = \"\";\n        }\n        ws.current.onclose = () => console.log(\"ws closed\"); //devs - offline\n        return () => {\n            ws.current.close();\n        };\n    }, []);\n  \n    useEffect(() => {\n        if (!ws.current) return;\n        ws.current.onmessage = e =>  {\n//          console.log(e.data);\n            if(e.data != null) {\n            var obj = JSON.parse(e.data);\n           console.log(obj.device, \"is online: \", obj.online);\n           var len = rows2.length;\n            let array3 = rows2;\n            // console.log(array3, \"pre change2\");\n            for (var i = 0; i < len; i++) {\n               if(array3[i].dev_sn == obj.device) {\n                  var isonline;\n                  if(obj.online === \"true\") { isonline = \"online\";}\n                  if(obj.online === \"false\") { isonline = \"offline\";}\n           //       array3[i] = {\"dev_sn\":obj.device, \"stat\":isonline};\n                  //console.log(array3, \"pre change2\");\n               }\n//               rows2[i]res.data[i].dev_sn] = \"offline\";\n            }\n             //console.log(array3, \"change2\");\n            //updateData2(array2);\n//           if(obj.online === \"true\") { rows2[obj.device] = \"online\";}\n//           if(obj.online === \"false\") { rows2[obj.device] = \"offline\";}\n  //         console.log(rows2);\n        }\n     };\n    }, []);\n    \n \n          //ws.current.send(\"hi\");\n\n  return (\n    <>\n      <Grid container spacing={3}>\n        <Grid item xs={12}>\n          <Box display=\"flex\">\n          </Box>\n        </Grid>\n        <Grid item xs={12}>\n          <Box display={\"flex\"} flexWrap={\"wrap\"}>\n            <Grid container item spacing={3}>\n{rows2.map(c => (\n\n  <Grid item xs={12} md={3} key={c.id}>\n                  <Card className={classes.card}>\n                    <CardActionArea component={Link} href={`/#`}>\n\n\n                      <CardMedia\n                        className={classes.media}\n                        image={img}\n                        title={c.dev_sn}\n                      >\n                      </CardMedia>\n                      <CardContent>\n                        <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                          {c.dev_sn}\n                        </Typography>\n                        <Typography\n                          variant=\"body2\"\n                          color=\"text\"\n                          colorBrightness={\"secondary\"}\n                          component=\"p\"\n                        >\n                          {c.stat}\n                        </Typography>\n                      </CardContent>\n                    </CardActionArea>\n                    <CardActions style={{ padding: 16 }}>\n  <Box\n                        display={\"flex\"}\n                        justifyContent={\"space-between\"}\n                        alignItems=\"center\"\n                        width={\"100%\"}\n                      >\n                      </Box>\n                    </CardActions>\n                  </Card>\n                </Grid>\n\n\n              ))}\n\n            </Grid>\n          </Box>\n        </Grid>\n      </Grid>\n    </>\n  );\n};\n\nexport default Hardware;\n"]},"metadata":{},"sourceType":"module"}