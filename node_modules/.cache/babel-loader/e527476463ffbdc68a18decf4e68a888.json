{"ast":null,"code":"import _slicedToArray from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{AppBar,Toolbar,IconButton,InputBase,Menu,MenuItem,Fab,Link}from\"@material-ui/core\";import{useTheme}from\"@material-ui/styles\";import{Menu as MenuIcon,MailOutline as MailIcon,NotificationsNone as NotificationsIcon,Person as AccountIcon,Search as SearchIcon,Send as SendIcon,ArrowBack as ArrowBackIcon}from\"@material-ui/icons\";import classNames from\"classnames\";//images\nimport profile from\"../../images/main-profile.png\";import config from\"../../config\";// styles\nimport useStyles from\"./styles\";// components\nimport{Badge,Typography,Avatar,Button}from\"../Wrappers/Wrappers\";import Notification from\"../Notification/Notification\";import UserAvatar from\"../UserAvatar/UserAvatar\";// context\nimport{useLayoutState,useLayoutDispatch,toggleSidebar}from\"../../context/LayoutContext\";import{useManagementDispatch,useManagementState}from'../../context/ManagementContext';import{actions}from'../../context/ManagementContext';import{useUserDispatch,signOut}from\"../../context/UserContext\";var messages=[];var notifications=[{id:0,color:\"warning\",message:\"Проверка тикета\"}];export default function Header(props){var classes=useStyles();var theme=useTheme();// global\nvar layoutState=useLayoutState();var layoutDispatch=useLayoutDispatch();var userDispatch=useUserDispatch();var managementDispatch=useManagementDispatch();// local\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),mailMenu=_useState2[0],setMailMenu=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isMailsUnread=_useState4[0],setIsMailsUnread=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),notificationsMenu=_useState6[0],setNotificationsMenu=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isNotificationsUnread=_useState8[0],setIsNotificationsUnread=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),profileMenu=_useState10[0],setProfileMenu=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isSearchOpen=_useState12[0],setSearchOpen=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isSmall=_useState14[0],setSmall=_useState14[1];var managementValue=useManagementState();useEffect(function(){actions.doFind(sessionStorage.getItem('user_id'))(managementDispatch);},[]);useEffect(function(){window.addEventListener(\"resize\",handleWindowWidthChange);handleWindowWidthChange();return function cleanup(){window.removeEventListener(\"resize\",handleWindowWidthChange);};});function handleWindowWidthChange(){var windowWidth=window.innerWidth;var breakpointWidth=theme.breakpoints.values.md;var isSmallScreen=windowWidth<breakpointWidth;setSmall(isSmallScreen);}return/*#__PURE__*/React.createElement(AppBar,{position:\"fixed\",className:classes.appBar},/*#__PURE__*/React.createElement(Toolbar,{className:classes.toolbar},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\",weight:\"medium\",className:classes.logotype},\"EQVIUM\"),/*#__PURE__*/React.createElement(Button,{component:Link,href:\"/#/app/cabinet\",color:\"white\",style:{marginRight:24}},\"\\u041B\\u0438\\u0447\\u043D\\u044B\\u0439 \\u043A\\u0430\\u0431\\u0438\\u043D\\u0435\\u0442\"),/*#__PURE__*/React.createElement(Button,{component:Link,href:\"/#/app/catalog\",color:\"white\",style:{marginRight:24}},\"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"),/*#__PURE__*/React.createElement(Button,{component:Link,href:\"/#/app/courses\",color:\"white\",style:{marginRight:24}},\"\\u041A\\u0443\\u0440\\u0441\\u044B \\u0438 \\u0441\\u043E\\u0431\\u044B\\u0442\\u0438\\u044F\"),/*#__PURE__*/React.createElement(Button,{component:Link,href:\"/#/app/hardware\",color:\"white\",style:{marginRight:24}},\"\\u041E\\u0431\\u043E\\u0440\\u0443\\u0434\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"),/*#__PURE__*/React.createElement(\"div\",{className:classes.grow}),/*#__PURE__*/React.createElement(IconButton,{color:\"black\",\"aria-haspopup\":\"true\",\"aria-controls\":\"mail-menu\",onClick:function onClick(e){setNotificationsMenu(e.currentTarget);setIsNotificationsUnread(false);},className:classes.headerMenuButton},/*#__PURE__*/React.createElement(Badge,{badgeContent:isNotificationsUnread?notifications.length:null,color:\"warning\"},/*#__PURE__*/React.createElement(NotificationsIcon,{classes:{root:classes.headerIcon}}))),/*#__PURE__*/React.createElement(IconButton,{color:\"inherit\",\"aria-haspopup\":\"true\",\"aria-controls\":\"mail-menu\",onClick:function onClick(e){setMailMenu(e.currentTarget);setIsMailsUnread(false);},className:classes.headerMenuButton},/*#__PURE__*/React.createElement(Badge,{badgeContent:isMailsUnread?messages.length:null,color:\"secondary\"},/*#__PURE__*/React.createElement(MailIcon,{classes:{root:classes.headerIcon}}))),/*#__PURE__*/React.createElement(IconButton,{\"aria-haspopup\":\"true\",color:\"inherit\",className:classes.headerMenuButton,\"aria-controls\":\"profile-menu\",onClick:function onClick(e){return setProfileMenu(e.currentTarget);}},/*#__PURE__*/React.createElement(Avatar,{alt:\"Robert Cotton\",src:config.isBackend?managementValue.currentUser&&managementValue.currentUser.avatar.length>=1&&managementValue.currentUser.avatar[managementValue.currentUser.avatar.length-1].publicUrl||profile:profile,classes:{root:classes.headerIcon}})),/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",weight:\"bold\",color:\"info\"},localStorage.getItem(\"email\")),/*#__PURE__*/React.createElement(Menu,{id:\"mail-menu\",open:Boolean(mailMenu),anchorEl:mailMenu,onClose:function onClose(){return setMailMenu(null);},MenuListProps:{className:classes.headerMenuList},className:classes.headerMenu,classes:{paper:classes.profileMenu},disableAutoFocusItem:true},/*#__PURE__*/React.createElement(\"div\",{className:classes.profileMenuUser},/*#__PURE__*/React.createElement(Typography,{variant:\"h4\",weight:\"medium\"},\"\\u041D\\u043E\\u0432\\u044B\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u044F\"),/*#__PURE__*/React.createElement(Typography,{className:classes.profileMenuLink,component:\"a\",color:\"secondary\"},\"\\u041D\\u043E\\u0432\\u044B\\u0445 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439: \",messages.length)),messages.map(function(message){return/*#__PURE__*/React.createElement(MenuItem,{key:message.id,className:classes.messageNotification},/*#__PURE__*/React.createElement(\"div\",{className:classes.messageNotificationSide},/*#__PURE__*/React.createElement(UserAvatar,{color:message.variant,name:message.name}),/*#__PURE__*/React.createElement(Typography,{size:\"sm\",color:\"text\",colorBrightness:\"secondary\"},message.time)),/*#__PURE__*/React.createElement(\"div\",{className:classNames(classes.messageNotificationSide,classes.messageNotificationBodySide)},/*#__PURE__*/React.createElement(Typography,{weight:\"medium\",gutterBottom:true},message.name),/*#__PURE__*/React.createElement(Typography,{color:\"text\",colorBrightness:\"secondary\"},message.message)));}),/*#__PURE__*/React.createElement(Fab,{variant:\"extended\",color:\"primary\",\"aria-label\":\"Add\",className:classes.sendMessageButton},\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",/*#__PURE__*/React.createElement(SendIcon,{className:classes.sendButtonIcon}))),/*#__PURE__*/React.createElement(Menu,{id:\"notifications-menu\",open:Boolean(notificationsMenu),anchorEl:notificationsMenu,onClose:function onClose(){return setNotificationsMenu(null);},className:classes.headerMenu,disableAutoFocusItem:true},notifications.map(function(notification){return/*#__PURE__*/React.createElement(MenuItem,{key:notification.id,onClick:function onClick(){return setNotificationsMenu(null);},className:classes.headerMenuItem},/*#__PURE__*/React.createElement(Notification,Object.assign({},notification,{typographyVariant:\"inherit\"})));})),/*#__PURE__*/React.createElement(Menu,{id:\"profile-menu\",open:Boolean(profileMenu),anchorEl:profileMenu,onClose:function onClose(){return setProfileMenu(null);},className:classes.headerMenu,classes:{paper:classes.profileMenu},disableAutoFocusItem:true},/*#__PURE__*/React.createElement(\"div\",{className:classes.profileMenuUser}),/*#__PURE__*/React.createElement(MenuItem,{className:classNames(classes.profileMenuItem,classes.headerMenuItem)},/*#__PURE__*/React.createElement(AccountIcon,{className:classes.profileMenuIcon}),/*#__PURE__*/React.createElement(Button,{component:Link,href:\"/#/app/profile\",color:\"white\",style:{marginRight:24}},\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\")),/*#__PURE__*/React.createElement(MenuItem,{className:classNames(classes.profileMenuItem,classes.headerMenuItem)}),/*#__PURE__*/React.createElement(\"div\",{className:classes.profileMenuUser},/*#__PURE__*/React.createElement(Typography,{className:classes.profileMenuLink,color:\"primary\",onClick:function onClick(){return signOut(userDispatch,props.history);}},\"\\u0412\\u044B\\u0445\\u043E\\u0434\")))));}","map":{"version":3,"sources":["/home/dekor/eqvium/react_material_test/admin-full/src/components/Header/Header.js"],"names":["React","useState","useEffect","AppBar","Toolbar","IconButton","InputBase","Menu","MenuItem","Fab","Link","useTheme","MenuIcon","MailOutline","MailIcon","NotificationsNone","NotificationsIcon","Person","AccountIcon","Search","SearchIcon","Send","SendIcon","ArrowBack","ArrowBackIcon","classNames","profile","config","useStyles","Badge","Typography","Avatar","Button","Notification","UserAvatar","useLayoutState","useLayoutDispatch","toggleSidebar","useManagementDispatch","useManagementState","actions","useUserDispatch","signOut","messages","notifications","id","color","message","Header","props","classes","theme","layoutState","layoutDispatch","userDispatch","managementDispatch","mailMenu","setMailMenu","isMailsUnread","setIsMailsUnread","notificationsMenu","setNotificationsMenu","isNotificationsUnread","setIsNotificationsUnread","profileMenu","setProfileMenu","isSearchOpen","setSearchOpen","isSmall","setSmall","managementValue","doFind","sessionStorage","getItem","window","addEventListener","handleWindowWidthChange","cleanup","removeEventListener","windowWidth","innerWidth","breakpointWidth","breakpoints","values","md","isSmallScreen","appBar","toolbar","logotype","marginRight","grow","e","currentTarget","headerMenuButton","length","root","headerIcon","isBackend","currentUser","avatar","publicUrl","localStorage","Boolean","className","headerMenuList","headerMenu","paper","profileMenuUser","profileMenuLink","map","messageNotification","messageNotificationSide","variant","name","time","messageNotificationBodySide","sendMessageButton","sendButtonIcon","notification","headerMenuItem","profileMenuItem","profileMenuIcon","history"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  AppBar,\n  Toolbar,\n  IconButton,\n  InputBase,\n  Menu,\n  MenuItem,\n  Fab,\n  Link\n} from \"@material-ui/core\";\nimport { useTheme } from \"@material-ui/styles\";\nimport {\n  Menu as MenuIcon,\n  MailOutline as MailIcon,\n  NotificationsNone as NotificationsIcon,\n  Person as AccountIcon,\n  Search as SearchIcon,\n  Send as SendIcon,\n  ArrowBack as ArrowBackIcon\n} from \"@material-ui/icons\";\nimport classNames from \"classnames\";\n\n//images\nimport profile from \"../../images/main-profile.png\";\nimport config from \"../../config\";\n\n// styles\nimport useStyles from \"./styles\";\n\n// components\nimport { Badge, Typography, Avatar, Button } from \"../Wrappers/Wrappers\";\nimport Notification from \"../Notification/Notification\";\nimport UserAvatar from \"../UserAvatar/UserAvatar\";\n\n// context\nimport {\n  useLayoutState,\n  useLayoutDispatch,\n  toggleSidebar\n} from \"../../context/LayoutContext\";\nimport {\n  useManagementDispatch,\n  useManagementState,\n} from '../../context/ManagementContext'\n\nimport { actions } from '../../context/ManagementContext'\nimport { useUserDispatch, signOut } from \"../../context/UserContext\";\n\nconst messages = [\n];\n\nconst notifications = [\n  { id: 0, color: \"warning\", message: \"Проверка тикета\" }\n];\n\nexport default function Header(props) {\n  var classes = useStyles();\n  var theme = useTheme();\n\n  // global\n  var layoutState = useLayoutState();\n  var layoutDispatch = useLayoutDispatch();\n  var userDispatch = useUserDispatch();\n  const managementDispatch = useManagementDispatch();\n\n  // local\n  var [mailMenu, setMailMenu] = useState(null);\n  var [isMailsUnread, setIsMailsUnread] = useState(true);\n  var [notificationsMenu, setNotificationsMenu] = useState(null);\n  var [isNotificationsUnread, setIsNotificationsUnread] = useState(true);\n  var [profileMenu, setProfileMenu] = useState(null);\n  var [isSearchOpen, setSearchOpen] = useState(false);\n  const [isSmall, setSmall] = useState(false);\n\n  const managementValue = useManagementState()\n\n  useEffect(() => {\n    actions.doFind(sessionStorage.getItem('user_id'))(managementDispatch)\n  }, [])\n\n  useEffect(function() {\n    window.addEventListener(\"resize\", handleWindowWidthChange);\n    handleWindowWidthChange();\n    return function cleanup() {\n      window.removeEventListener(\"resize\", handleWindowWidthChange);\n    };\n  });\n\n  function handleWindowWidthChange() {\n    var windowWidth = window.innerWidth;\n    var breakpointWidth = theme.breakpoints.values.md;\n    var isSmallScreen = windowWidth < breakpointWidth;\n    setSmall(isSmallScreen);\n  }\n\n  return (\n    <AppBar position=\"fixed\" className={classes.appBar}>\n      <Toolbar className={classes.toolbar}>\n        <Typography variant=\"h6\" weight=\"medium\" className={classes.logotype}>\n          EQVIUM\n        </Typography>\n        <Button component={Link} href=\"/#/app/cabinet\" color={\"white\"} style={{marginRight: 24}}>Личный кабинет</Button>\n        <Button component={Link} href=\"/#/app/catalog\" color={\"white\"} style={{marginRight: 24}}>Каталог</Button>\n        <Button component={Link} href=\"/#/app/courses\" color={\"white\"} style={{marginRight: 24}}>Курсы и события</Button>\n        <Button component={Link} href=\"/#/app/hardware\" color={\"white\"} style={{marginRight: 24}}>Оборудование</Button>\n        <div className={classes.grow} />\n        <IconButton\n          color=\"black\"\n          aria-haspopup=\"true\"\n          aria-controls=\"mail-menu\"\n          onClick={e => {\n            setNotificationsMenu(e.currentTarget);\n            setIsNotificationsUnread(false);\n          }}\n          className={classes.headerMenuButton}\n        >\n          <Badge\n            badgeContent={isNotificationsUnread ? notifications.length : null}\n            color=\"warning\"\n          >\n            <NotificationsIcon classes={{ root: classes.headerIcon }} />\n          </Badge>\n        </IconButton>\n        <IconButton\n          color=\"inherit\"\n          aria-haspopup=\"true\"\n          aria-controls=\"mail-menu\"\n          onClick={e => {\n            setMailMenu(e.currentTarget);\n            setIsMailsUnread(false);\n          }}\n          className={classes.headerMenuButton}\n        >\n          <Badge\n            badgeContent={isMailsUnread ? messages.length : null}\n            color=\"secondary\"\n          >\n            <MailIcon classes={{ root: classes.headerIcon }} />\n          </Badge>\n        </IconButton>\n        <IconButton\n          aria-haspopup=\"true\"\n          color=\"inherit\"\n          className={classes.headerMenuButton}\n          aria-controls=\"profile-menu\"\n          onClick={e => setProfileMenu(e.currentTarget)}\n        >\n          <Avatar\n            alt=\"Robert Cotton\"\n            src={config.isBackend ? (managementValue.currentUser && managementValue.currentUser.avatar.length >=1 && managementValue.currentUser.avatar[managementValue.currentUser.avatar.length-1].publicUrl || profile) : profile}\n            classes={{ root: classes.headerIcon }}\n          />\n           </IconButton>\n          <Typography variant=\"body2\" weight={\"bold\"} color=\"info\">\n            {localStorage.getItem(\"email\")}\n          </Typography>\n        <Menu\n          id=\"mail-menu\"\n          open={Boolean(mailMenu)}\n          anchorEl={mailMenu}\n          onClose={() => setMailMenu(null)}\n          MenuListProps={{ className: classes.headerMenuList }}\n          className={classes.headerMenu}\n          classes={{ paper: classes.profileMenu }}\n          disableAutoFocusItem\n        >\n          <div className={classes.profileMenuUser}>\n            <Typography variant=\"h4\" weight=\"medium\">\n              Новые сообщения\n            </Typography>\n            <Typography\n              className={classes.profileMenuLink}\n              component=\"a\"\n              color=\"secondary\"\n            >\n              Новых сообщений: {messages.length}\n            </Typography>\n          </div>\n          {messages.map(message => (\n            <MenuItem key={message.id} className={classes.messageNotification}>\n              <div className={classes.messageNotificationSide}>\n                <UserAvatar color={message.variant} name={message.name} />\n                <Typography size=\"sm\" color=\"text\" colorBrightness=\"secondary\">\n                  {message.time}\n                </Typography>\n              </div>\n              <div\n                className={classNames(\n                  classes.messageNotificationSide,\n                  classes.messageNotificationBodySide\n                )}\n              >\n                <Typography weight=\"medium\" gutterBottom>\n                  {message.name}\n                </Typography>\n                <Typography color=\"text\" colorBrightness=\"secondary\">\n                  {message.message}\n                </Typography>\n              </div>\n            </MenuItem>\n          ))}\n          <Fab\n            variant=\"extended\"\n            color=\"primary\"\n            aria-label=\"Add\"\n            className={classes.sendMessageButton}\n          >\n            Отправить сообщение\n            <SendIcon className={classes.sendButtonIcon} />\n          </Fab>\n        </Menu>\n        <Menu\n          id=\"notifications-menu\"\n          open={Boolean(notificationsMenu)}\n          anchorEl={notificationsMenu}\n          onClose={() => setNotificationsMenu(null)}\n          className={classes.headerMenu}\n          disableAutoFocusItem\n        >\n          {notifications.map(notification => (\n            <MenuItem\n              key={notification.id}\n              onClick={() => setNotificationsMenu(null)}\n              className={classes.headerMenuItem}\n            >\n              <Notification {...notification} typographyVariant=\"inherit\" />\n            </MenuItem>\n          ))}\n        </Menu>\n        <Menu\n          id=\"profile-menu\"\n          open={Boolean(profileMenu)}\n          anchorEl={profileMenu}\n          onClose={() => setProfileMenu(null)}\n          className={classes.headerMenu}\n          classes={{ paper: classes.profileMenu }}\n          disableAutoFocusItem\n        >\n          <div className={classes.profileMenuUser}>\n          </div>\n          <MenuItem\n            className={classNames(\n              classes.profileMenuItem,\n              classes.headerMenuItem\n            )}\n          >\n            <AccountIcon className={classes.profileMenuIcon} />\n        <Button component={Link} href=\"/#/app/profile\" color={\"white\"} style={{marginRight: 24}}>Профиль</Button>\n\n          </MenuItem>\n          <MenuItem\n            className={classNames(\n              classes.profileMenuItem,\n              classes.headerMenuItem\n            )}\n          >\n          </MenuItem>\n          <div className={classes.profileMenuUser}>\n            <Typography\n              className={classes.profileMenuLink}\n              color=\"primary\"\n              onClick={() => signOut(userDispatch, props.history)}\n            >\n              Выход\n            </Typography>\n          </div>\n        </Menu>\n      </Toolbar>\n    </AppBar>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}