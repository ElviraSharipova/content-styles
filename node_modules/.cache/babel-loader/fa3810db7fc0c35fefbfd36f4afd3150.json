{"ast":null,"code":"import _regeneratorRuntime from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/dekor/eqvium/react_material_test/admin-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from\"react\";import axios from\"axios\";import{mockUser}from'./mock';import config from\"../../src/config\";import{toast}from\"react-toastify\";function list(){return _list.apply(this,arguments);}function _list(){_list=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var response;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return axios.get(\"/users\");case 2:response=_context9.sent;return _context9.abrupt(\"return\",response.data);case 4:case\"end\":return _context9.stop();}}},_callee9);}));return _list.apply(this,arguments);}var ManagementStateContext=React.createContext();var ManagementDispatchContext=React.createContext();var initialData={findLoading:false,saveLoading:false,currentUser:null,rows:[],loading:false,idToDelete:null,modalOpen:false};function managementReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialData;var _ref=arguments.length>1?arguments[1]:undefined,type=_ref.type,payload=_ref.payload;if(type==='USERS_FORM_RESET'){return _objectSpread({},initialData);}if(type==='USERS_FORM_FIND_STARTED'){return _objectSpread(_objectSpread({},state),{},{currentUser:null,findLoading:true});}if(type==='USERS_FORM_FIND_SUCCESS'){return _objectSpread(_objectSpread({},state),{},{currentUser:payload,findLoading:false});}if(type==='USERS_FORM_FIND_ERROR'){return _objectSpread(_objectSpread({},state),{},{currentUser:null,findLoading:false});}if(type==='USERS_FORM_CREATE_STARTED'){return _objectSpread(_objectSpread({},state),{},{saveLoading:true});}if(type==='USERS_FORM_CREATE_SUCCESS'){return _objectSpread(_objectSpread({},state),{},{saveLoading:false});}if(type==='USERS_FORM_CREATE_ERROR'){return _objectSpread(_objectSpread({},state),{},{saveLoading:false});}if(type==='USERS_FORM_UPDATE_STARTED'){return _objectSpread(_objectSpread({},state),{},{saveLoading:true});}if(type==='USERS_FORM_UPDATE_SUCCESS'){return _objectSpread(_objectSpread({},state),{},{currentUser:payload,saveLoading:false});}if(type==='USERS_FORM_UPDATE_ERROR'){return _objectSpread(_objectSpread({},state),{},{saveLoading:false});}if(type==='USERS_LIST_FETCH_STARTED'){return _objectSpread(_objectSpread({},state),{},{loading:true});}if(type==='USERS_LIST_FETCH_SUCCESS'){return _objectSpread(_objectSpread({},state),{},{loading:false,rows:payload.rows});}if(type==='USERS_LIST_FETCH_ERROR'){return _objectSpread(_objectSpread({},state),{},{loading:false,rows:[]});}if(type==='USERS_LIST_DELETE_STARTED'){return _objectSpread(_objectSpread({},state),{},{loading:true});}if(type==='USERS_LIST_DELETE_SUCCESS'){return _objectSpread(_objectSpread({},state),{},{loading:false,modalOpen:false});}if(type==='USERS_LIST_DELETE_ERROR'){return _objectSpread(_objectSpread({},state),{},{loading:false,modalOpen:false});}if(type==='USERS_LIST_OPEN_CONFIRM'){return _objectSpread(_objectSpread({},state),{},{loading:false,modalOpen:true,idToDelete:payload.id});}if(type==='USERS_LIST_CLOSE_CONFIRM'){return _objectSpread(_objectSpread({},state),{},{loading:false,modalOpen:false});}return state;};function ManagementProvider(_ref2){var children=_ref2.children;var _React$useReducer=React.useReducer(managementReducer,{findLoading:false,saveLoading:false,currentUser:null,rows:[],loading:false,idToDelete:null,modalOpen:false}),_React$useReducer2=_slicedToArray(_React$useReducer,2),state=_React$useReducer2[0],dispatch=_React$useReducer2[1];return/*#__PURE__*/React.createElement(ManagementStateContext.Provider,{value:state},/*#__PURE__*/React.createElement(ManagementDispatchContext.Provider,{value:dispatch},children));}function useManagementState(){var context=React.useContext(ManagementStateContext);if(context===undefined){throw new Error(\"useManagementState must be used within a ManagementProvider\");}return context;}function useManagementDispatch(){var context=React.useContext(ManagementDispatchContext);if(context===undefined){throw new Error(\"useManagementDispatch must be used within a ManagementProvider\");}return context;}// eslint-disable-next-line no-use-before-define\nexport{ManagementProvider,useManagementState,useManagementDispatch,actions};// ###########################################################\nvar actions={doNew:function doNew(){return{type:'USERS_FORM_RESET'};},doFind:function doFind(id){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!config.isBackend){dispatch({type:'USERS_FORM_FIND_SUCCESS',payload:mockUser});}else{try{dispatch({type:'USERS_FORM_FIND_STARTED'});axios.get(\"/users/\".concat(id)).then(function(res){var currentUser=res.data;dispatch({type:'USERS_FORM_FIND_SUCCESS',payload:currentUser});});}catch(error){toast(\"Error\");console.log(error);dispatch({type:'USERS_FORM_FIND_ERROR'});}}case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref3.apply(this,arguments);};}();},doCreate:function doCreate(values,history){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:try{dispatch({type:'USERS_FORM_CREATE_STARTED'});axios.post('/users',{data:values}).then(function(res){dispatch({type:'USERS_FORM_CREATE_SUCCESS'});history.push('/app/user/list');});}catch(error){toast(\"Error\");console.log(error);dispatch({type:'USERS_FORM_CREATE_ERROR'});}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref4.apply(this,arguments);};}();},doUpdate:function doUpdate(id,values,history){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch({type:'USERS_FORM_UPDATE_STARTED'});_context3.next=4;return axios.put(\"/users/\".concat(id),{id:id,data:values});case 4:dispatch({type:'USERS_FORM_UPDATE_SUCCESS',payload:values});history.push('/app/user/list');_context3.next=12;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);dispatch({type:'USERS_FORM_UPDATE_ERROR'});case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function(_x3,_x4){return _ref5.apply(this,arguments);};}();},doChangePassword:function doChangePassword(_ref6){var newPassword=_ref6.newPassword,currentPassword=_ref6.currentPassword;return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;dispatch({type:'USERS_FORM_CREATE_STARTED'});_context4.next=4;return axios.put('/auth/password-update',{newPassword:newPassword,currentPassword:currentPassword});case 4:dispatch({type:'USERS_PASSWORD_UPDATE_SUCCESS'});toast(\"Password updated\");_context4.next=13;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);toast(\"Error\");console.log(_context4.t0);dispatch({type:'USERS_FORM_CREATE_ERROR'});case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);}));return function(_x5){return _ref7.apply(this,arguments);};}();},doFetch:function doFetch(filter){var keepPagination=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(config.isBackend){_context5.next=4;break;}dispatch({type:'USERS_LIST_FETCH_SUCCESS',payload:{rows:[mockUser],count:1}});_context5.next=17;break;case 4:_context5.prev=4;dispatch({type:'USERS_LIST_FETCH_STARTED',payload:{filter:filter,keepPagination:keepPagination}});_context5.next=8;return list();case 8:response=_context5.sent;dispatch({type:'USERS_LIST_FETCH_SUCCESS',payload:{rows:response.rows,count:response.count}});_context5.next=17;break;case 12:_context5.prev=12;_context5.t0=_context5[\"catch\"](4);toast(\"Error\");console.log(_context5.t0);dispatch({type:'USERS_LIST_FETCH_ERROR'});case 17:case\"end\":return _context5.stop();}}},_callee5,null,[[4,12]]);}));return function(_x6){return _ref8.apply(this,arguments);};}();},doDelete:function doDelete(id){return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var response;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(config.isBackend){_context6.next=4;break;}dispatch({type:'USERS_LIST_DELETE_ERROR'});_context6.next=20;break;case 4:_context6.prev=4;dispatch({type:'USERS_LIST_DELETE_STARTED'});_context6.next=8;return axios.delete(\"/users/\".concat(id));case 8:dispatch({type:'USERS_LIST_DELETE_SUCCESS'});_context6.next=11;return list();case 11:response=_context6.sent;dispatch({type:'USERS_LIST_FETCH_SUCCESS',payload:{rows:response.rows,count:response.count}});_context6.next=20;break;case 15:_context6.prev=15;_context6.t0=_context6[\"catch\"](4);toast(\"Error\");console.log(_context6.t0);dispatch({type:'USERS_LIST_DELETE_ERROR'});case 20:case\"end\":return _context6.stop();}}},_callee6,null,[[4,15]]);}));return function(_x7){return _ref9.apply(this,arguments);};}();},doOpenConfirm:function doOpenConfirm(id){return/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:dispatch({type:'USERS_LIST_OPEN_CONFIRM',payload:{id:id}});case 1:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x8){return _ref10.apply(this,arguments);};}();},doCloseConfirm:function doCloseConfirm(){return/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:dispatch({type:'USERS_LIST_CLOSE_CONFIRM'});case 1:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x9){return _ref11.apply(this,arguments);};}();}};","map":{"version":3,"sources":["/home/dekor/eqvium/react_material_test/admin-full/src/context/ManagementContext.js"],"names":["React","axios","mockUser","config","toast","list","get","response","data","ManagementStateContext","createContext","ManagementDispatchContext","initialData","findLoading","saveLoading","currentUser","rows","loading","idToDelete","modalOpen","managementReducer","state","type","payload","id","ManagementProvider","children","useReducer","dispatch","useManagementState","context","useContext","undefined","Error","useManagementDispatch","actions","doNew","doFind","isBackend","then","res","error","console","log","doCreate","values","history","post","push","doUpdate","getState","put","doChangePassword","newPassword","currentPassword","doFetch","filter","keepPagination","count","doDelete","delete","doOpenConfirm","doCloseConfirm"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport { mockUser } from './mock';\nimport config from \"../../src/config\";\nimport { toast } from \"react-toastify\";\n\nasync function list() {\n  const response = await axios.get(`/users`);\n  return response.data;\n}\n\nvar ManagementStateContext = React.createContext();\nvar ManagementDispatchContext = React.createContext();\nconst initialData = {\n  findLoading: false,\n  saveLoading: false,\n  currentUser: null,\n  rows: [],\n  loading: false,\n  idToDelete: null,\n  modalOpen: false\n};\n\n\nfunction managementReducer(state = initialData, { type, payload }) {\n  if (type === 'USERS_FORM_RESET') {\n    return {\n      ...initialData,\n    };\n  }\n\n  if (type === 'USERS_FORM_FIND_STARTED') {\n    return {\n      ...state,\n      currentUser: null,\n      findLoading: true,\n    };\n  }\n\n  if (type === 'USERS_FORM_FIND_SUCCESS') {\n    return {\n      ...state,\n      currentUser: payload,\n      findLoading: false,\n    };\n  }\n\n  if (type === 'USERS_FORM_FIND_ERROR') {\n    return {\n      ...state,\n      currentUser: null,\n      findLoading: false,\n    };\n  }\n\n  if (type === 'USERS_FORM_CREATE_STARTED') {\n    return {\n      ...state,\n      saveLoading: true,\n    };\n  }\n\n  if (type === 'USERS_FORM_CREATE_SUCCESS') {\n    return {\n      ...state,\n      saveLoading: false,\n    };\n  }\n\n  if (type === 'USERS_FORM_CREATE_ERROR') {\n    return {\n      ...state,\n      saveLoading: false,\n    };\n  }\n\n  if (type === 'USERS_FORM_UPDATE_STARTED') {\n    return {\n      ...state,\n      saveLoading: true,\n    };\n  }\n\n  if (type === 'USERS_FORM_UPDATE_SUCCESS') {\n    return {\n      ...state,\n      currentUser: payload,\n      saveLoading: false,\n    };\n  }\n\n  if (type === 'USERS_FORM_UPDATE_ERROR') {\n    return {\n      ...state,\n      saveLoading: false,\n    };\n  }\n\n  if (type === 'USERS_LIST_FETCH_STARTED') {\n    return {\n      ...state,\n      loading: true,\n    };\n  }\n\n  if (type === 'USERS_LIST_FETCH_SUCCESS') {\n    return {\n      ...state,\n      loading: false,\n      rows: payload.rows,\n    };\n  }\n\n  if (type === 'USERS_LIST_FETCH_ERROR') {\n    return {\n      ...state,\n      loading: false,\n      rows: [],\n    };\n  }\n\n  if (type === 'USERS_LIST_DELETE_STARTED') {\n    return {\n      ...state,\n      loading: true,\n    };\n  }\n\n  if (type === 'USERS_LIST_DELETE_SUCCESS') {\n    return {\n      ...state,\n      loading: false,\n      modalOpen: false,\n    };\n  }\n\n  if (type === 'USERS_LIST_DELETE_ERROR') {\n    return {\n      ...state,\n      loading: false,\n      modalOpen: false,\n    };\n  }\n\n  if (type === 'USERS_LIST_OPEN_CONFIRM') {\n    return {\n      ...state,\n      loading: false,\n      modalOpen: true,\n      idToDelete: payload.id\n    };\n  }\n\n  if (type === 'USERS_LIST_CLOSE_CONFIRM') {\n    return {\n      ...state,\n      loading: false,\n      modalOpen: false,\n    };\n  }\n\n  return state;\n};\n\n\nfunction ManagementProvider({ children }) {\n  var [state, dispatch] = React.useReducer(managementReducer, {\n    findLoading: false,\n    saveLoading: false,\n    currentUser: null,\n    rows: [],\n    loading: false,\n    idToDelete: null,\n    modalOpen: false\n  });\n\n  return (\n    <ManagementStateContext.Provider value={state}>\n      <ManagementDispatchContext.Provider value={dispatch}>\n        {children}\n      </ManagementDispatchContext.Provider>\n    </ManagementStateContext.Provider>\n  );\n}\n\nfunction useManagementState() {\n  var context = React.useContext(ManagementStateContext);\n  if (context === undefined) {\n    throw new Error(\"useManagementState must be used within a ManagementProvider\");\n  }\n  return context;\n}\n\nfunction useManagementDispatch() {\n  var context = React.useContext(ManagementDispatchContext);\n  if (context === undefined) {\n    throw new Error(\"useManagementDispatch must be used within a ManagementProvider\");\n  }\n  return context;\n}\n\n// eslint-disable-next-line no-use-before-define\nexport { ManagementProvider, useManagementState, useManagementDispatch, actions };\n\n// ###########################################################\n\nconst actions = {\n  doNew: () => {\n    return {\n      type: 'USERS_FORM_RESET',\n    };\n  },\n\n  doFind: (id) => async (dispatch) => {\n    if (!config.isBackend) {\n      dispatch({\n        type: 'USERS_FORM_FIND_SUCCESS',\n        payload: mockUser,\n      });\n    } else {\n      try {\n        dispatch({\n          type: 'USERS_FORM_FIND_STARTED',\n        });\n  \n        axios.get(`/users/${id}`).then(res => {\n          const currentUser = res.data;\n          dispatch({\n            type: 'USERS_FORM_FIND_SUCCESS',\n            payload: currentUser,\n          });\n        })\n      } catch (error) {\n        toast(\"Error\");\n        console.log(error)\n        dispatch({\n          type: 'USERS_FORM_FIND_ERROR',\n        });\n  \n      }\n    }\n  },\n\n  doCreate: (values, history) => async (dispatch) => {\n    try {\n      dispatch({\n        type: 'USERS_FORM_CREATE_STARTED',\n      });\n      axios.post('/users', { data: values }).then(res => {\n        dispatch({\n          type: 'USERS_FORM_CREATE_SUCCESS',\n        });\n        history.push('/app/user/list');\n      })\n    } catch (error) {\n      toast(\"Error\");\n      console.log(error)\n      dispatch({\n        type: 'USERS_FORM_CREATE_ERROR',\n      });\n    }\n  },\n\n  doUpdate: (id, values, history) => async (\n    dispatch,\n    getState,\n  ) => {\n    try {\n      dispatch({\n        type: 'USERS_FORM_UPDATE_STARTED',\n      });\n\n      await axios.put(`/users/${id}`, {id, data: values});\n\n      dispatch({\n        type: 'USERS_FORM_UPDATE_SUCCESS',\n        payload: values\n      });\n\n      history.push('/app/user/list')\n    } catch (error) {\n      console.log(error)\n\n      dispatch({\n        type: 'USERS_FORM_UPDATE_ERROR',\n      });\n    }\n  },\n\n  doChangePassword: ({newPassword, currentPassword}) => async (dispatch) => {\n    try {\n      dispatch({\n        type: 'USERS_FORM_CREATE_STARTED',\n      });\n      await axios.put('/auth/password-update', {newPassword, currentPassword})\n      dispatch({\n        type: 'USERS_PASSWORD_UPDATE_SUCCESS',\n      });\n\n      toast(\"Password updated\");\n\n    } catch (error) {\n      toast(\"Error\");\n      console.log(error)\n\n      dispatch({\n        type: 'USERS_FORM_CREATE_ERROR',\n      });\n    }\n  },\n\n  doFetch: (filter, keepPagination = false) => async (dispatch) => {\n    if (!config.isBackend) {\n      dispatch({\n        type: 'USERS_LIST_FETCH_SUCCESS',\n        payload: {\n          rows: [mockUser],\n          count: 1,\n        },\n      });\n    } else {\n      try {\n        dispatch({\n          type: 'USERS_LIST_FETCH_STARTED',\n          payload: { filter, keepPagination },\n        });\n\n        const response = await list();\n\n        dispatch({\n          type: 'USERS_LIST_FETCH_SUCCESS',\n          payload: {\n            rows: response.rows,\n            count: response.count,\n          },\n        });\n      } catch (error) {\n        toast(\"Error\");\n        console.log(error)\n\n        dispatch({\n          type: 'USERS_LIST_FETCH_ERROR',\n        });\n      }\n    }\n  },\n\n  doDelete: (id) => async (dispatch) => {\n    if (!config.isBackend) {\n      dispatch({\n        type: 'USERS_LIST_DELETE_ERROR',\n      });\n    } else {\n      try {\n        dispatch({\n          type: 'USERS_LIST_DELETE_STARTED',\n        });\n  \n        await axios.delete(`/users/${id}`)\n  \n        dispatch({\n          type: 'USERS_LIST_DELETE_SUCCESS',\n        });\n        const response = await list();\n        dispatch({\n          type: 'USERS_LIST_FETCH_SUCCESS',\n          payload: {\n            rows: response.rows,\n            count: response.count,\n          },\n        });\n  \n      } catch (error) {\n        toast(\"Error\");\n        console.log(error)\n        dispatch({\n          type: 'USERS_LIST_DELETE_ERROR',\n        });\n      }\n    }\n  },\n  doOpenConfirm: (id) => async (dispatch) => {\n      dispatch({\n        type: 'USERS_LIST_OPEN_CONFIRM',\n        payload: {\n          id: id\n        },\n      });\n  },\n  doCloseConfirm: () => async (dispatch) => {\n      dispatch({\n        type: 'USERS_LIST_CLOSE_CONFIRM',\n      });\n  },\n};\n"]},"metadata":{},"sourceType":"module"}