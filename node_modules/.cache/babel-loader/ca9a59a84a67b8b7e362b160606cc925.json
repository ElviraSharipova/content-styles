{"ast":null,"code":"var _jsxFileName = \"/home/dekor/eqvium/react_material_test/admin-full/src/pages/charts/LineCharts.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Grid } from \"@material-ui/core\";\nimport { useTheme } from \"@material-ui/styles\";\nimport { Typography, Button } from '../../components/Wrappers';\nimport ReactApexChart from \"react-apexcharts\";\nimport ApexCharts from \"apexcharts\";\nimport ApexLineChart from \"./components/ApexLineChart\"; // components\n\nimport Widget from \"../../components/Widget/Widget\";\nexport default function Charts(props) {\n  //    const pol_series =  [14, 23, 21, 17, 15, 10, 12, 17, 21];\n  var array = new Array(60).fill(0);\n  const pol_state = {\n    series: data2,\n    options: {\n      chart: {\n        type: 'polarArea'\n      }\n    }\n  };\n  const ws = useRef(null);\n  const [data1, updateData1] = useState([0, 0, 0, 0, 0, 0, 0]);\n  const [data2, updateData2] = useState(array); //const [data1, updateData1] = useState([0,0,0]);\n  //const [data2, updateData2] = useState([0,0,0,0,0,0,0]);\n\n  useEffect(() => {\n    ws.current = new WebSocket(\"ws://79.143.25.41:8080/gear\");\n    ws.current.binaryType = 'arraybuffer';\n\n    ws.current.onopen = () => console.log(\"ws opened\");\n\n    ws.current.onclose = () => console.log(\"ws closed\");\n\n    return () => {\n      ws.current.close();\n    };\n  }, []);\n  useEffect(() => {\n    if (!ws.current) return;\n\n    ws.current.onmessage = e => {\n      //console.log(e.data);\n      const message = JSON.parse(e.data); ////if (!isNaN(parseInt(e.data))) {\n      ////  let array1 = [...data1, parseInt(e.data)];\n      //console.log(parseInt(e.data));\n      ////array1.shift();\n      ////updateData1(array1);\n      ////console.log(\"ws recieved: \", data1);\n      ////}\n      //console.log(\"ws recieved: \", JSON.parse(e.data));\n      //console.log(\"ws recieved: \", message[\"data\"][\"sehsor\"]);\n      //console.log(\"ws recieved: \", message);\n\n      const pos = parseInt(message[\"data\"][\"data\"][0][0]);\n      array.fill(0); //let array2 = [...data1, parseInt(e.data)];\n\n      array[pos] = message[\"data\"][\"data\"][0][1]; ////  let array1 = [...data1, parseInt(e.data)];\n\n      updateData2(array);\n      console.log(data2);\n    };\n  }, [[data1], [data2]]); // local\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    md: 6,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Widget, {\n    title: \"Поток данных\",\n    noBodyPadding: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ApexLineChart, {\n    data: data1,\n    type: \"line\",\n    height: \"350\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    md: 6,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ReactApexChart, {\n    options: pol_state.options,\n    series: pol_state.series,\n    type: \"polarArea\",\n    height: \"350\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    md: 6,\n    xs: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 12\n    }\n  }, \"Set Stream\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    md: 6,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["/home/dekor/eqvium/react_material_test/admin-full/src/pages/charts/LineCharts.js"],"names":["React","useState","useEffect","useRef","Grid","useTheme","Typography","Button","ReactApexChart","ApexCharts","ApexLineChart","Widget","Charts","props","array","Array","fill","pol_state","series","data2","options","chart","type","ws","data1","updateData1","updateData2","current","WebSocket","binaryType","onopen","console","log","onclose","close","onmessage","e","message","JSON","parse","data","pos","parseInt"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Grid } from \"@material-ui/core\";\nimport { useTheme } from \"@material-ui/styles\";\nimport { Typography, Button } from '../../components/Wrappers'\nimport ReactApexChart from \"react-apexcharts\";\nimport ApexCharts from \"apexcharts\";\nimport ApexLineChart from \"./components/ApexLineChart\";\n\n// components\nimport Widget from \"../../components/Widget/Widget\";\n\n\n\nexport default function Charts(props) {\n\n//    const pol_series =  [14, 23, 21, 17, 15, 10, 12, 17, 21];\n  var array = new Array(60).fill(0);\nconst pol_state = {\n          \n            series: data2,\n            options: {\n              chart: {\n                type: 'polarArea',\n              },\n            },\n          };\n\n  const ws = useRef(null);\n  const [data1, updateData1] = useState([0,0,0,0,0,0,0]);\n  const [data2, updateData2] = useState(array);\n  //const [data1, updateData1] = useState([0,0,0]);\n  //const [data2, updateData2] = useState([0,0,0,0,0,0,0]);\n\n  useEffect(() => {\n        ws.current = new WebSocket(\"ws://79.143.25.41:8080/gear\");\n        ws.current.binaryType = 'arraybuffer';\n        ws.current.onopen = () => console.log(\"ws opened\");\n        ws.current.onclose = () => console.log(\"ws closed\");\n\n        return () => {\n            ws.current.close();\n        };\n    }, []);\n\n    useEffect(() => {\n        if (!ws.current) return;\n\n        ws.current.onmessage = e => {\n            //console.log(e.data);\n            const message = JSON.parse(e.data);\n            ////if (!isNaN(parseInt(e.data))) {\n            ////  let array1 = [...data1, parseInt(e.data)];\n              //console.log(parseInt(e.data));\n              ////array1.shift();\n              ////updateData1(array1);\n              ////console.log(\"ws recieved: \", data1);\n            ////}\n            //console.log(\"ws recieved: \", JSON.parse(e.data));\n            //console.log(\"ws recieved: \", message[\"data\"][\"sehsor\"]);\n            //console.log(\"ws recieved: \", message);\n            const pos = parseInt(message[\"data\"][\"data\"][0][0]);\n            array.fill(0);\n            //let array2 = [...data1, parseInt(e.data)];\n            array[pos] = message[\"data\"][\"data\"][0][1];\n            ////  let array1 = [...data1, parseInt(e.data)];\n            updateData2(array);\n            console.log(data2);\n        };\n    }, [[data1], [data2]]);\n  \n\n  // local\n\n  return (\n    <>\n      <Grid container spacing={4}>\n        <Grid item md={6} xs={6}>\n          <Widget title={\"Поток данных\"} noBodyPadding>\n            <ApexLineChart\n              data={data1}\n              type=\"line\"\n              height=\"350\"\n            />\n          </Widget>\n        </Grid>\n        <Grid item md={6} xs={6}>\n          <ReactApexChart options={pol_state.options} series={pol_state.series} type=\"polarArea\" height=\"350\"/>\n        </Grid>\n        <Grid item md={6} xs={2}>\n           <Button  variant=\"contained\" color=\"secondary\" >Set Stream</Button>\n        </Grid>\n        <Grid item md={6} xs={12}>\n        </Grid>\n      </Grid>\n    </>\n  );\n}\n\n\n"]},"metadata":{},"sourceType":"module"}