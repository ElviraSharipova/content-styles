{"ast":null,"code":"var _jsxFileName = \"/home/dekor/eqvium/react_material_test/admin-full-v2/src/context/ManagementContext.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { mockUser } from './mock';\nimport config from \"../../src/config\";\nimport { toast } from \"react-toastify\";\n\nasync function list() {\n  const response = await axios.get(`/users`);\n  return response.data;\n}\n\nvar ManagementStateContext = React.createContext();\nvar ManagementDispatchContext = React.createContext();\nconst initialData = {\n  findLoading: false,\n  saveLoading: false,\n  currentUser: null,\n  rows: [],\n  loading: false,\n  idToDelete: null,\n  modalOpen: false\n};\n\nfunction managementReducer(state = initialData, {\n  type,\n  payload\n}) {\n  if (type === 'USERS_FORM_RESET') {\n    return { ...initialData\n    };\n  }\n\n  if (type === 'USERS_FORM_FIND_STARTED') {\n    return { ...state,\n      currentUser: null,\n      findLoading: true\n    };\n  }\n\n  if (type === 'USERS_FORM_FIND_SUCCESS') {\n    return { ...state,\n      currentUser: payload,\n      findLoading: false\n    };\n  }\n\n  if (type === 'USERS_FORM_FIND_ERROR') {\n    return { ...state,\n      currentUser: null,\n      findLoading: false\n    };\n  }\n\n  if (type === 'USERS_FORM_CREATE_STARTED') {\n    return { ...state,\n      saveLoading: true\n    };\n  }\n\n  if (type === 'USERS_FORM_CREATE_SUCCESS') {\n    return { ...state,\n      saveLoading: false\n    };\n  }\n\n  if (type === 'USERS_FORM_CREATE_ERROR') {\n    return { ...state,\n      saveLoading: false\n    };\n  }\n\n  if (type === 'USERS_FORM_UPDATE_STARTED') {\n    return { ...state,\n      saveLoading: true\n    };\n  }\n\n  if (type === 'USERS_FORM_UPDATE_SUCCESS') {\n    return { ...state,\n      currentUser: payload,\n      saveLoading: false\n    };\n  }\n\n  if (type === 'USERS_FORM_UPDATE_ERROR') {\n    return { ...state,\n      saveLoading: false\n    };\n  }\n\n  if (type === 'USERS_LIST_FETCH_STARTED') {\n    return { ...state,\n      loading: true\n    };\n  }\n\n  if (type === 'USERS_LIST_FETCH_SUCCESS') {\n    return { ...state,\n      loading: false,\n      rows: payload.rows\n    };\n  }\n\n  if (type === 'USERS_LIST_FETCH_ERROR') {\n    return { ...state,\n      loading: false,\n      rows: []\n    };\n  }\n\n  if (type === 'USERS_LIST_DELETE_STARTED') {\n    return { ...state,\n      loading: true\n    };\n  }\n\n  if (type === 'USERS_LIST_DELETE_SUCCESS') {\n    return { ...state,\n      loading: false,\n      modalOpen: false\n    };\n  }\n\n  if (type === 'USERS_LIST_DELETE_ERROR') {\n    return { ...state,\n      loading: false,\n      modalOpen: false\n    };\n  }\n\n  if (type === 'USERS_LIST_OPEN_CONFIRM') {\n    return { ...state,\n      loading: false,\n      modalOpen: true,\n      idToDelete: payload.id\n    };\n  }\n\n  if (type === 'USERS_LIST_CLOSE_CONFIRM') {\n    return { ...state,\n      loading: false,\n      modalOpen: false\n    };\n  }\n\n  return state;\n}\n\n;\n\nfunction ManagementProvider({\n  children\n}) {\n  var [state, dispatch] = React.useReducer(managementReducer, {\n    findLoading: false,\n    saveLoading: false,\n    currentUser: null,\n    rows: [],\n    loading: false,\n    idToDelete: null,\n    modalOpen: false\n  });\n  return /*#__PURE__*/React.createElement(ManagementStateContext.Provider, {\n    value: state,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ManagementDispatchContext.Provider, {\n    value: dispatch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }\n  }, children));\n}\n\nfunction useManagementState() {\n  var context = React.useContext(ManagementStateContext);\n\n  if (context === undefined) {\n    throw new Error(\"useManagementState must be used within a ManagementProvider\");\n  }\n\n  return context;\n}\n\nfunction useManagementDispatch() {\n  var context = React.useContext(ManagementDispatchContext);\n\n  if (context === undefined) {\n    throw new Error(\"useManagementDispatch must be used within a ManagementProvider\");\n  }\n\n  return context;\n} // eslint-disable-next-line no-use-before-define\n\n\nexport { ManagementProvider, useManagementState, useManagementDispatch, actions }; // ###########################################################\n\nconst actions = {\n  doNew: () => {\n    return {\n      type: 'USERS_FORM_RESET'\n    };\n  },\n  doFind: id => async dispatch => {\n    if (!config.isBackend) {\n      dispatch({\n        type: 'USERS_FORM_FIND_SUCCESS',\n        payload: mockUser\n      });\n    } else {\n      try {\n        dispatch({\n          type: 'USERS_FORM_FIND_STARTED'\n        });\n        axios.get(`/users/${id}`).then(res => {\n          const currentUser = res.data;\n          dispatch({\n            type: 'USERS_FORM_FIND_SUCCESS',\n            payload: currentUser\n          });\n        });\n      } catch (error) {\n        toast(\"Error\");\n        console.log(error);\n        dispatch({\n          type: 'USERS_FORM_FIND_ERROR'\n        });\n      }\n    }\n  },\n  doCreate: (values, history) => async dispatch => {\n    try {\n      dispatch({\n        type: 'USERS_FORM_CREATE_STARTED'\n      });\n      axios.post('/users', {\n        data: values\n      }).then(res => {\n        dispatch({\n          type: 'USERS_FORM_CREATE_SUCCESS'\n        });\n        history.push('/app/user/list');\n      });\n    } catch (error) {\n      toast(\"Error\");\n      console.log(error);\n      dispatch({\n        type: 'USERS_FORM_CREATE_ERROR'\n      });\n    }\n  },\n  doUpdate: (id, values, history) => async (dispatch, getState) => {\n    try {\n      dispatch({\n        type: 'USERS_FORM_UPDATE_STARTED'\n      });\n      await axios.put(`/users/${id}`, {\n        id,\n        data: values\n      });\n      dispatch({\n        type: 'USERS_FORM_UPDATE_SUCCESS',\n        payload: values\n      });\n      history.push('/app/user/list');\n    } catch (error) {\n      console.log(error);\n      dispatch({\n        type: 'USERS_FORM_UPDATE_ERROR'\n      });\n    }\n  },\n  doChangePassword: ({\n    newPassword,\n    currentPassword\n  }) => async dispatch => {\n    try {\n      dispatch({\n        type: 'USERS_FORM_CREATE_STARTED'\n      });\n      await axios.put('/auth/password-update', {\n        newPassword,\n        currentPassword\n      });\n      dispatch({\n        type: 'USERS_PASSWORD_UPDATE_SUCCESS'\n      });\n      toast(\"Password updated\");\n    } catch (error) {\n      toast(\"Error\");\n      console.log(error);\n      dispatch({\n        type: 'USERS_FORM_CREATE_ERROR'\n      });\n    }\n  },\n  doFetch: (filter, keepPagination = false) => async dispatch => {\n    if (!config.isBackend) {\n      dispatch({\n        type: 'USERS_LIST_FETCH_SUCCESS',\n        payload: {\n          rows: [mockUser],\n          count: 1\n        }\n      });\n    } else {\n      try {\n        dispatch({\n          type: 'USERS_LIST_FETCH_STARTED',\n          payload: {\n            filter,\n            keepPagination\n          }\n        });\n        const response = await list();\n        dispatch({\n          type: 'USERS_LIST_FETCH_SUCCESS',\n          payload: {\n            rows: response.rows,\n            count: response.count\n          }\n        });\n      } catch (error) {\n        toast(\"Error\");\n        console.log(error);\n        dispatch({\n          type: 'USERS_LIST_FETCH_ERROR'\n        });\n      }\n    }\n  },\n  doDelete: id => async dispatch => {\n    if (!config.isBackend) {\n      dispatch({\n        type: 'USERS_LIST_DELETE_ERROR'\n      });\n    } else {\n      try {\n        dispatch({\n          type: 'USERS_LIST_DELETE_STARTED'\n        });\n        await axios.delete(`/users/${id}`);\n        dispatch({\n          type: 'USERS_LIST_DELETE_SUCCESS'\n        });\n        const response = await list();\n        dispatch({\n          type: 'USERS_LIST_FETCH_SUCCESS',\n          payload: {\n            rows: response.rows,\n            count: response.count\n          }\n        });\n      } catch (error) {\n        toast(\"Error\");\n        console.log(error);\n        dispatch({\n          type: 'USERS_LIST_DELETE_ERROR'\n        });\n      }\n    }\n  },\n  doOpenConfirm: id => async dispatch => {\n    dispatch({\n      type: 'USERS_LIST_OPEN_CONFIRM',\n      payload: {\n        id: id\n      }\n    });\n  },\n  doCloseConfirm: () => async dispatch => {\n    dispatch({\n      type: 'USERS_LIST_CLOSE_CONFIRM'\n    });\n  }\n};","map":{"version":3,"sources":["/home/dekor/eqvium/react_material_test/admin-full-v2/src/context/ManagementContext.js"],"names":["React","axios","mockUser","config","toast","list","response","get","data","ManagementStateContext","createContext","ManagementDispatchContext","initialData","findLoading","saveLoading","currentUser","rows","loading","idToDelete","modalOpen","managementReducer","state","type","payload","id","ManagementProvider","children","dispatch","useReducer","useManagementState","context","useContext","undefined","Error","useManagementDispatch","actions","doNew","doFind","isBackend","then","res","error","console","log","doCreate","values","history","post","push","doUpdate","getState","put","doChangePassword","newPassword","currentPassword","doFetch","filter","keepPagination","count","doDelete","delete","doOpenConfirm","doCloseConfirm"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport { mockUser } from './mock';\nimport config from \"../../src/config\";\nimport { toast } from \"react-toastify\";\n\nasync function list() {\n  const response = await axios.get(`/users`);\n  return response.data;\n}\n\nvar ManagementStateContext = React.createContext();\nvar ManagementDispatchContext = React.createContext();\nconst initialData = {\n  findLoading: false,\n  saveLoading: false,\n  currentUser: null,\n  rows: [],\n  loading: false,\n  idToDelete: null,\n  modalOpen: false\n};\n\n\nfunction managementReducer(state = initialData, { type, payload }) {\n  if (type === 'USERS_FORM_RESET') {\n    return {\n      ...initialData,\n    };\n  }\n\n  if (type === 'USERS_FORM_FIND_STARTED') {\n    return {\n      ...state,\n      currentUser: null,\n      findLoading: true,\n    };\n  }\n\n  if (type === 'USERS_FORM_FIND_SUCCESS') {\n    return {\n      ...state,\n      currentUser: payload,\n      findLoading: false,\n    };\n  }\n\n  if (type === 'USERS_FORM_FIND_ERROR') {\n    return {\n      ...state,\n      currentUser: null,\n      findLoading: false,\n    };\n  }\n\n  if (type === 'USERS_FORM_CREATE_STARTED') {\n    return {\n      ...state,\n      saveLoading: true,\n    };\n  }\n\n  if (type === 'USERS_FORM_CREATE_SUCCESS') {\n    return {\n      ...state,\n      saveLoading: false,\n    };\n  }\n\n  if (type === 'USERS_FORM_CREATE_ERROR') {\n    return {\n      ...state,\n      saveLoading: false,\n    };\n  }\n\n  if (type === 'USERS_FORM_UPDATE_STARTED') {\n    return {\n      ...state,\n      saveLoading: true,\n    };\n  }\n\n  if (type === 'USERS_FORM_UPDATE_SUCCESS') {\n    return {\n      ...state,\n      currentUser: payload,\n      saveLoading: false,\n    };\n  }\n\n  if (type === 'USERS_FORM_UPDATE_ERROR') {\n    return {\n      ...state,\n      saveLoading: false,\n    };\n  }\n\n  if (type === 'USERS_LIST_FETCH_STARTED') {\n    return {\n      ...state,\n      loading: true,\n    };\n  }\n\n  if (type === 'USERS_LIST_FETCH_SUCCESS') {\n    return {\n      ...state,\n      loading: false,\n      rows: payload.rows,\n    };\n  }\n\n  if (type === 'USERS_LIST_FETCH_ERROR') {\n    return {\n      ...state,\n      loading: false,\n      rows: [],\n    };\n  }\n\n  if (type === 'USERS_LIST_DELETE_STARTED') {\n    return {\n      ...state,\n      loading: true,\n    };\n  }\n\n  if (type === 'USERS_LIST_DELETE_SUCCESS') {\n    return {\n      ...state,\n      loading: false,\n      modalOpen: false,\n    };\n  }\n\n  if (type === 'USERS_LIST_DELETE_ERROR') {\n    return {\n      ...state,\n      loading: false,\n      modalOpen: false,\n    };\n  }\n\n  if (type === 'USERS_LIST_OPEN_CONFIRM') {\n    return {\n      ...state,\n      loading: false,\n      modalOpen: true,\n      idToDelete: payload.id\n    };\n  }\n\n  if (type === 'USERS_LIST_CLOSE_CONFIRM') {\n    return {\n      ...state,\n      loading: false,\n      modalOpen: false,\n    };\n  }\n\n  return state;\n};\n\n\nfunction ManagementProvider({ children }) {\n  var [state, dispatch] = React.useReducer(managementReducer, {\n    findLoading: false,\n    saveLoading: false,\n    currentUser: null,\n    rows: [],\n    loading: false,\n    idToDelete: null,\n    modalOpen: false\n  });\n\n  return (\n    <ManagementStateContext.Provider value={state}>\n      <ManagementDispatchContext.Provider value={dispatch}>\n        {children}\n      </ManagementDispatchContext.Provider>\n    </ManagementStateContext.Provider>\n  );\n}\n\nfunction useManagementState() {\n  var context = React.useContext(ManagementStateContext);\n  if (context === undefined) {\n    throw new Error(\"useManagementState must be used within a ManagementProvider\");\n  }\n  return context;\n}\n\nfunction useManagementDispatch() {\n  var context = React.useContext(ManagementDispatchContext);\n  if (context === undefined) {\n    throw new Error(\"useManagementDispatch must be used within a ManagementProvider\");\n  }\n  return context;\n}\n\n// eslint-disable-next-line no-use-before-define\nexport { ManagementProvider, useManagementState, useManagementDispatch, actions };\n\n// ###########################################################\n\nconst actions = {\n  doNew: () => {\n    return {\n      type: 'USERS_FORM_RESET',\n    };\n  },\n\n  doFind: (id) => async (dispatch) => {\n    if (!config.isBackend) {\n      dispatch({\n        type: 'USERS_FORM_FIND_SUCCESS',\n        payload: mockUser,\n      });\n    } else {\n      try {\n        dispatch({\n          type: 'USERS_FORM_FIND_STARTED',\n        });\n  \n        axios.get(`/users/${id}`).then(res => {\n          const currentUser = res.data;\n          dispatch({\n            type: 'USERS_FORM_FIND_SUCCESS',\n            payload: currentUser,\n          });\n        })\n      } catch (error) {\n        toast(\"Error\");\n        console.log(error)\n        dispatch({\n          type: 'USERS_FORM_FIND_ERROR',\n        });\n  \n      }\n    }\n  },\n\n  doCreate: (values, history) => async (dispatch) => {\n    try {\n      dispatch({\n        type: 'USERS_FORM_CREATE_STARTED',\n      });\n      axios.post('/users', { data: values }).then(res => {\n        dispatch({\n          type: 'USERS_FORM_CREATE_SUCCESS',\n        });\n        history.push('/app/user/list');\n      })\n    } catch (error) {\n      toast(\"Error\");\n      console.log(error)\n      dispatch({\n        type: 'USERS_FORM_CREATE_ERROR',\n      });\n    }\n  },\n\n  doUpdate: (id, values, history) => async (\n    dispatch,\n    getState,\n  ) => {\n    try {\n      dispatch({\n        type: 'USERS_FORM_UPDATE_STARTED',\n      });\n\n      await axios.put(`/users/${id}`, {id, data: values});\n\n      dispatch({\n        type: 'USERS_FORM_UPDATE_SUCCESS',\n        payload: values\n      });\n\n      history.push('/app/user/list')\n    } catch (error) {\n      console.log(error)\n\n      dispatch({\n        type: 'USERS_FORM_UPDATE_ERROR',\n      });\n    }\n  },\n\n  doChangePassword: ({newPassword, currentPassword}) => async (dispatch) => {\n    try {\n      dispatch({\n        type: 'USERS_FORM_CREATE_STARTED',\n      });\n      await axios.put('/auth/password-update', {newPassword, currentPassword})\n      dispatch({\n        type: 'USERS_PASSWORD_UPDATE_SUCCESS',\n      });\n\n      toast(\"Password updated\");\n\n    } catch (error) {\n      toast(\"Error\");\n      console.log(error)\n\n      dispatch({\n        type: 'USERS_FORM_CREATE_ERROR',\n      });\n    }\n  },\n\n  doFetch: (filter, keepPagination = false) => async (dispatch) => {\n    if (!config.isBackend) {\n      dispatch({\n        type: 'USERS_LIST_FETCH_SUCCESS',\n        payload: {\n          rows: [mockUser],\n          count: 1,\n        },\n      });\n    } else {\n      try {\n        dispatch({\n          type: 'USERS_LIST_FETCH_STARTED',\n          payload: { filter, keepPagination },\n        });\n\n        const response = await list();\n\n        dispatch({\n          type: 'USERS_LIST_FETCH_SUCCESS',\n          payload: {\n            rows: response.rows,\n            count: response.count,\n          },\n        });\n      } catch (error) {\n        toast(\"Error\");\n        console.log(error)\n\n        dispatch({\n          type: 'USERS_LIST_FETCH_ERROR',\n        });\n      }\n    }\n  },\n\n  doDelete: (id) => async (dispatch) => {\n    if (!config.isBackend) {\n      dispatch({\n        type: 'USERS_LIST_DELETE_ERROR',\n      });\n    } else {\n      try {\n        dispatch({\n          type: 'USERS_LIST_DELETE_STARTED',\n        });\n  \n        await axios.delete(`/users/${id}`)\n  \n        dispatch({\n          type: 'USERS_LIST_DELETE_SUCCESS',\n        });\n        const response = await list();\n        dispatch({\n          type: 'USERS_LIST_FETCH_SUCCESS',\n          payload: {\n            rows: response.rows,\n            count: response.count,\n          },\n        });\n  \n      } catch (error) {\n        toast(\"Error\");\n        console.log(error)\n        dispatch({\n          type: 'USERS_LIST_DELETE_ERROR',\n        });\n      }\n    }\n  },\n  doOpenConfirm: (id) => async (dispatch) => {\n      dispatch({\n        type: 'USERS_LIST_OPEN_CONFIRM',\n        payload: {\n          id: id\n        },\n      });\n  },\n  doCloseConfirm: () => async (dispatch) => {\n      dispatch({\n        type: 'USERS_LIST_CLOSE_CONFIRM',\n      });\n  },\n};\n"]},"metadata":{},"sourceType":"module"}